{"version":3,"file":"shell.js","sourceRoot":"","sources":["../version/version.ts","../../src/shell/domstubs.ts","../../src/shell/module.ts","../../src/shell/unit.ts","../../src/shell/fuzz.ts","../../src/shell/microTaskQueue.ts","../../src/shell/playerservices.ts","../../src/shell/shell.ts","../../src/shell/references.ts"],"names":[],"mappings":"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","sourcesContent":["module Shumway {\n  version = '202007020700';\n  build = 'unknown';\n}\n","/**\n * Copyright 2014 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nlet microTaskQueue: Shumway.Shell.MicroTasksQueue = null;\n\nthis.self = this;\nthis.window = this;\n\ndeclare function print(message: string): void;\n\nthis.console = {\n\t_print: print,\n\tlog: print,\n\tinfo: function () {\n\t\tif (!Shumway.Shell.verbose) {\n\t\t\treturn;\n\t\t}\n\t\tprint(Shumway.IndentingWriter.YELLOW + Shumway.argumentsToString(arguments) +\n\t\t\tShumway.IndentingWriter.ENDC);\n\t},\n\twarn: function () {\n\t\tprint(Shumway.IndentingWriter.RED + Shumway.argumentsToString(arguments) +\n\t\t\tShumway.IndentingWriter.ENDC);\n\t},\n\terror: function () {\n\t\tprint(Shumway.IndentingWriter.BOLD_RED + Shumway.argumentsToString(arguments) +\n\t\t\tShumway.IndentingWriter.ENDC + '\\nstack:\\n' + (new Error().stack));\n\t},\n\ttime: function () {\n\t},\n\ttimeEnd: function () {\n\t}\n};\n\nthis.dump = function (message: any) {\n\tputstr(Shumway.argumentsToString(arguments));\n};\n\nthis.addEventListener = function (type: any) {\n\t// console.log('Add listener: ' + type);\n};\n\nlet defaultTimerArgs: Array<any> = [];\nthis.setTimeout = function (fn: any, interval: number) {\n\tlet args = arguments.length > 2 ? Array.prototype.slice.call(arguments, 2) : defaultTimerArgs;\n\tlet task = microTaskQueue.scheduleInterval(fn, args, interval, false);\n\treturn task.id;\n};\nthis.setInterval = function (fn: any, interval: number) {\n\tlet args = arguments.length > 2 ? Array.prototype.slice.call(arguments, 2) : defaultTimerArgs;\n\tlet task = microTaskQueue.scheduleInterval(fn, args, interval, true);\n\treturn task.id;\n};\nthis.clearTimeout = function (id: any) {\n\tmicroTaskQueue.remove(id);\n};\nthis.clearInterval = clearTimeout;\n\nthis.navigator = {\n\tuserAgent: 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10.6; rv:4.0) Gecko/20100101 Firefox/4.0'\n};\n\n// TODO remove document stub\nthis.document = {\n\tcreateElementNS: function (ns: any, qname: any) {\n\t\tif (qname !== 'svg') {\n\t\t\tthrow new Error('only supports svg and create SVGMatrix');\n\t\t}\n\t\treturn {\n\t\t\tcreateSVGMatrix: function () {\n\t\t\t\treturn {a: 0, b: 0, c: 0, d: 0, e: 0, f: 0};\n\t\t\t}\n\t\t};\n\t},\n\tcreateElement: function (name: any) {\n\t\tif (name !== 'canvas') {\n\t\t\tthrow new Error('only supports canvas');\n\t\t}\n\t\treturn {\n\t\t\tgetContext: function (type: any) {\n\t\t\t\tif (type !== '2d') {\n\t\t\t\t\tthrow new Error('only supports canvas 2d');\n\t\t\t\t}\n\t\t\t\treturn {};\n\t\t\t}\n\t\t}\n\t},\n\tlocation: {\n\t\thref: {\n\t\t\tresource: \"\"//shumway/build/ts/shell.js\"\n\t\t}\n\t}\n};\n\nthis.Image = function () {\n};\nthis.Image.prototype = {};\n\nthis.URL = function (url: any, baseURL = '') {\n\turl = url + '';\n\tbaseURL = baseURL + '';\n\tif (url.indexOf('://') >= 0 || baseURL === url) {\n\t\tthis._setURL(url);\n\t\treturn;\n\t}\n\n\tlet base = baseURL || '';\n\tbase = base.lastIndexOf('/') >= 0 ? base.substring(0, base.lastIndexOf('/') + 1) : '';\n\tif (url.indexOf('/') === 0) {\n\t\tlet m = /^[^:]+:\\/\\/[^\\/]+/.exec(base);\n\t\tif (m) base = m[0];\n\t}\n\tthis._setURL(base + url);\n};\nthis.URL.prototype = {\n\t_setURL: function (url: any) {\n\t\tthis.href = url + '';\n\t\t// Simple parsing to extract protocol, hostname and port.\n\t\tlet m = /^(\\w+:)\\/\\/([^:/]+)(:([0-9]+))?/.exec(url.toLowerCase());\n\t\tif (m) {\n\t\t\tthis.protocol = m[1];\n\t\t\tthis.hostname = m[2];\n\t\t\tthis.port = m[4] || '';\n\t\t} else {\n\t\t\tthis.protocol = 'file:';\n\t\t\tthis.hostname = '';\n\t\t\tthis.port = '';\n\t\t}\n\t},\n\ttoString: function () {\n\t\treturn this.href;\n\t}\n};\nthis.URL.createObjectURL = function createObjectURL() {\n\treturn \"\";\n};\n\nthis.Blob = function () {\n};\nthis.Blob.prototype = {};\n\nthis.XMLHttpRequest = function () {\n};\nthis.XMLHttpRequest.prototype = {\n\topen: function (method: any, url: any, async: any) {\n\t\tthis.url = url;\n\t\tif (async === false) {\n\t\t\tthrow new Error('Unsupported sync');\n\t\t}\n\t},\n\tsend: function (data: any) {\n\t\tsetTimeout(function () {\n\t\t\ttry {\n\t\t\t\tconsole.log('XHR: ' + this.url);\n\t\t\t\tlet response = this.responseType === 'arraybuffer' ?\n\t\t\t\t\tread(this.url, 'binary').buffer : read(this.url);\n\t\t\t\tif (this.responseType === 'json') {\n\t\t\t\t\tresponse = JSON.parse(response);\n\t\t\t\t}\n\t\t\t\tthis.response = response;\n\t\t\t\tthis.readyState = 4;\n\t\t\t\tthis.status = 200;\n\t\t\t\tthis.onreadystatechange && this.onreadystatechange();\n\t\t\t\tthis.onload && this.onload();\n\t\t\t} catch (e) {\n\t\t\t\tthis.error = e;\n\t\t\t\tthis.readyState = 4;\n\t\t\t\tthis.status = 404;\n\t\t\t\tthis.onreadystatechange && this.onreadystatechange();\n\t\t\t\tthis.onerror && this.onerror();\n\t\t\t}\n\t\t}.bind(this));\n\t}\n}\n\nthis.window.screen = {\n\twidth: 1024,\n\theight: 1024\n};\n\n/**\n * sessionStorage polyfill.\n */\nlet sessionStorageObject: { [key: string]: string } = {};\nthis.window.sessionStorage = {\n\tgetItem: function (key: string): string {\n\t\treturn sessionStorageObject[key];\n\t},\n\tsetItem(key: string, value: string): void {\n\t\tsessionStorageObject[key] = value;\n\t},\n\tremoveItem(key: string): void {\n\t\tdelete sessionStorageObject[key];\n\t}\n};\n\n/**\n * Promise polyfill.\n */\nthis.window.Promise = (function () {\n\tfunction getDeferred(C: any) {\n\t\tif (typeof C !== 'function') {\n\t\t\tthrow new TypeError('Invalid deferred constructor');\n\t\t}\n\t\tlet resolver = createDeferredConstructionFunctions();\n\t\tlet promise = new C(resolver);\n\t\tlet resolve = resolver.resolve;\n\t\tif (typeof resolve !== 'function') {\n\t\t\tthrow new TypeError('Invalid resolve construction function');\n\t\t}\n\t\tlet reject = resolver.reject;\n\t\tif (typeof reject !== 'function') {\n\t\t\tthrow new TypeError('Invalid reject construction function');\n\t\t}\n\t\treturn {promise: promise, resolve: resolve, reject: reject};\n\t}\n\n\tfunction updateDeferredFromPotentialThenable(x: any, deferred: any) {\n\t\tif (typeof x !== 'object' || x === null) {\n\t\t\treturn false;\n\t\t}\n\t\ttry {\n\t\t\tlet then = x.then;\n\t\t\tif (typeof then !== 'function') {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tlet thenCallResult = then.call(x, deferred.resolve, deferred.reject);\n\t\t} catch (e) {\n\t\t\tlet reject = deferred.reject;\n\t\t\treject(e);\n\t\t}\n\t\treturn true;\n\t}\n\n\tfunction isPromise(x: any) {\n\t\treturn typeof x === 'object' && x !== null &&\n\t\t\ttypeof x.promiseStatus !== 'undefined';\n\t}\n\n\tfunction rejectPromise(promise: any, reason: any) {\n\t\tif (promise.promiseStatus !== 'unresolved') {\n\t\t\treturn;\n\t\t}\n\t\tlet reactions = promise.rejectReactions;\n\t\tpromise.result = reason;\n\t\tpromise.resolveReactions = undefined;\n\t\tpromise.rejectReactions = undefined;\n\t\tpromise.promiseStatus = 'has-rejection';\n\t\ttriggerPromiseReactions(reactions, reason);\n\t}\n\n\tfunction resolvePromise(promise: any, resolution: any) {\n\t\tif (promise.promiseStatus !== 'unresolved') {\n\t\t\treturn;\n\t\t}\n\t\tlet reactions = promise.resolveReactions;\n\t\tpromise.result = resolution;\n\t\tpromise.resolveReactions = undefined;\n\t\tpromise.rejectReactions = undefined;\n\t\tpromise.promiseStatus = 'has-resolution';\n\t\ttriggerPromiseReactions(reactions, resolution);\n\t}\n\n\tfunction triggerPromiseReactions(reactions: any, argument: any) {\n\t\tfor (let i = 0; i < reactions.length; i++) {\n\t\t\tqueueMicrotask({reaction: reactions[i], argument: argument});\n\t\t}\n\t}\n\n\tfunction queueMicrotask(task: any) {\n\t\tif (microtasksQueue.length === 0) {\n\t\t\tsetTimeout(handleMicrotasksQueue, 0);\n\t\t}\n\t\tmicrotasksQueue.push(task);\n\t}\n\n\tfunction executePromiseReaction(reaction: any, argument: any) {\n\t\tlet deferred = reaction.deferred;\n\t\tlet handler = reaction.handler;\n\t\tlet handlerResult, updateResult;\n\t\ttry {\n\t\t\thandlerResult = handler(argument);\n\t\t} catch (e) {\n\t\t\tlet reject = deferred.reject;\n\t\t\treturn reject(e);\n\t\t}\n\n\t\tif (handlerResult === deferred.promise) {\n\t\t\tlet reject = deferred.reject;\n\t\t\treturn reject(new TypeError('Self resolution'));\n\t\t}\n\n\t\ttry {\n\t\t\tupdateResult = updateDeferredFromPotentialThenable(handlerResult,\n\t\t\t\tdeferred);\n\t\t\tif (!updateResult) {\n\t\t\t\tlet resolve = deferred.resolve;\n\t\t\t\treturn resolve(handlerResult);\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tlet reject = deferred.reject;\n\t\t\treturn reject(e);\n\t\t}\n\t}\n\n\tlet microtasksQueue: Array<any> = [];\n\n\tfunction handleMicrotasksQueue() {\n\t\twhile (microtasksQueue.length > 0) {\n\t\t\tlet task = microtasksQueue[0];\n\t\t\ttry {\n\t\t\t\texecutePromiseReaction(task.reaction, task.argument);\n\t\t\t} catch (e) {\n\t\t\t\t// unhandler onFulfillment/onRejection exception\n\t\t\t\tif (typeof (<any>Promise).onerror === 'function') {\n\t\t\t\t\t(<any>Promise).onerror(e);\n\t\t\t\t}\n\t\t\t}\n\t\t\tmicrotasksQueue.shift();\n\t\t}\n\t}\n\n\tfunction throwerFunction(e: any) {\n\t\tthrow e;\n\t}\n\n\tfunction identityFunction(x: any) {\n\t\treturn x;\n\t}\n\n\tfunction createRejectPromiseFunction(promise: any) {\n\t\treturn function (reason: any) {\n\t\t\trejectPromise(promise, reason);\n\t\t};\n\t}\n\n\tfunction createResolvePromiseFunction(promise: any) {\n\t\treturn function (resolution: any) {\n\t\t\tresolvePromise(promise, resolution);\n\t\t};\n\t}\n\n\tfunction createDeferredConstructionFunctions(): any {\n\t\tlet fn: any = function (resolve: any, reject: any) {\n\t\t\tfn.resolve = resolve;\n\t\t\tfn.reject = reject;\n\t\t};\n\t\treturn fn;\n\t}\n\n\tfunction createPromiseResolutionHandlerFunctions(promise: any,\n\t                                                 fulfillmentHandler: any, rejectionHandler: any) {\n\t\treturn function (x: any) {\n\t\t\tif (x === promise) {\n\t\t\t\treturn rejectionHandler(new TypeError('Self resolution'));\n\t\t\t}\n\t\t\tlet cstr = promise.promiseConstructor;\n\t\t\tif (isPromise(x)) {\n\t\t\t\tlet xConstructor = x.promiseConstructor;\n\t\t\t\tif (xConstructor === cstr) {\n\t\t\t\t\treturn x.then(fulfillmentHandler, rejectionHandler);\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet deferred = getDeferred(cstr);\n\t\t\tlet updateResult = updateDeferredFromPotentialThenable(x, deferred);\n\t\t\tif (updateResult) {\n\t\t\t\tlet deferredPromise = deferred.promise;\n\t\t\t\treturn deferredPromise.then(fulfillmentHandler, rejectionHandler);\n\t\t\t}\n\t\t\treturn fulfillmentHandler(x);\n\t\t};\n\t}\n\n\tfunction createPromiseAllCountdownFunction(index: number, values: Array<any>, deferred: any,\n\t                                           countdownHolder: any) {\n\t\treturn function (x: any) {\n\t\t\tvalues[index] = x;\n\t\t\tcountdownHolder.countdown--;\n\t\t\tif (countdownHolder.countdown === 0) {\n\t\t\t\tdeferred.resolve(values);\n\t\t\t}\n\t\t};\n\t}\n\n\tfunction Promise(resolver: any) {\n\t\tif (typeof resolver !== 'function') {\n\t\t\tthrow new TypeError('resolver is not a function');\n\t\t}\n\t\tlet promise = this;\n\t\tif (typeof promise !== 'object') {\n\t\t\tthrow new TypeError('Promise to initialize is not an object');\n\t\t}\n\t\tpromise.promiseStatus = 'unresolved';\n\t\tpromise.resolveReactions = [];\n\t\tpromise.rejectReactions = [];\n\t\tpromise.result = undefined;\n\n\t\tlet resolve = createResolvePromiseFunction(promise);\n\t\tlet reject = createRejectPromiseFunction(promise);\n\n\t\ttry {\n\t\t\tlet result = resolver(resolve, reject);\n\t\t} catch (e) {\n\t\t\trejectPromise(promise, e);\n\t\t}\n\n\t\tpromise.promiseConstructor = Promise;\n\t\treturn promise;\n\t}\n\n\t(<any>Promise).all = function (iterable: any) {\n\t\tlet deferred = getDeferred(this);\n\t\tlet values: Array<any> = [];\n\t\tlet countdownHolder = {countdown: 0};\n\t\tlet index = 0;\n\t\titerable.forEach(function (nextValue: any) {\n\t\t\tlet nextPromise = this.cast(nextValue);\n\t\t\tlet fn = createPromiseAllCountdownFunction(index, values,\n\t\t\t\tdeferred, countdownHolder);\n\t\t\tnextPromise.then(fn, deferred.reject);\n\t\t\tindex++;\n\t\t\tcountdownHolder.countdown++;\n\t\t}, this);\n\t\tif (index === 0) {\n\t\t\tdeferred.resolve(values);\n\t\t}\n\t\treturn deferred.promise;\n\t};\n\t(<any>Promise).cast = function (x: any) {\n\t\tif (isPromise(x)) {\n\t\t\treturn x;\n\t\t}\n\t\tlet deferred = getDeferred(this);\n\t\tdeferred.resolve(x);\n\t\treturn deferred.promise;\n\t};\n\t(<any>Promise).reject = function (r: any) {\n\t\tlet deferred = getDeferred(this);\n\t\tlet rejectResult = deferred.reject(r);\n\t\treturn deferred.promise;\n\t};\n\t(<any>Promise).resolve = function (x: any) {\n\t\tlet deferred = getDeferred(this);\n\t\tlet rejectResult = deferred.resolve(x);\n\t\treturn deferred.promise;\n\t};\n\tPromise.prototype = {\n\t\t'catch': function (onRejected: any) {\n\t\t\tthis.then(undefined, onRejected);\n\t\t},\n\t\tthen: function (onFulfilled: any, onRejected: any) {\n\t\t\tlet promise = this;\n\t\t\tif (!isPromise(promise)) {\n\t\t\t\tthrow new TypeError('this is not a Promises');\n\t\t\t}\n\t\t\tlet cstr = promise.promiseConstructor;\n\t\t\tlet deferred = getDeferred(cstr);\n\n\t\t\tlet rejectionHandler = typeof onRejected === 'function' ? onRejected :\n\t\t\t\tthrowerFunction;\n\t\t\tlet fulfillmentHandler = typeof onFulfilled === 'function' ? onFulfilled :\n\t\t\t\tidentityFunction;\n\t\t\tlet resolutionHandler = createPromiseResolutionHandlerFunctions(promise,\n\t\t\t\tfulfillmentHandler, rejectionHandler);\n\n\t\t\tlet resolveReaction = {deferred: deferred, handler: resolutionHandler};\n\t\t\tlet rejectReaction = {deferred: deferred, handler: rejectionHandler};\n\n\t\t\tswitch (promise.promiseStatus) {\n\t\t\t\tcase 'unresolved':\n\t\t\t\t\tpromise.resolveReactions.push(resolveReaction);\n\t\t\t\t\tpromise.rejectReactions.push(rejectReaction);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'has-resolution':\n\t\t\t\t\tlet resolution = promise.result;\n\t\t\t\t\tqueueMicrotask({reaction: resolveReaction, argument: resolution});\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'has-rejection':\n\t\t\t\t\tlet rejection = promise.result;\n\t\t\t\t\tqueueMicrotask({reaction: rejectReaction, argument: rejection});\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\treturn deferred.promise;\n\t\t}\n\t};\n\n\treturn Promise;\n})();\n","/*\n * Copyright 2013 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nfunction addLogPrefix(prefix: any, args: Array<any>) {\n\treturn [].concat.apply([prefix], args);\n}\n\nmodule Shumway.Shell {\n\n}\n","/**\n * Copyright 2014 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nmodule Shumway.Unit {\n\n\texport let everFailed = false;\n\texport let testNumber = 0;\n\n\texport let writer: IndentingWriter;\n\n\texport function fail(message: any) {\n\t\teverFailed = true;\n\t\twriter.errorLn(message);\n\t}\n\n\texport function eqFloat(a: number, b: number, test: string, tolerance: number) {\n\t\ttolerance = typeof tolerance === \"undefined\" ? 0.1 : tolerance;\n\t\ttest = description(test);\n\t\tlet d = Math.abs(a - b);\n\t\tif (isNaN(d) || d >= tolerance) {\n\t\t\treturn fail(\"FAIL\" + test + \". Got \" + a + \", expected \" + b + failedLocation());\n\t\t}\n\t\twriter.debugLn(\"PASS\" + test);\n\t}\n\n\texport function neq(a: number, b: number, test: string) {\n\t\ttest = description(test);\n\t\tif (a === b) {\n\t\t\treturn fail(\"FAIL \" + test + \". Got \" + a + \", expected different (!==) value\" +\n\t\t\t\tfailedLocation());\n\t\t}\n\t\twriter.debugLn(\"PASS\" + test);\n\t}\n\n\texport function eq(a: any, b: any, test: string) {\n\t\ttest = description(test);\n\t\tif (a !== b) {\n\t\t\treturn fail(\"FAIL\" + test + \". Got \" + a + \", expected \" + b + failedLocation());\n\t\t}\n\t\twriter.debugLn(\"PASS\" + test);\n\t}\n\n\texport function eqArray(a: Array<any>, b: Array<any>, test: string) {\n\t\ttest = description(test);\n\t\tif (a == undefined && b) {\n\t\t\treturn fail(\"FAIL\" + test + \" Null Array: a\" + failedLocation());\n\t\t}\n\t\tif (a && b == undefined) {\n\t\t\treturn fail(\"FAIL\" + test + \" Null Array: b\" + failedLocation());\n\t\t}\n\t\tif (a.length !== b.length) {\n\t\t\treturn fail(\"FAIL\" + test + \" Array Length Mismatch, got \" + a.length + \", expected \" +\n\t\t\t\tb.length + failedLocation());\n\t\t}\n\t\tfor (let i = 0; i < a.length; i++) {\n\t\t\tif (a[i] !== b[i]) {\n\t\t\t\tif (!(typeof a[i] == \"number\" && typeof b[i] == \"number\" && isNaN(a[i]) && isNaN(b[i]))) {\n\t\t\t\t\treturn fail(\"FAIL\" + test + \" Array Element \" + i + \": got \" + a[i] + \", expected \" +\n\t\t\t\t\t\tb[i] + failedLocation());\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\twriter.debugLn(\"PASS\" + test);\n\t}\n\n\texport function structEq(a: any, b: any, test: any) {\n\t\ttest = description(test);\n\t\tif (a == undefined && b) {\n\t\t\treturn fail(\"FAIL\" + test + \" Expected neither or both objects to be null/undefined, \" +\n\t\t\t\t\"but only `a` was\" + failedLocation());\n\t\t}\n\t\tif (a && b == undefined) {\n\t\t\treturn fail(\"FAIL\" + test + \" Expected neither or both objects to be null/undefined, \" +\n\t\t\t\t\"but only `b` was\" + failedLocation());\n\t\t}\n\t\tlet aKeys = Object.keys(a);\n\t\tlet bKeys = Object.keys(b);\n\t\tfor (let i = 0; i < aKeys.length; i++) {\n\t\t\tlet key = aKeys[i];\n\t\t\tif (a[key] !== b[key]) {\n\t\t\t\treturn fail(\"FAIL\" + test + \" properties differ. a.\" + key + \" = \" + a[key] +\n\t\t\t\t\t\", b.\" + key + \" = \" + b[key] + failedLocation());\n\t\t\t}\n\t\t}\n\t\tfor (let i = 0; i < bKeys.length; i++) {\n\t\t\tlet key = bKeys[i];\n\t\t\tif (a[key] !== b[key]) {\n\t\t\t\treturn fail(\"FAIL\" + test + \" properties differ. a.\" + key + \" = \" + a[key] +\n\t\t\t\t\t\", b.\" + key + \" = \" + b[key] + failedLocation());\n\t\t\t}\n\t\t}\n\t\twriter.debugLn(\"PASS\" + test);\n\t}\n\n\texport function matrixEq(a: any, b: any, test: string) {\n\t\ttest = description(test);\n\t\tif (a == undefined && b) {\n\t\t\treturn fail(\"FAIL\" + test + \" Expected neither or both objects to be null/undefined, \" +\n\t\t\t\t\"but only `a` was\" + failedLocation());\n\t\t}\n\t\tif (a && b == undefined) {\n\t\t\treturn fail(\"FAIL\" + test + \" Expected neither or both objects to be null/undefined, \" +\n\t\t\t\t\"but only `b` was\" + failedLocation());\n\t\t}\n\t\tif (a.a !== b.a || a.b !== b.b ||\n\t\t\ta.c !== b.c || a.d !== b.d ||\n\t\t\ta.tx !== b.tx || a.ty !== b.ty) {\n\t\t\treturn fail(\"FAIL\" + test + \" matrices differ.\" + failedLocation());\n\t\t}\n\t\twriter.debugLn(\"PASS\" + test);\n\t}\n\n\texport function check(condition: boolean, test: string) {\n\t\ttest = description(test);\n\t\tif (!condition) {\n\t\t\treturn fail(\"FAIL\" + test + \". Got \" + condition + \", expected truthy value\" +\n\t\t\t\tfailedLocation());\n\t\t}\n\t\twriter.debugLn(\"PASS\" + test);\n\t}\n\n\texport function assertThrowsInstanceOf(f: any, ctor: any, test: string) {\n\t\ttest = description(test);\n\t\tlet msg;\n\t\ttry {\n\t\t\tf();\n\t\t} catch (exc) {\n\t\t\tif (exc instanceof ctor) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tmsg = \"Expected exception \" + ctor.name + \", got \" + exc;\n\t\t}\n\t\tif (msg === undefined) {\n\t\t\tmsg = \"Expected exception \" + ctor.name + \", no exception thrown\";\n\t\t}\n\t\treturn fail(\"FAIL \" + test + \". \" + msg + failedLocation());\n\t}\n\n\texport function description(test: string) {\n\t\ttestNumber++;\n\t\treturn test ? \": \" + test : \" #\" + testNumber;\n\t}\n\n\texport function failedLocation() {\n\t\treturn \" (\" + new Error().stack.split('\\n')[2] + \")\";\n\t}\n\n\texport function info(s: string) {\n\t\twriter.infoLn(\"INFO: \" + s);\n\t}\n\n\texport function warn(s: string) {\n\t\twriter.warnLn(\"WARN: \" + s);\n\t}\n\n\texport function error(s: string) {\n\t\twriter.errorLn(\"ERROR: \" + s);\n\t}\n\n\tlet maxVarianceTime = 1;\n\tlet minElapsedTime = 100;\n\tlet maxElapsedTime = 1000;\n\n\t/**\n\t * Measures several runs of a test case and tries to ensure that the test case is reasonably fast, yet still accurate.\n\t */\n\texport function checkTime(fn: any, test: string, threshold: number, iterations: number = 64, help = true) {\n\t\titerations = iterations || 0;\n\t\tif (help && iterations < 5) {\n\t\t\twriter.warnLn(\"Test doesn't have enough iterations to get meaningful timing results: \" + test);\n\t\t} else if (help && iterations > 1024) {\n\t\t\twriter.warnLn(\"Test has too many iterations, increase the complexity of the test case: \" + test);\n\t\t}\n\t\tlet start = new Date();\n\t\tlet s = 0;\n\t\tlet elapsedTimes = [];\n\t\tfor (let i = 0; i < iterations; i++) {\n\t\t\tlet iterationStart = Date.now();\n\t\t\ts += fn();\n\t\t\telapsedTimes.push(Date.now() - iterationStart);\n\t\t}\n\t\tlet elapsed: number = (<any>new Date() - <any>start);\n\t\t// Let's not make the test too short, or too long.\n\t\tif (help && elapsed < minElapsedTime) {\n\t\t\twriter.warnLn(\"Test doesn't run long enough (\" + elapsed.toFixed(2) + \" ms) to have meaningful timing results: \" + test + \", must be at least \" + minElapsedTime + \" ms long.\");\n\t\t} else if (help && elapsed > maxElapsedTime) {\n\t\t\twriter.warnLn(\"Test runs too long (\" + elapsed.toFixed(2) + \" ms), reduce the number of iterations: \" + test + \", keep it below \" + maxElapsedTime.toFixed(2) + \" ms.\");\n\t\t}\n\n\t\tlet result = Math.min.apply(null, elapsedTimes);\n\t\t// Can we make the test smaller yet get the same result?\n\t\tif (help && elapsed > 500 && result === Math.min.apply(null, elapsedTimes.slice(0, elapsedTimes.length / 2 | 0))) {\n\t\t\twriter.warnLn(\"Test would have had the same result with half as many iterations.\");\n\t\t}\n\t\tif (result > threshold) {\n\t\t\treturn fail(\"FAIL \" + test + \". Got \" + result.toFixed(2) + \" ms, expected less than \" + threshold.toFixed(2) + \" ms\" +\n\t\t\t\tfailedLocation());\n\t\t}\n\t\tlet details = \"Iterations: \" + iterations + \", Elapsed: \" + elapsed.toFixed(2) + \" ms (\" + result.toFixed(2) + \" ms / Iteration)\"\n\t\twriter.debugLn(\"PASS \" + test + \" \" + details);\n\t\tlet min = Math.min.apply(null, elapsedTimes);\n\t\tlet max = Math.max.apply(null, elapsedTimes);\n\t\tlet maxBarWidth = 32;\n\t\tfor (let i = 0; i < Math.min(elapsedTimes.length, 8); i++) {\n\t\t\tlet j = elapsedTimes.length - i - 1;\n\t\t\tlet time = (elapsedTimes[j] - min) / (max - min);\n\t\t\tlet ticks = Math.round(time * maxBarWidth);\n\t\t\twriter.debugLn(String(j).padLeft(\" \", 4) + \": =\" + StringUtilities.repeatString(\"=\", ticks) + \" \" + elapsedTimes[j].toFixed(2) + \" ms\");\n\t\t}\n\t}\n}\n\n/**\n * Exported on the global object since unit tests don't import them explicitly.\n */\n\nimport check = Shumway.Unit.check;\nimport checkTime = Shumway.Unit.checkTime;\nimport fail = Shumway.Unit.fail;\nimport eqFloat = Shumway.Unit.eqFloat;\nimport neq = Shumway.Unit.neq;\nimport eq = Shumway.Unit.eq;\nimport eqArray = Shumway.Unit.eqArray;\nimport structEq = Shumway.Unit.structEq;\nimport matrixEq = Shumway.Unit.matrixEq;\nimport assertThrowsInstanceOf = Shumway.Unit.assertThrowsInstanceOf;\nimport info = Shumway.Unit.info;\n// import warn = Shumway.Unit.warn;\nimport error = Shumway.Unit.error;\n","module Shumway.Shell.Fuzz {\n  export class Mill {\n    private _writer: IndentingWriter;\n    private _kind: String;\n    constructor(writer: IndentingWriter, kind: string) {\n      this._writer = writer;\n      this._kind = kind;\n    }\n    public fuzz() {\n      Random.seed(Date.now());\n      for (let i = 0; i < 1; i++) {\n        writeSWF(this._writer, randomNumber(10, 17));\n      }\n    }\n  }\n\n  function randomNumber(min: number, max: number, exclude: number = Infinity) {\n  \tlet value;\n    do {\n      value = Math.floor(Math.random() * (max - min + 1)) + min\n    } while (value === exclude);\n    return value;\n  }\n\n  function makeRandomNumber(min: number, max: number) {\n    return randomNumber.bind(null, min, max);\n  }\n\n\n  function probaility(value: number): boolean {\n    return Math.random() <= value;\n  }\n\n  function writeSWF(writer: IndentingWriter, version: number) {\n    writer.enter('<swf version=\"' + version + '\" compressed=\"1\">');\n    writeHeader(writer);\n    writer.leave('</swf>');\n  }\n\n\n  function writeHeader(writer: IndentingWriter) {\n    let frameCount = randomNumber(10, 100);\n    writer.enter('<Header framerate=\"120\" frames=\"' + frameCount + '\">');\n\n    writer.enter('<size>');\n    writer.writeLn('<Rectangle left=\"0\" right=\"2000\" top=\"0\" bottom=\"2000\"/>');\n    writer.leave('</size>');\n\n    writer.enter('<tags>');\n    writer.writeLn('<FileAttributes hasMetaData=\"1\" allowABC=\"0\" suppressCrossDomainCaching=\"0\" swfRelativeURLs=\"0\" useNetwork=\"0\"/>');\n\n    frameCount = randomNumber(1, 32);\n    for (let i = 0; i < frameCount; i++) {\n      writeFrame(writer, true, frameCount, -1);\n    }\n\n    writeActions(writer, makeFSCommandQuit);\n    writer.writeLn('<ShowFrame/>'); // Need a show frame here for this to execute.\n\n    writer.leave('</tags>');\n    writer.leave('</Header>');\n  }\n\n  function makeSequenceWriter(sequence: any []) {\n    return function (writer: IndentingWriter) {\n      for (let i = 0; i < sequence.length; i++) {\n        sequence[i](writer);\n      }\n    }\n  }\n\n  function writeDefineSprite(writer: IndentingWriter, id: number, frameCount: number) {\n    writer.enter('<DefineSprite objectID=\"' + id + '\" frames=\"' + frameCount + '\">');\n    writer.enter('<tags>');\n    for (let i = 0; i < frameCount; i++) {\n      writeFrame(writer, false, frameCount, id);\n    }\n    writer.leave('</tags>');\n    writer.leave('</DefineSprite>');\n  }\n\n  let spriteCount = 1;\n\n  function writeFrame(writer: IndentingWriter, root: boolean, frameCount: number, id: number) {\n    if (probaility(0.5)) {\n      let sequence = [\n        writeTraceCurrentFrameAction\n      ];\n      if (!root) {\n        sequence.push(makeGotoFrameAction(makeRandomNumber(0, frameCount)));\n      }\n      writeActions(writer, makeSequenceWriter(sequence));\n    }\n\n    if (probaility(0.5) && (spriteCount - 1 !== id)) {\n      writePlaceObject2(writer, randomNumber(0, 1024), randomNumber(1, spriteCount - 1, id));\n    }\n    writer.writeLn('<ShowFrame/>');\n    if (root) {\n      if (probaility(0.3)) {\n        writeDefineSprite(writer, spriteCount ++, randomNumber(5, 10));\n      }\n    }\n  }\n\n  function writeActions(writer: IndentingWriter, actionsWriter: any) {\n    writer.enter('<DoAction>');\n    writer.enter('<actions>');\n    actionsWriter(writer);\n    writer.writeLn('<EndAction/>');\n    writer.leave('</actions>');\n    writer.leave('</DoAction>');\n  }\n\n  function writePlaceObject2(writer: IndentingWriter, depth: number, id: number) {\n    writer.enter('<PlaceObject2 replace=\"0\" depth=\"' + depth + '\" objectID=\"' + id + '\">');\n    writer.enter('<transform>');\n    writer.writeLn('<Transform transX=\"0\" transY=\"0\"/>');\n    writer.leave('</transform>');\n    writer.leave('</PlaceObject2>');\n  }\n\n  function makeGotoFrameAction(frameNumber: any) {\n    return function (writer: IndentingWriter) {\n      // writer.writeLn('<GotoFrame frame=\"' + frameNumber() + '\"/>');\n    }\n  }\n\n  function makeFSCommandQuit(writer: IndentingWriter) {\n    writer.writeLn('<GetURL url=\"FSCommand:quit\" target=\"\"/>');\n  }\n\n  function writeTraceCurrentFrameAction(writer: IndentingWriter) {\n    writer.writeLn('<PushData>');\n    writer.writeLn('  <items>');\n    writer.writeLn('    <StackString value=\"this\"/>');\n    writer.writeLn('  </items>');\n    writer.writeLn('</PushData>');\n    writer.writeLn('<GetVariable/>');\n    writer.writeLn('  <PushData>');\n    writer.writeLn('    <items>');\n    writer.writeLn('      <StackString value=\"_currentframe\"/>');\n    writer.writeLn('    </items>');\n    writer.writeLn('  </PushData>');\n    writer.writeLn('<GetMember/>');\n    writer.writeLn('<Trace/>');\n\n  }\n}","/**\n * Copyright 2014 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nmodule Shumway.Shell {\n\texport class MicroTask {\n\t\trunAt: number;\n\n\t\tconstructor(public id: number, public fn: () => any, public args: any[],\n\t\t            public interval: number, public repeat: boolean) {\n\t\t}\n\t}\n\n\tlet jsGlobal = (function () {\n\t\treturn this || (1, eval)('this//# sourceURL=jsGlobal-getter');\n\t})();\n\n\texport class MicroTasksQueue {\n\t\tprivate tasks: MicroTask[] = [];\n\t\tprivate nextId: number = 1;\n\t\tprivate time: number = 1388556000000; // 1-Jan-2014\n\t\tprivate stopped: boolean = true;\n\n\t\tconstructor() {\n\t\t}\n\n\t\tpublic get isEmpty(): boolean {\n\t\t\treturn this.tasks.length === 0;\n\t\t}\n\n\t\tpublic scheduleInterval(fn: () => any, args: any[], interval: number, repeat: boolean) {\n\t\t\tlet MIN_INTERVAL = 4;\n\t\t\tinterval = Math.round((interval || 0) / 10) * 10;\n\t\t\tif (interval < MIN_INTERVAL) {\n\t\t\t\tinterval = MIN_INTERVAL;\n\t\t\t}\n\t\t\tlet taskId = this.nextId++;\n\t\t\tlet task = new MicroTask(taskId, fn, args, interval, repeat);\n\t\t\tthis.enqueue(task);\n\t\t\treturn task;\n\t\t}\n\n\t\tpublic enqueue(task: MicroTask) {\n\t\t\tlet tasks = this.tasks;\n\t\t\ttask.runAt = this.time + task.interval;\n\t\t\tlet i = tasks.length;\n\t\t\twhile (i > 0 && tasks[i - 1].runAt > task.runAt) {\n\t\t\t\ti--;\n\t\t\t}\n\t\t\tif (i === tasks.length) {\n\t\t\t\ttasks.push(task);\n\t\t\t} else {\n\t\t\t\ttasks.splice(i, 0, task);\n\t\t\t}\n\t\t}\n\n\t\tpublic dequeue(): MicroTask {\n\t\t\tlet task = this.tasks.shift();\n\t\t\tthis.time = task.runAt;\n\t\t\treturn task;\n\t\t}\n\n\t\tpublic remove(id: number) {\n\t\t\tlet tasks = this.tasks;\n\t\t\tfor (let i = 0; i < tasks.length; i++) {\n\t\t\t\tif (tasks[i].id === id) {\n\t\t\t\t\ttasks.splice(i, 1);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tpublic clear() {\n\t\t\tthis.tasks.length = 0;\n\t\t}\n\n\t\t/**\n\t\t * Runs micro tasks for a certain |duration| and |count| whichever comes first. Optionally,\n\t\t * if the |clear| option is specified, the micro task queue is cleared even if not all the\n\t\t * tasks have been executed.\n\t\t *\n\t\t * If a |preCallback| function is specified, only continue execution if |preCallback()| returns true.\n\t\t */\n\t\trun(duration: number = 0, count: number = 0, clear: boolean = false, preCallback: Function = null) {\n\t\t\tthis.stopped = false;\n\t\t\tlet executedTasks = 0;\n\t\t\tlet stopAt = Date.now() + duration;\n\t\t\twhile (!this.isEmpty && !this.stopped) {\n\t\t\t\tif (duration > 0 && Date.now() >= stopAt) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif (count > 0 && executedTasks >= count) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tlet task = this.dequeue();\n\t\t\t\tif (preCallback && !preCallback(task)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\ttask.fn.apply(null, task.args);\n\t\t\t\texecutedTasks++;\n\t\t\t}\n\t\t\tif (clear) {\n\t\t\t\tthis.clear();\n\t\t\t}\n\t\t\tthis.stopped = true;\n\t\t}\n\n\t\tstop() {\n\t\t\tthis.stopped = true;\n\t\t}\n\t}\n}\n","/**\n * Copyright 2014 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nmodule Shumway.Shell {\n  class ShellBinaryFileReader {\n    public url:string;\n    public method:string;\n    public mimeType:string;\n    public data:string;\n\n    constructor(url: string, method: string, mimeType: string, data: string) {\n      this.url = url;\n      this.method = method;\n      this.mimeType = mimeType;\n      this.data = data;\n    }\n\n    readAll(progress: any, complete: any) {\n      setTimeout(function () {\n        try {\n          let url = this.url + '';\n          let strippedUrl = url.indexOf('file://') === 0 ? url.substr(7) : url;\n          complete(read(strippedUrl, 'binary'));\n        } catch (e) {\n          complete(null, 'Can\\'t read ' + this.url);\n        }\n      }.bind(this));\n    }\n\n    readAsync(ondata: any, onerror: any, onopen: any, oncomplete: any, onhttpstatus: any) {\n      onopen && setTimeout(onopen);\n      this.readAll(null, function (data: any, err: any) {\n        if (data) {\n          ondata(data, { loaded: data.byteLength, total: data.byteLength});\n          oncomplete();\n        } else {\n          onerror(err);\n        }\n      });\n    }\n  }\n\n  let shellTelemetry = {\n    reportTelemetry: function (data: any) {\n    }\n  };\n\n  let shellFileLoadingService = {\n    baseUrl: null as string,\n    createSession: function () {\n      return {\n        open: function (request: any) {\n          let self = this;\n          let path = Shumway.FileLoadingService.instance.resolveUrl(request.url);\n          new BinaryFileReader(path, request.method, request.mimeType, request.data).readAsync(\n            function (data, progress) {\n              self.onprogress(data, {bytesLoaded: progress.loaded, bytesTotal: progress.total});\n            },\n            function (e) {\n              self.onerror(e);\n            },\n            self.onopen,\n            self.onclose,\n            self.onhttpstatus);\n        },\n        close: function () {\n          // doing nothing in the shell\n        }\n      };\n    },\n    setBaseUrl: function (url: any) {\n      shellFileLoadingService.baseUrl = url;\n      return url;\n    },\n    resolveUrl: function (url: any) {\n      return new (<any>URL)(url, shellFileLoadingService.baseUrl).href;\n    },\n    navigateTo: function (url: any, target: any) {\n    }\n  };\n\n  export function setFileServicesBaseUrl(baseUrl: string) {\n    shellFileLoadingService.baseUrl = baseUrl;\n  }\n\n  export function initializePlayerServices() {\n    Shumway.BinaryFileReader = <typeof BinaryFileReader><any>ShellBinaryFileReader;\n    Shumway.Telemetry.instance = shellTelemetry;\n    Shumway.FileLoadingService.instance = shellFileLoadingService;\n    Shumway.LocalConnectionService.instance = new Player.PlayerInternalLocalConnectionService();\n  }\n}\n","/**\n * Copyright 2014 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Lets you run Shumway from the command line.\n */\n\ndeclare let scriptArgs: any;\ndeclare let arguments: any;\ndeclare let load: any;\ndeclare let quit: any;\ndeclare let read: any;\ndeclare let help: any;\ndeclare let printErr: any;\n\n// Number of errors thrown, used for shell scripting to return non-zero exit codes.\nlet errors = 0;\n\nlet homePath = \"\";\n//load(homePath + \"build/libs/relooper.js\");\nlet builtinABCPath = homePath + \"build/libs/builtin.abc\";\nlet shellABCPath = homePath + \"build/libs/shell.abc\";\nlet playerglobalInfo = {\n\tabcs: homePath + \"build/playerglobal/playerglobal.abcs\",\n\tcatalog: homePath + \"build/playerglobal/playerglobal.json\"\n};\n\ndeclare let readFile: any, readBinaryFile: any, readbuffer: any;\nlet isV8 = typeof readbuffer !== 'undefined';\nlet isJSC = typeof readFile !== 'undefined';\nif (isV8) {\n\tlet oldread = read;\n\tread = function (path: any, type: any) {\n\t\treturn type === 'binary' ? new Uint8Array(readbuffer(path)) : oldread(path);\n\t}\n} else if (isJSC) {\n\tif (typeof readBinaryFile === 'undefined') {\n\t\tthrow new Error('readBinaryFile was not found');\n\t}\n\tread = function (path: any, type: any) {\n\t\treturn type === 'binary' ? new Uint8Array(readBinaryFile(path)) : readFile(path);\n\t}\n}\nif (typeof read === 'undefined') {\n\tthrow new Error('Unable to simulate read()');\n}\n\nif (isV8 || isJSC) {\n\t// v8 and jsc will fail for Promises\n\tthis.Promise = undefined;\n}\n\n/**\n * Global unitTests array, unit tests add themselves to this. The list may have numbers, these indicate the\n * number of times to run the test following it. This makes it easy to disable test by pushing a zero in\n * front.\n */\nlet unitTests: Array<any> = [];\n\nlet commandLineArguments: string [];\n// SpiderMonkey\nif (typeof scriptArgs === \"undefined\") {\n\tcommandLineArguments = arguments;\n} else {\n\tcommandLineArguments = scriptArgs;\n}\n\nlet disableBundleSelection: any;\ntry {\n\tdisableBundleSelection = read('build/ts/shell.conf') === 'dist';\n} catch (e) {\n\tdisableBundleSelection = false;\n}\n\n// The command line parser isn't yet available, so do a rough manual check for whether the bundled\n// player source should be used.\nif (disableBundleSelection || commandLineArguments.indexOf('--bundle') >= 0) {\n\tload('build/bundles/shumway.player.js');\n} else if (commandLineArguments.indexOf('-b') >= 0 || commandLineArguments.indexOf('--closure-bundle') >= 0) {\n\tload('build/bundles-cc/shumway.player.js');\n} else {\n\t/* Autogenerated player references: base= */\n\n\tload(\"build/ts/base.js\");\n\tload(\"build/ts/tools.js\");\n\n\tload(\"build/ts/avm2.js\");\n\n\tload(\"build/ts/swf.js\");\n\n\tload(\"build/ts/flash.js\");\n\n\tload(\"build/ts/avm1.js\");\n\n\tload(\"build/ts/gfx-base.js\");\n\tload(\"build/ts/player.js\");\n\n\t/* Autogenerated player references end */\n}\n\nmodule Shumway.Shell {\n\timport assert = Shumway.Debug.assert;\n\timport ABCFile = Shumway.AVMX.ABCFile;\n\timport WriterFlags = Shumway.AVMX.WriterFlags;\n\n\timport Option = Shumway.Options.Option;\n\timport OptionSet = Shumway.Options.OptionSet;\n\timport ArgumentParser = Shumway.Options.ArgumentParser;\n\n\timport SwfTagCode = Shumway.SWF.Parser.SwfTagCode;\n\timport DataBuffer = Shumway.ArrayUtilities.DataBuffer;\n\n\timport Compiler = Shumway.AVM2.Compiler;\n\n\tclass ShellGFXServer implements Shumway.Remoting.IGFXService {\n\t\taddObserver(observer: Shumway.Remoting.IGFXServiceObserver) {\n\t\t\t// Ignoring\n\t\t}\n\n\t\tremoveObserver(observer: Shumway.Remoting.IGFXServiceObserver) {\n\t\t\t// Ignoring\n\t\t}\n\n\t\tupdate(updates: DataBuffer, assets: any[]): void {\n\t\t\tlet bytes = updates.getBytes();\n\t\t\t// console.log('Updates sent');\n\t\t\treturn null;\n\t\t}\n\n\t\tupdateAndGet(updates: DataBuffer, assets: any[]): any {\n\t\t\tlet bytes = updates.getBytes();\n\n\t\t\t// Simulating text field metrics\n\t\t\tlet buffer = new DataBuffer();\n\t\t\tbuffer.write2Ints(1, 1); // textWidth, textHeight\n\t\t\tbuffer.writeInt(0); // offsetX\n\t\t\tbuffer.writeInt(0); // numLines\n\t\t\tbuffer.position = 0;\n\t\t\treturn buffer;\n\t\t}\n\n\t\tframe(): void {\n\t\t\t// console.log('Frame');\n\t\t}\n\n\t\tvideoControl(id: number, eventType: Shumway.Remoting.VideoControlEvent, data: any): any {\n\t\t\t// console.log('videoControl');\n\t\t}\n\n\t\tregisterFont(syncId: number, data: any): Promise<any> {\n\t\t\t// console.log('registerFont');\n\t\t\treturn Promise.resolve(undefined);\n\t\t}\n\n\t\tregisterImage(syncId: number, symbolId: number, data: any, alphaData: any): Promise<any> {\n\t\t\t// console.log('registerImage');\n\t\t\treturn Promise.resolve({width: 100, height: 50});\n\t\t}\n\n\t\tfscommand(command: string, args: string): void {\n\t\t\tif (command === 'quit') {\n\t\t\t\t// console.log('Player quit');\n\t\t\t\tmicroTaskQueue.stop();\n\t\t\t}\n\t\t}\n\t}\n\n\texport let verbose = false;\n\tlet writer = new IndentingWriter();\n\n\tlet parseOption: Option;\n\tlet scanParseOption: Option;\n\tlet disassembleOption: Option;\n\tlet compileOption: Option;\n\tlet verboseOption: Option;\n\tlet profileOption: Option;\n\tlet releaseOption: Option;\n\tlet deterministicOption: Option;\n\tlet executeOption: Option;\n\tlet freshSecurityDomainOption: Option;\n\tlet printABCFileNameOption: Option;\n\tlet interpreterOption: Option;\n\tlet symbolFilterOption: Option;\n\tlet microTaskDurationOption: Option;\n\tlet microTaskCountOption: Option;\n\tlet maxFrameCountOption: Option;\n\tlet repeatOption: Option;\n\tlet loadPlayerGlobalCatalogOption: Option;\n\tlet loadShellLibOption: Option;\n\tlet porcelainOutputOption: Option;\n\tlet usePlayerBundleOption: Option;\n\tlet usePlayerClosureBundleOption: Option;\n\n\tlet fuzzMillOption: Option;\n\tlet writersOption: Option;\n\n\texport function main(commandLineArguments: string []) {\n\t\tlet systemOptions: Shumway.Options.OptionSet = Shumway.Settings.shumwayOptions;\n\t\tlet shellOptions = systemOptions.register(new Shumway.Options.OptionSet(\"Shell Options\"));\n\n\t\tparseOption = shellOptions.register(new Option(\"p\", \"parse\", \"boolean\", false, \"Parse File(s)\"));\n\t\tscanParseOption = shellOptions.register(new Option(\"sp\", \"scanParse\", \"boolean\", false, \"Scan/Parse File(s)\"));\n\t\tdisassembleOption = shellOptions.register(new Option(\"d\", \"disassemble\", \"boolean\", false, \"Disassemble File(s)\"));\n\t\tcompileOption = shellOptions.register(new Option(\"c\", \"compile\", \"boolean\", false, \"Compile File(s)\"));\n\t\tverboseOption = shellOptions.register(new Option(\"v\", \"verbose\", \"boolean\", false, \"Verbose\"));\n\t\tprofileOption = shellOptions.register(new Option(\"o\", \"profile\", \"boolean\", false, \"Profile\"));\n\t\treleaseOption = shellOptions.register(new Option(\"r\", \"release\", \"boolean\", false, \"Release mode\"));\n\t\tdeterministicOption = shellOptions.register(new Option(\"det\", \"deterministic\", \"boolean\", false, \"Deterministic execution, with rigged timers and random generator\"));\n\t\tif (!disableBundleSelection) {\n\t\t\tusePlayerClosureBundleOption = shellOptions.register(new Option('b', \"closure-bundle\", \"boolean\", false, \"Use bundled and closure compiled source file for the player.\"));\n\t\t\tusePlayerBundleOption = shellOptions.register(new Option('', \"bundle\", \"boolean\", false, \"Use bundled source file for the player.\"));\n\t\t}\n\t\texecuteOption = shellOptions.register(new Option(\"x\", \"execute\", \"boolean\", false, \"Execute File(s)\"));\n\t\tfreshSecurityDomainOption = shellOptions.register(new Option(\"fsd\", \"freshSecurityDomain\", \"boolean\", false, \"Creates a fresh security domain for each ABC file.\"));\n\t\tprintABCFileNameOption = shellOptions.register(new Option(\"\", \"printABCFileName\", \"boolean\", false, \"Print each ABC filename before running it.\"));\n\t\tinterpreterOption = shellOptions.register(new Option(\"i\", \"interpreter\", \"boolean\", false, \"Interpreter Only\"));\n\t\tsymbolFilterOption = shellOptions.register(new Option(\"f\", \"filter\", \"string\", \"\", \"Symbol Filter\"));\n\t\tmicroTaskDurationOption = shellOptions.register(new Option(\"md\", \"duration\", \"number\", 0, \"Maximum micro task duration.\"));\n\t\tmicroTaskCountOption = shellOptions.register(new Option(\"mc\", \"count\", \"number\", 64 * 1024, \"Maximum micro task count.\"));\n\t\tmaxFrameCountOption = shellOptions.register(new Option(\"fc\", \"frameCount\", \"number\", 0, \"Frame count.\"));\n\t\trepeatOption = shellOptions.register(new Option(\"rp\", \"rp\", \"number\", 1, \"Repeat count.\"));\n\t\tloadPlayerGlobalCatalogOption = shellOptions.register(new Option(\"g\", \"playerGlobal\", \"boolean\", false, \"Load Player Global\"));\n\t\tloadShellLibOption = shellOptions.register(new Option(\"s\", \"shell\", \"boolean\", false, \"Load Shell Global\"));\n\t\tporcelainOutputOption = shellOptions.register(new Option('', \"porcelain\", \"boolean\", false, \"Keeps outputs free from the debug messages.\"));\n\n\t\tfuzzMillOption = shellOptions.register(new Option('', \"fuzz\", \"string\", \"\", \"Generates random SWFs XML.\"));\n\n\t\twritersOption = shellOptions.register(new Option(\"w\", \"writers\", \"string\", \"\", \"Writers Filter [r: runtime, e: execution, i: interpreter]\"));\n\n\t\tlet argumentParser = new ArgumentParser();\n\t\targumentParser.addBoundOptionSet(systemOptions);\n\n\t\tfunction printUsage() {\n\t\t\twriter.enter(\"Shumway Command Line Interface\");\n\t\t\tsystemOptions.trace(writer);\n\t\t\twriter.leave(\"\");\n\t\t}\n\n\t\targumentParser.addArgument(\"h\", \"help\", \"boolean\", {\n\t\t\tparse: function (x: any) {\n\t\t\t\tprintUsage();\n\t\t\t}\n\t\t});\n\n\t\tlet files: Array<any> = [];\n\n\t\t// Try and parse command line arguments.\n\n\t\ttry {\n\t\t\targumentParser.parse(commandLineArguments).filter(function (value: string, index: number, array: Array<any>) {\n\t\t\t\tif (value[0] === \"@\" || value.endsWith(\".abc\") || value.endsWith(\".swf\") || value.endsWith(\".js\") || value.endsWith(\".json\")) {\n\t\t\t\t\tfiles.push(value);\n\t\t\t\t\treturn false;\n\t\t\t\t} else {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t});\n\t\t} catch (x) {\n\t\t\twriter.writeLn(x.message);\n\t\t\tquit();\n\t\t}\n\n\t\tinitializePlayerServices();\n\n\t\tmicroTaskQueue = new Shumway.Shell.MicroTasksQueue();\n\n\t\tif (porcelainOutputOption.value) {\n\t\t\tconsole.info = console.log = console.warn = console.error = function () {\n\t\t\t};\n\t\t\twriter.suppressOutput = true;\n\t\t}\n\n\t\tprofile = profileOption.value;\n\t\trelease = releaseOption.value;\n\t\tverbose = verboseOption.value;\n\n\t\tif (!verbose) {\n\t\t\tIndentingWriter.logLevel = Shumway.LogLevel.Error | Shumway.LogLevel.Warn;\n\t\t}\n\n\t\tif (fuzzMillOption.value) {\n\t\t\tlet fuzzer = new Shumway.Shell.Fuzz.Mill(new IndentingWriter(), fuzzMillOption.value);\n\t\t\tfuzzer.fuzz();\n\t\t}\n\n\t\tShumway.Unit.writer = new IndentingWriter();\n\n\t\tlet writerFlags = WriterFlags.None;\n\t\tif (writersOption.value.indexOf(\"r\") >= 0) {\n\t\t\twriterFlags |= WriterFlags.Runtime;\n\t\t}\n\t\tif (writersOption.value.indexOf(\"e\") >= 0) {\n\t\t\twriterFlags |= WriterFlags.Execution;\n\t\t}\n\t\tif (writersOption.value.indexOf(\"i\") >= 0) {\n\t\t\twriterFlags |= WriterFlags.Interpreter;\n\t\t}\n\t\tShumway.AVMX.setWriters(writerFlags);\n\n\t\tif (compileOption.value) {\n\t\t\tlet buffers: Array<Uint8Array> = [];\n\t\t\tfiles.forEach(function (file) {\n\t\t\t\tlet buffer = new Uint8Array(read(file, \"binary\"));\n\t\t\t\tif (file.endsWith(\".abc\")) {\n\t\t\t\t\tbuffers.push(buffer);\n\t\t\t\t} else if (file.endsWith(\".swf\")) {\n\t\t\t\t\tbuffers.push.apply(buffers, extractABCsFromSWF(buffer));\n\t\t\t\t}\n\t\t\t});\n\t\t\tverbose && writer.writeLn(\"Loading \" + buffers.length + \" ABCs\");\n\t\t\trelease || Shumway.Debug.notImplemented(\"Compile\");\n\t\t\tif (Shumway.AVMX.timelineBuffer) {\n\t\t\t\tShumway.AVMX.timelineBuffer.createSnapshot().trace(new IndentingWriter());\n\t\t\t}\n\t\t}\n\n\t\tif (parseOption.value) {\n\t\t\tfiles.forEach(function (file) {\n\t\t\t\tlet start = Date.now();\n\t\t\t\twriter.debugLn(\"Parsing: \" + file);\n\t\t\t\tprofile && SWF.timelineBuffer.reset();\n\t\t\t\ttry {\n\t\t\t\t\tparsingCounter.clear();\n\t\t\t\t\tparseFile(file, symbolFilterOption.value.split(\",\"));\n\t\t\t\t\tlet elapsed = Date.now() - start;\n\t\t\t\t\tif (verbose) {\n\t\t\t\t\t\twriter.writeLn(\"Total Parse Time: \" + (elapsed).toFixed(2) + \" ms.\");\n\t\t\t\t\t\tprofile && SWF.timelineBuffer.createSnapshot().trace(writer);\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {\n\t\t\t\t\twriter.writeLn(\"EXCEPTED: \" + file);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (executeOption.value) {\n\t\t\tlet shouldLoadPlayerGlobalCatalog = loadPlayerGlobalCatalogOption.value;\n\t\t\tif (!shouldLoadPlayerGlobalCatalog) {\n\t\t\t\t// We need to load player globals if any swfs need to be executed.\n\t\t\t\tfiles.forEach(file => {\n\t\t\t\t\tif (file.endsWith(\".swf\")) {\n\t\t\t\t\t\tshouldLoadPlayerGlobalCatalog = true;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\texecuteFiles(files);\n\t\t} else if (disassembleOption.value) {\n\t\t\tlet sec = createSecurityDomain(builtinABCPath, null, null);\n\t\t\tfiles.forEach(function (file) {\n\t\t\t\tif (file.endsWith(\".abc\")) {\n\t\t\t\t\tdisassembleABCFile(sec, file);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tif (errors) {\n\t\t\tquit(1);\n\t\t}\n\t\tif (Shumway.Unit.everFailed) {\n\t\t\twriter.errorLn('Some unit tests failed');\n\t\t\tquit(1);\n\t\t}\n\t}\n\n\tfunction disassembleABCFile(sec: ISecurityDomain, file: string) {\n\t\ttry {\n\t\t\tlet buffer = read(file, \"binary\");\n\t\t\tlet env = {url: file, app: sec.application};\n\t\t\tlet abc = new ABCFile(env, new Uint8Array(buffer));\n\t\t\t// We need to load the ABCFile in a |sec| because the parser may\n\t\t\t// throw verifier errors.\n\t\t\tsec.application.loadABC(abc);\n\t\t\tabc.trace(writer);\n\t\t} catch (x) {\n\t\t\twriter.redLn('Exception encountered while running ' + file + ': ' + '(' + x + ')');\n\t\t\twriter.redLns(x.stack);\n\t\t\terrors++;\n\t\t}\n\t}\n\n\tfunction executeFiles(files: string []): boolean {\n\t\t// If we're only dealign with .abc files, run them all in the same domain.\n\t\tif (files.every(function (file) {\n\t\t\t\treturn file.endsWith(\".abc\") || file[0] === \"@\";\n\t\t\t})) {\n\t\t\texecuteABCFiles(files);\n\t\t\treturn false;\n\t\t}\n\t\tfiles.forEach(function (file) {\n\t\t\tif (file.endsWith(\".js\")) {\n\t\t\t\texecuteUnitTestFile(file);\n\t\t\t} else if (file.endsWith(\".json\")) {\n\t\t\t\texecuteJSONFile(file);\n\t\t\t} else if (file.endsWith(\".abc\")) {\n\t\t\t\texecuteABCFiles([file]);\n\t\t\t} else if (file.endsWith(\".swf\")) {\n\t\t\t\texecuteSWFFile(file, microTaskDurationOption.value, microTaskCountOption.value, maxFrameCountOption.value);\n\t\t\t}\n\t\t});\n\t\treturn true;\n\t}\n\n\tfunction executeSWFFile(file: string, runDuration: number, runCount: number, frameCount: number) {\n\t\tif (verbose) {\n\t\t\twriter.writeLn(\"executeSWF: \" + file +\n\t\t\t\t\", runDuration: \" + runDuration +\n\t\t\t\t\", runCount: \" + runCount +\n\t\t\t\t\", frameCount: \" + frameCount);\n\t\t}\n\n\t\tfunction runSWF(file: any) {\n\t\t\tmicroTaskQueue.clear();\n\t\t\tif (deterministicOption.value) {\n\t\t\t\tShumway.Random.reset();\n\t\t\t\tShumway.installTimeWarper();\n\t\t\t}\n\n\t\t\tlet sec = createSecurityDomain(builtinABCPath, null, null);\n\t\t\tlet player = new Shumway.Player.Player(sec, new ShellGFXServer());\n\t\t\tlet buffer;\n\t\t\ttry {\n\t\t\t\tbuffer = read(file, 'binary');\n\t\t\t} catch (e) {\n\t\t\t\tconsole.log(\"Error loading SWF: \" + e.message);\n\t\t\t\tquit(127);\n\t\t\t}\n\t\t\tplayer.load(file, buffer);\n\t\t\t// Set a default size for the stage container.\n\t\t\tplayer.stage.setStageContainerSize(512, 512, 1);\n\t\t\treturn player;\n\t\t}\n\n\t\tlet player: any = null;\n\t\tlet asyncLoading = true;\n\t\t// TODO: resolve absolute file path for the base URL.\n\t\t(<any>Shumway.FileLoadingService.instance).setBaseUrl('file://' + file);\n\t\tif (asyncLoading) {\n\t\t\tplayer = runSWF(file);\n\t\t} else {\n\t\t\tplayer = runSWF(read(file, 'binary'));\n\t\t}\n\n\t\ttry {\n\t\t\tlet hash = 0;\n\t\t\tlet lastFramesPlayed = 0;\n\t\t\twriter.writeLn(\"RUNNING:  \" + file);\n\t\t\tmicroTaskQueue.run(runDuration, runCount, true, function () {\n\t\t\t\tif (!frameCount) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\tif (lastFramesPlayed < player.framesPlayed) {\n\t\t\t\t\thash = HashUtilities.mixHash(hash, player.stage.hashCode());\n\t\t\t\t\t// This dumps too much output and is not all that useful, unless you want to debug something.\n\t\t\t\t\t// writer.writeLn(\"Frame: \" + player.framesPlayed + \" HASHCODE: \" + file + \": \" + IntegerUtilities.toHEX(hash));\n\t\t\t\t\t// player.stage.debugTrace(writer);\n\t\t\t\t\tlastFramesPlayed = player.framesPlayed;\n\t\t\t\t}\n\t\t\t\t// Exit if we've executed enough frames.\n\t\t\t\treturn player.framesPlayed <= frameCount;\n\t\t\t});\n\t\t\tif (verbose) {\n\t\t\t\twriter.writeLn(\"executeSWF PASS: \" + file);\n\t\t\t}\n\t\t\twriter.writeLn(\"HASHCODE: \" + file + \": \" + IntegerUtilities.toHEX(hash));\n\t\t} catch (x) {\n\t\t\twriter.redLn('Exception: ' + '(' + x + ')');\n\t\t\twriter.redLns(x.stack);\n\t\t}\n\t}\n\n\tfunction executeJSONFile(file: string) {\n\t\tif (verbose) {\n\t\t\twriter.writeLn(\"executeJSON: \" + file);\n\t\t}\n\t\t// Remove comments\n\t\tlet json = JSON.parse(read(file, \"text\").split(\"\\n\").filter(function (line: string) {\n\t\t\treturn line.trim().indexOf(\"//\") !== 0;\n\t\t}).join(\"\\n\"));\n\n\t\tjson.forEach(function (run: Array<any>, i: number) {\n\t\t\tprintErr(\"Running batch \" + (i + 1) + \" of \" + json.length + \" (\" + run[1].length + \" tests)\");\n\t\t\tlet sec = createSecurityDomain(builtinABCPath, null, null);\n\t\t\t// Run libraries.\n\t\t\trun[0].forEach(function (file: any) {\n\t\t\t\tlet buffer = new Uint8Array(read(file, \"binary\"));\n\t\t\t\tlet env = {url: file, app: sec.application};\n\t\t\t\tlet abc = new ABCFile(env, buffer);\n\t\t\t\tif (verbose) {\n\t\t\t\t\twriter.writeLn(\"executeABC: \" + file);\n\t\t\t\t}\n\t\t\t\tsec.application.loadAndExecuteABC(abc);\n\t\t\t});\n\t\t\t// Run files.\n\t\t\trun[1].forEach(function (file: any) {\n\t\t\t\ttry {\n\t\t\t\t\tif (verbose) {\n\t\t\t\t\t\twriter.writeLn(\"executeABC: \" + file);\n\t\t\t\t\t}\n\t\t\t\t\tlet buffer = new Uint8Array(read(file, \"binary\"));\n\t\t\t\t\tlet env = {url: file, app: sec.application};\n\t\t\t\t\tlet abc = new ABCFile(env, buffer);\n\t\t\t\t\tsec.application.loadABC(abc);\n\t\t\t\t\tlet t = Date.now();\n\t\t\t\t\tsec.application.executeABC(abc);\n\t\t\t\t\tlet e = (Date.now() - t);\n\t\t\t\t\tif (e > 100) {\n\t\t\t\t\t\tprintErr(\"Test: \" + file + \" is very slow (\" + e.toFixed() + \" ms), consider disabling it.\");\n\t\t\t\t\t}\n\t\t\t\t\t//if (verbose) {\n\t\t\t\t\t//  writer.writeLn(\"executeABC PASS: \" + file);\n\t\t\t\t\t//}\n\t\t\t\t} catch (x) {\n\t\t\t\t\t//if (verbose) {\n\t\t\t\t\t//  writer.writeLn(\"executeABC FAIL: \" + file);\n\t\t\t\t\t//}\n\t\t\t\t\twriter.writeLn(\"EXCEPTED: \" + file);\n\t\t\t\t\ttry {\n\t\t\t\t\t\twriter.redLn('Exception: ' + '(' + x + ')');\n\t\t\t\t\t\twriter.redLns(x.stack);\n\t\t\t\t\t} catch (y) {\n\t\t\t\t\t\twriter.writeLn(\"Error printing error.\");\n\t\t\t\t\t}\n\t\t\t\t\terrors++;\n\t\t\t\t}\n\t\t\t\tresetSecurityDomain(sec);\n\t\t\t});\n\t\t});\n\t}\n\n\tfunction resetSecurityDomain(sec: AVMX.AXSecurityDomain) {\n\t\t// Only reset XML settings if AXXML has been initialized.\n\t\tif (sec.AXXML.resetSettings) {\n\t\t\tsec.AXXML.resetSettings();\n\t\t}\n\t}\n\n\tfunction executeABCFiles(files: string []) {\n\t\tlet sec = freshSecurityDomainOption.value ? null : createSecurityDomain(builtinABCPath, null, null);\n\t\tfiles.forEach(function (file) {\n\t\t\tif (file === \"@createSecurityDomain\") {\n\t\t\t\tsec = createSecurityDomain(builtinABCPath, null, null);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (freshSecurityDomainOption.value) {\n\t\t\t\tsec = createSecurityDomain(builtinABCPath, null, null);\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tif (printABCFileNameOption.value) {\n\t\t\t\t\twriter.writeLn(\"::: \" + file + \" :::\");\n\t\t\t\t}\n\t\t\t\tlet buffer = new Uint8Array(read(file, \"binary\"));\n\t\t\t\tlet env = {url: file, app: sec.application};\n\t\t\t\tlet abc = new ABCFile(env, buffer);\n\t\t\t\tsec.application.loadAndExecuteABC(abc);\n\t\t\t\tif (verbose) {\n\t\t\t\t\twriter.writeLn(\"executeABC PASS: \" + file);\n\t\t\t\t}\n\t\t\t} catch (x) {\n\t\t\t\tif (verbose) {\n\t\t\t\t\twriter.writeLn(\"executeABC FAIL: \" + file);\n\t\t\t\t}\n\t\t\t\ttry {\n\t\t\t\t\twriter.redLn('Exception encountered while running ' + file + ': ' + '(' + x + ')');\n\t\t\t\t\twriter.redLns(x.stack);\n\t\t\t\t} catch (y) {\n\t\t\t\t\twriter.writeLn(\"Error printing error.\");\n\t\t\t\t}\n\t\t\t\terrors++;\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction executeUnitTestFile(file: string) {\n\t\tlet sec = createSecurityDomain(builtinABCPath, null, null);\n\t\tShumway.AVMX.AS.installClassLoaders(sec.application, jsGlobal);\n\n\t\t// Make the sec available on the global object for ease of use\n\t\t// in unit tests.\n\t\tjsGlobal.sec = sec;\n\n\t\twriter.writeLn(\"Running test file: \" + file + \" ...\");\n\t\tlet start = Date.now();\n\t\tload(file);\n\t\tlet testCount = 0;\n\t\twhile (unitTests.length) {\n\t\t\tlet test = unitTests.shift();\n\t\t\tlet repeat = 1;\n\t\t\tif (typeof test === \"number\") {\n\t\t\t\trepeat = test;\n\t\t\t\ttest = unitTests.shift();\n\t\t\t}\n\t\t\tif (verbose && test.name) {\n\t\t\t\twriter.writeLn(\"Test: \" + test.name);\n\t\t\t}\n\t\t\ttestCount += repeat;\n\t\t\ttry {\n\t\t\t\tfor (let i = 0; i < repeat; i++) {\n\t\t\t\t\ttest();\n\t\t\t\t}\n\t\t\t} catch (x) {\n\t\t\t\twriter.redLn('Exception encountered while running ' + file + ':' + '(' + x + ')');\n\t\t\t\twriter.redLns(x.stack);\n\t\t\t}\n\t\t}\n\t\twriter.writeLn(\"Executed JS File: \" + file);\n\t\twriter.outdent();\n\t}\n\n\tfunction extractABCsFromSWF(buffer: Uint8Array): Uint8Array [] {\n\t\tlet abcData: Array<Uint8Array> = [];\n\t\ttry {\n\t\t\tlet loadListener: ILoadListener = {\n\t\t\t\tonLoadOpen: function (file: Shumway.SWF.SWFFile) {\n\t\t\t\t\tfor (let i = 0; i < file.abcBlocks.length; i++) {\n\t\t\t\t\t\tlet abcBlock = file.abcBlocks[i];\n\t\t\t\t\t\tabcData.push(abcBlock.data);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonLoadProgress: function (update: LoadProgressUpdate) {\n\t\t\t\t},\n\t\t\t\tonLoadError: function () {\n\t\t\t\t},\n\t\t\t\tonLoadComplete: function () {\n\t\t\t\t},\n\t\t\t\tonNewEagerlyParsedSymbols(dictionaryEntries: SWF.EagerlyParsedDictionaryEntry[], delta: number): Promise<any> {\n\t\t\t\t\treturn Promise.resolve();\n\t\t\t\t},\n\t\t\t\tonImageBytesLoaded() {\n\t\t\t\t}\n\t\t\t};\n\t\t\tlet loader = new Shumway.FileLoader(loadListener, null);\n\t\t\tloader.loadBytes(buffer);\n\t\t} catch (x) {\n\t\t\twriter.redLn(\"Cannot parse SWF, reason: \" + x);\n\t\t\treturn null;\n\t\t}\n\t\treturn abcData;\n\t}\n\n\tlet parsingCounter = new Shumway.Metrics.Counter(true);\n\n\t/**\n\t * Parses file.\n\t */\n\tfunction parseFile(file: string, symbolFilters: string []): boolean {\n\t\tlet fileName = file.replace(/^.*[\\\\\\/]/, '');\n\n\t\tfunction parseABC(buffer: Uint8Array) {\n\t\t\tlet env = {url: fileName, app: null} as any;\n\t\t\tlet abcFile = new ABCFile(env, buffer);\n\t\t\t// abcFile.trace(writer);\n\t\t}\n\n\t\tlet buffers = [];\n\t\tif (file.endsWith(\".swf\")) {\n\t\t\tlet fileNameWithoutExtension = fileName.substr(0, fileName.length - 4);\n\t\t\tlet SWF_TAG_CODE_DO_ABC = SwfTagCode.CODE_DO_ABC;\n\t\t\tlet SWF_TAG_CODE_DO_ABC_ = SwfTagCode.CODE_DO_ABC_DEFINE;\n\t\t\ttry {\n\t\t\t\tlet buffer = read(file, \"binary\");\n\t\t\t\tif (!((buffer[0] === 'Z'.charCodeAt(0) ||\n\t\t\t\t\t\tbuffer[0] === 'F'.charCodeAt(0) ||\n\t\t\t\t\t\tbuffer[0] === 'C'.charCodeAt(0)) &&\n\t\t\t\t\t\tbuffer[1] === 'W'.charCodeAt(0) &&\n\t\t\t\t\t\tbuffer[2] === 'S'.charCodeAt(0))) {\n\t\t\t\t\twriter.redLn(\"Cannot parse: \" + file + \" because it doesn't have a valid header. \" + buffer[0] + \" \" + buffer[1] + \" \" + buffer[2]);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tlet startSWF = Date.now();\n\t\t\t\tlet swfFile: Shumway.SWF.SWFFile;\n\t\t\t\tlet loadListener: ILoadListener = {\n\t\t\t\t\tonLoadOpen: function (swfFile: any) {\n\t\t\t\t\t\tif (scanParseOption.value) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (swfFile && swfFile.abcBlocks) {\n\t\t\t\t\t\t\tfor (let i = 0; i < swfFile.abcBlocks.length; i++) {\n\t\t\t\t\t\t\t\tparseABC(swfFile.abcBlocks[i].data);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (swfFile instanceof Shumway.SWF.SWFFile) {\n\t\t\t\t\t\t\tlet dictionary = swfFile.dictionary;\n\t\t\t\t\t\t\tfor (let i = 0; i < dictionary.length; i++) {\n\t\t\t\t\t\t\t\tif (dictionary[i]) {\n\t\t\t\t\t\t\t\t\tlet s = performance.now();\n\t\t\t\t\t\t\t\t\tlet symbol = swfFile.getSymbol(dictionary[i].id);\n\t\t\t\t\t\t\t\t\tparsingCounter.count(symbol.type, performance.now() - s);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (swfFile instanceof Shumway.ImageFile) {\n\t\t\t\t\t\t\t// ...\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tonLoadProgress: function (update: LoadProgressUpdate) {\n\t\t\t\t\t},\n\t\t\t\t\tonLoadError: function () {\n\t\t\t\t\t},\n\t\t\t\t\tonLoadComplete: function () {\n\t\t\t\t\t\twriter.redLn(\"Load complete:\");\n\t\t\t\t\t},\n\t\t\t\t\tonNewEagerlyParsedSymbols(dictionaryEntries: SWF.EagerlyParsedDictionaryEntry[],\n\t\t\t\t\t                          delta: number): Promise<any> {\n\t\t\t\t\t\treturn Promise.resolve();\n\t\t\t\t\t},\n\t\t\t\t\tonImageBytesLoaded() {\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tlet loader = new Shumway.FileLoader(loadListener, null);\n\t\t\t\tloader.loadBytes(buffer);\n\t\t\t} catch (x) {\n\t\t\t\twriter.redLn(\"Cannot parse: \" + file + \", reason: \" + x);\n\t\t\t\tif (verbose) {\n\t\t\t\t\twriter.redLns(x.stack);\n\t\t\t\t}\n\t\t\t\terrors++;\n\t\t\t\treturn false;\n\t\t\t}\n\t\t} else if (file.endsWith(\".abc\")) {\n\t\t\tparseABC(new Uint8Array(read(file, \"binary\")));\n\t\t}\n\t\treturn true;\n\t}\n\n\tfunction createSecurityDomain(builtinABCPath: string, shellABCPath: string, libraryPathInfo: any): ISecurityDomain {\n\t\tlet buffer = read(builtinABCPath, 'binary');\n\t\tlet sec = <ISecurityDomain>new AVMX.AXSecurityDomain();\n\t\tlet env = {url: builtinABCPath, app: sec.system};\n\t\tlet builtinABC = new ABCFile(env, new Uint8Array(buffer));\n\t\tsec.system.loadABC(builtinABC);\n\t\tsec.addCatalog(loadPlayerGlobalCatalog(sec.system));\n\t\tsec.initialize();\n\t\tsec.system.executeABC(builtinABC);\n\t\treturn sec;\n\t}\n\n\tfunction loadPlayerGlobalCatalog(app: AVMX.AXApplicationDomain): AVMX.ABCCatalog {\n\t\tlet abcs = read(playerglobalInfo.abcs, 'binary');\n\t\tlet index = JSON.parse(read(playerglobalInfo.catalog));\n\t\treturn new AVMX.ABCCatalog(app, abcs, index);\n\t}\n}\n\nShumway.Shell.main(commandLineArguments);\n","///<reference path='domstubs.ts' />\n///<reference path='module.ts' />\n///<reference path='unit.ts' />\n///<reference path='fuzz.ts' />\n///<reference path='microTaskQueue.ts' />\n///<reference path='playerservices.ts' />\n///<reference path='shell.ts' />"]}