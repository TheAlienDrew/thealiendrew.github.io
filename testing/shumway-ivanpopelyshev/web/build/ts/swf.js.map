{"version":3,"file":"swf.js","sourceRoot":"","sources":["../../src/swf/parser/module.ts","../../src/swf/parser/bitmap.ts","../../src/swf/parser/button.ts","../../src/swf/parser/font.ts","../../src/swf/parser/image.ts","../../src/swf/parser/label.ts","../../src/swf/parser/shape.ts","../../src/swf/parser/sound.ts","../../src/swf/parser/text.ts","../../src/swf/parser/references.ts","../../src/swf/module.ts","../../src/swf/settings.ts","../../src/swf/stream.ts","../../src/swf/mp3decodersession.ts","../../src/swf/SWFFile.ts","../../src/swf/ImageFile.ts","../../src/swf/FileLoader.ts","../../src/swf/references.ts"],"names":[],"mappings":"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","sourcesContent":["/*\n * Copyright 2015 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/// <reference path='references.ts'/>\nmodule Shumway.SWF.Parser.LowLevel {\n\tfunction parseBbox(stream: Stream): Bbox {\n\t\tstream.align();\n\t\tlet bits = stream.readUb(5);\n\t\tlet xMin = stream.readSb(bits);\n\t\tlet xMax = stream.readSb(bits);\n\t\tlet yMin = stream.readSb(bits);\n\t\tlet yMax = stream.readSb(bits);\n\t\tstream.align();\n\t\treturn <Bbox>{xMin: xMin, xMax: xMax, yMin: yMin, yMax: yMax};\n\t}\n\n\texport function parseRgb(stream: Stream): number {\n\t\treturn ((stream.readUi8() << 24) | (stream.readUi8() << 16) |\n\t\t\t(stream.readUi8() << 8) | 0xff) >>> 0;\n\t}\n\n\tfunction parseRgba(stream: Stream): number {\n\t\treturn (stream.readUi8() << 24) | (stream.readUi8() << 16) |\n\t\t\t(stream.readUi8() << 8) | stream.readUi8();\n\t}\n\n\tfunction parseArgb(stream: Stream): number {\n\t\treturn stream.readUi8() | (stream.readUi8() << 24) |\n\t\t\t(stream.readUi8() << 16) | (stream.readUi8() << 8);\n\t}\n\n\tfunction parseMatrix(stream: Stream): Matrix {\n\t\tlet matrix: Matrix = {a: 1, b: 0, c: 0, d: 1, tx: 0, ty: 0};\n\t\tstream.align();\n\t\tlet hasScale = stream.readUb(1);\n\t\tif (hasScale) {\n\t\t\tlet bits = stream.readUb(5);\n\t\t\tmatrix.a = stream.readFb(bits);\n\t\t\tmatrix.d = stream.readFb(bits);\n\t\t}\n\t\tlet hasRotate = stream.readUb(1);\n\t\tif (hasRotate) {\n\t\t\tlet bits = stream.readUb(5);\n\t\t\tmatrix.b = stream.readFb(bits);\n\t\t\tmatrix.c = stream.readFb(bits);\n\t\t}\n\t\tlet bits = stream.readUb(5);\n\t\tmatrix.tx = stream.readSb(bits);\n\t\tmatrix.ty = stream.readSb(bits);\n\t\tstream.align();\n\t\treturn matrix;\n\t}\n\n\tfunction parseColorTransform(stream: Stream, hasAlpha: boolean): ColorTransform {\n\t\tlet cxform: ColorTransform = {\n\t\t\tredMultiplier: 0xff,\n\t\t\tgreenMultiplier: 0xff,\n\t\t\tblueMultiplier: 0xff,\n\t\t\talphaMultiplier: 0xff,\n\t\t\tredOffset: 0,\n\t\t\tgreenOffset: 0,\n\t\t\tblueOffset: 0,\n\t\t\talphaOffset: 0,\n\t\t};\n\t\tstream.align();\n\t\tlet hasOffsets = stream.readUb(1);\n\t\tlet hasMultipliers = stream.readUb(1);\n\t\tlet bits = stream.readUb(4);\n\t\tif (hasMultipliers) {\n\t\t\tcxform.redMultiplier = stream.readSb(bits);\n\t\t\tcxform.greenMultiplier = stream.readSb(bits);\n\t\t\tcxform.blueMultiplier = stream.readSb(bits);\n\t\t\tif (hasAlpha) {\n\t\t\t\tcxform.alphaMultiplier = stream.readSb(bits);\n\t\t\t}\n\t\t}\n\t\tif (hasOffsets) {\n\t\t\tcxform.redOffset = stream.readSb(bits);\n\t\t\tcxform.greenOffset = stream.readSb(bits);\n\t\t\tcxform.blueOffset = stream.readSb(bits);\n\t\t\tif (hasAlpha) {\n\t\t\t\tcxform.alphaOffset = stream.readSb(bits);\n\t\t\t}\n\t\t}\n\t\tstream.align();\n\t\treturn cxform;\n\t}\n\n\tfunction parsePlaceObjectTag(stream: Stream, swfVersion: number, tagCode: number,\n\t                             tagEnd: number): PlaceObjectTag {\n\t\tlet tag: PlaceObjectTag = <any>{code: tagCode};\n\t\ttag.actionBlocksPrecedence = stream.pos;\n\t\tif (tagCode === SwfTagCode.CODE_PLACE_OBJECT) {\n\t\t\ttag.symbolId = stream.readUi16();\n\t\t\ttag.depth = stream.readUi16();\n\t\t\ttag.flags |= PlaceObjectFlags.HasMatrix;\n\t\t\ttag.matrix = parseMatrix(stream);\n\t\t\tif (stream.pos < tagEnd) {\n\t\t\t\ttag.flags |= PlaceObjectFlags.HasColorTransform;\n\t\t\t\ttag.cxform = parseColorTransform(stream, false);\n\t\t\t}\n\t\t\treturn tag;\n\t\t}\n\t\tlet flags = tag.flags = tagCode > SwfTagCode.CODE_PLACE_OBJECT2 ?\n\t\t\tstream.readUi16() :\n\t\t\tstream.readUi8();\n\t\ttag.depth = stream.readUi16();\n\t\tif (flags & PlaceObjectFlags.HasClassName) {\n\t\t\ttag.className = stream.readString(-1);\n\t\t}\n\t\tif (flags & PlaceObjectFlags.HasCharacter) {\n\t\t\ttag.symbolId = stream.readUi16();\n\t\t}\n\t\tif (flags & PlaceObjectFlags.HasMatrix) {\n\t\t\ttag.matrix = parseMatrix(stream);\n\t\t}\n\t\tif (flags & PlaceObjectFlags.HasColorTransform) {\n\t\t\ttag.cxform = parseColorTransform(stream, true);\n\t\t}\n\t\tif (flags & PlaceObjectFlags.HasRatio) {\n\t\t\ttag.ratio = stream.readUi16();\n\t\t}\n\t\tif (flags & PlaceObjectFlags.HasName) {\n\t\t\ttag.name = stream.readString(-1);\n\t\t}\n\t\tif (flags & PlaceObjectFlags.HasClipDepth) {\n\t\t\ttag.clipDepth = stream.readUi16();\n\t\t}\n\t\tif (flags & PlaceObjectFlags.HasFilterList) {\n\t\t\tlet count = stream.readUi8();\n\t\t\tlet filters: Filter[] = tag.filters = [];\n\t\t\twhile (count--) {\n\t\t\t\tfilters.push(parseFilter(stream));\n\t\t\t}\n\t\t}\n\t\tif (flags & PlaceObjectFlags.HasBlendMode) {\n\t\t\ttag.blendMode = stream.readUi8();\n\t\t}\n\t\tif (flags & PlaceObjectFlags.HasCacheAsBitmap) {\n\t\t\ttag.bmpCache = stream.readUi8();\n\t\t}\n\t\tif (flags & PlaceObjectFlags.HasVisible) {\n\t\t\ttag.visibility = stream.readBool();\n\t\t}\n\t\tif (flags & PlaceObjectFlags.OpaqueBackground) {\n\t\t\ttag.backgroundColor = parseArgb(stream);\n\t\t}\n\t\tif (flags & PlaceObjectFlags.HasClipActions) {\n\t\t\tlet reserved = stream.readUi16();\n\t\t\tlet allFlags = swfVersion >= 6 ? stream.readUi32() : stream.readUi16();\n\t\t\tlet allEvents: ClipEvents[] = tag.events = [];\n\t\t\tlet events: ClipEvents;\n\t\t\twhile (events = parseEvents(stream, swfVersion)) {\n\t\t\t\tif (stream.pos > tagEnd) {\n\t\t\t\t\tDebug.warning('PlaceObject handler attempted to read clip events beyond tag end');\n\t\t\t\t\tstream.pos = tagEnd;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tallEvents.push(events);\n\t\t\t}\n\t\t\t;\n\t\t}\n\t\treturn tag;\n\t}\n\n\tfunction parseEvents(stream: Stream, swfVersion: number): ClipEvents {\n\t\tlet flags = swfVersion >= 6 ? stream.readUi32() : stream.readUi16();\n\t\tif (!flags) {\n\t\t\t// `true` means this is the EndOfEvents marker.\n\t\t\treturn null;\n\t\t}\n\t\tlet events: ClipEvents = <any>{};\n\t\t// The Construct event is only allowed in 7+. It can't be set in < 6, so mask it out for 6.\n\t\tif (swfVersion === 6) {\n\t\t\tflags = flags & ~AVM1ClipEvents.Construct;\n\t\t}\n\t\tevents.flags = flags;\n\t\tlet length = stream.readUi32();\n\t\tif (flags & AVM1ClipEvents.KeyPress) {\n\t\t\tevents.keyCode = stream.readUi8();\n\t\t\tlength--;\n\t\t}\n\t\tlet end = stream.pos + length;\n\t\tevents.actionsBlock = stream.bytes.subarray(stream.pos, end);\n\t\tstream.pos = end;\n\t\treturn events;\n\t}\n\n\tfunction parseFilter(stream: Stream): Filter {\n\t\tlet filter: Filter = <any>{};\n\t\tlet type = filter.type = stream.readUi8();\n\t\tlet matrix: Array<number>;\n\t\tlet i;\n\t\tswitch (type) {\n\t\t\tcase 0:\n\t\t\tcase 2:\n\t\t\tcase 3:\n\t\t\tcase 4:\n\t\t\tcase 7:\n\t\t\t\tlet glow = <GlowFilter>filter;\n\t\t\t\tlet count: number;\n\t\t\t\tif (type === 4 || type === 7) {\n\t\t\t\t\tcount = stream.readUi8();\n\t\t\t\t} else {\n\t\t\t\t\tcount = type === 3 ? 2 : 1;\n\t\t\t\t}\n\t\t\t\tlet colors: number[] = glow.colors = [];\n\t\t\t\ti = count;\n\t\t\t\twhile (i--) {\n\t\t\t\t\tcolors.push(parseRgba(stream));\n\t\t\t\t}\n\t\t\t\tif (type === 4 || type === 7) {\n\t\t\t\t\tlet ratios: number[] = glow.ratios = [];\n\t\t\t\t\ti = count;\n\t\t\t\t\twhile (i--) {\n\t\t\t\t\t\tratios.push(stream.readUi8());\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tglow.blurX = stream.readFixed();\n\t\t\t\tglow.blurY = stream.readFixed();\n\t\t\t\tif (type !== 2) {\n\t\t\t\t\tglow.angle = stream.readFixed();\n\t\t\t\t\tglow.distance = stream.readFixed();\n\t\t\t\t}\n\t\t\t\tglow.strength = stream.readFixed8();\n\t\t\t\tglow.inner = !!stream.readUb(1);\n\t\t\t\tglow.knockout = !!stream.readUb(1);\n\t\t\t\tglow.compositeSource = !!stream.readUb(1);\n\t\t\t\tif (type === 3 || type === 4 || type === 7) {\n\t\t\t\t\tglow.onTop = !!stream.readUb(1);\n\t\t\t\t\tglow.quality = stream.readUb(4);\n\t\t\t\t} else {\n\t\t\t\t\tglow.quality = stream.readUb(5);\n\t\t\t\t}\n\t\t\t\treturn glow;\n\t\t\tcase 1:\n\t\t\t\tlet blur = <BlurFilter>filter;\n\t\t\t\tblur.blurX = stream.readFixed();\n\t\t\t\tblur.blurY = stream.readFixed();\n\t\t\t\tblur.quality = stream.readUb(5);\n\t\t\t\tstream.readUb(3);\n\t\t\t\treturn blur;\n\t\t\tcase 5:\n\t\t\t\tlet conv = <ConvolutionFilter>filter;\n\t\t\t\tlet matrixX = conv.matrixX = stream.readUi8();\n\t\t\t\tlet matrixY = conv.matrixY = stream.readUi8();\n\t\t\t\tconv.divisor = stream.readFloat();\n\t\t\t\tconv.bias = stream.readFloat();\n\t\t\t\tmatrix = conv.matrix = [];\n\t\t\t\ti = matrixX * matrixY;\n\t\t\t\twhile (i--) {\n\t\t\t\t\tmatrix.push(stream.readFloat());\n\t\t\t\t}\n\t\t\t\tconv.color = parseRgba(stream);\n\t\t\t\tlet reserved = stream.readUb(6);\n\t\t\t\tconv.clamp = !!stream.readUb(1);\n\t\t\t\tconv.preserveAlpha = !!stream.readUb(1);\n\t\t\t\treturn conv;\n\t\t\tcase 6:\n\t\t\t\tlet cm = <ColorMatrixFilter>filter;\n\t\t\t\tmatrix = cm.matrix = [];\n\t\t\t\ti = 20;\n\t\t\t\twhile (i--) {\n\t\t\t\t\tmatrix.push(stream.readFloat());\n\t\t\t\t}\n\t\t\t\treturn cm;\n\t\t\tdefault:\n\t\t}\n\t\treturn filter;\n\t}\n\n\tfunction parseRemoveObjectTag(stream: Stream, swfVersion: number,\n\t                              tagCode: number): RemoveObjectTag {\n\t\tlet tag: RemoveObjectTag = <any>{code: tagCode};\n\t\tif (tagCode === SwfTagCode.CODE_REMOVE_OBJECT) {\n\t\t\ttag.depth = stream.readUi16();\n\t\t\ttag.symbolId = stream.readUi16();\n\t\t} else {\n\t\t\ttag.depth = stream.readUi16();\n\t\t}\n\t\treturn tag;\n\t}\n\n\texport function parseDefineImageTag(stream: Stream, swfVersion: number, tagCode: number,\n\t                                    tagEnd: number, jpegTables: Uint8Array): ImageTag {\n\t\tlet tag: ImageTag = <any>{code: tagCode};\n\t\ttag.id = stream.readUi16();\n\t\tlet imgData: Uint8Array;\n\t\tif (tagCode > SwfTagCode.CODE_DEFINE_BITS_JPEG2) {\n\t\t\tlet alphaDataOffset = stream.readUi32();\n\t\t\tif (tagCode === SwfTagCode.CODE_DEFINE_BITS_JPEG4) {\n\t\t\t\ttag.deblock = stream.readFixed8();\n\t\t\t}\n\t\t\talphaDataOffset += stream.pos;\n\t\t\timgData = tag.imgData = stream.bytes.subarray(stream.pos, alphaDataOffset);\n\t\t\ttag.alphaData = stream.bytes.subarray(alphaDataOffset, tagEnd);\n\t\t\tstream.pos = tagEnd;\n\t\t} else {\n\t\t\timgData = tag.imgData = stream.bytes.subarray(stream.pos, tagEnd);\n\t\t\tstream.pos = tagEnd;\n\t\t}\n\t\tswitch (imgData[0] << 8 | imgData[1]) {\n\t\t\tcase 65496:\n\t\t\tcase 65497:\n\t\t\t\ttag.mimeType = \"image/jpeg\";\n\t\t\t\tbreak;\n\t\t\tcase 35152:\n\t\t\t\ttag.mimeType = \"image/png\";\n\t\t\t\tbreak;\n\t\t\tcase 18249:\n\t\t\t\ttag.mimeType = \"image/gif\";\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\ttag.mimeType = \"application/octet-stream\";\n\t\t}\n\t\tif (tagCode === SwfTagCode.CODE_DEFINE_BITS) {\n\t\t\ttag.jpegTables = {data: jpegTables};\n\t\t}\n\t\treturn tag;\n\t}\n\n\tfunction parseDefineButtonTag(stream: Stream, swfVersion: number, tagCode: number,\n\t                              tagEnd: number): ButtonTag {\n\t\tlet tag: ButtonTag = <any>{code: tagCode};\n\t\ttag.id = stream.readUi16();\n\t\tlet characters: ButtonCharacter[] = tag.characters = [];\n\t\tlet character: ButtonCharacter;\n\t\tif (tagCode == SwfTagCode.CODE_DEFINE_BUTTON) {\n\t\t\twhile (character = parseButtonCharacter(stream, swfVersion, tagCode)) {\n\t\t\t\tcharacters.push(character);\n\t\t\t}\n\t\t\ttag.actionsData = stream.bytes.subarray(stream.pos, tagEnd);\n\t\t\tstream.pos = tagEnd;\n\t\t} else {\n\t\t\tlet trackFlags = stream.readUi8();\n\t\t\ttag.trackAsMenu = !!(trackFlags >> 7 & 1);\n\t\t\tlet actionOffset = stream.readUi16();\n\t\t\twhile (character = parseButtonCharacter(stream, swfVersion, tagCode)) {\n\t\t\t\tcharacters.push(character);\n\t\t\t}\n\t\t\t;\n\t\t\tif (!!actionOffset) {\n\t\t\t\tlet buttonActions: Array<any> = tag.buttonActions = [];\n\t\t\t\twhile (stream.pos < tagEnd) {\n\t\t\t\t\tlet action = parseButtonCondAction(stream, tagEnd);\n\t\t\t\t\t// Ignore actions that exceed the tag length.\n\t\t\t\t\tif (stream.pos > tagEnd) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tbuttonActions.push(action);\n\t\t\t\t}\n\t\t\t\tstream.pos = tagEnd;\n\t\t\t}\n\t\t}\n\t\treturn tag;\n\t}\n\n\tfunction parseButtonCharacter(stream: Stream, swfVersion: number,\n\t                              tagCode: number): ButtonCharacter {\n\t\tlet flags = stream.readUi8();\n\t\tif (!flags) {\n\t\t\treturn null;\n\t\t}\n\t\tlet character: ButtonCharacter = <any>{};\n\t\tif (swfVersion < 8) {\n\t\t\t// Clear HasBlendMode and HasFilterList flags.\n\t\t\tflags &= ~(PlaceObjectFlags.HasBlendMode | PlaceObjectFlags.HasFilterList);\n\t\t}\n\t\tcharacter.flags = flags;\n\t\tcharacter.symbolId = stream.readUi16();\n\t\tcharacter.depth = stream.readUi16();\n\t\tcharacter.matrix = parseMatrix(stream);\n\t\tif (tagCode === SwfTagCode.CODE_DEFINE_BUTTON2) {\n\t\t\tcharacter.cxform = parseColorTransform(stream, true);\n\t\t}\n\t\tif (character.flags & ButtonCharacterFlags.HasFilterList) {\n\t\t\tlet count = stream.readUi8();\n\t\t\tlet filters: Filter[] = character.filters = [];\n\t\t\tlet i = count;\n\t\t\twhile (i--) {\n\t\t\t\tfilters.push(parseFilter(stream));\n\t\t\t}\n\t\t}\n\t\tif (character.flags & ButtonCharacterFlags.HasBlendMode) {\n\t\t\tcharacter.blendMode = stream.readUi8();\n\t\t}\n\t\treturn character;\n\t}\n\n\tfunction parseButtonCondAction(stream: Stream, tagEnd: number): ButtonCondAction {\n\t\tlet start = stream.pos;\n\t\tlet tagSize = stream.readUi16();\n\t\t// If no tagSize is given, read to the tag's end.\n\t\tlet end = tagSize ? start + tagSize : tagEnd;\n\t\tlet conditions = stream.readUi16();\n\t\tstream.pos = end;\n\t\treturn <ButtonCondAction>{\n\t\t\t// The 7 upper bits hold a key code the button should respond to.\n\t\t\tkeyCode: (conditions & 0xfe00) >> 9,\n\t\t\t// The lower 9 bits hold state transition flags. See the enum in AVM1Button for details.\n\t\t\tstateTransitionFlags: conditions & 0x1ff,\n\t\t\t// If no tagSize is given, pass `0` to readBinary.\n\t\t\tactionsData: stream.bytes.subarray(start + 4, end)\n\t\t};\n\t}\n\n\tfunction parseDefineBinaryDataTag(stream: Stream, swfVersion: number,\n\t                                  tagCode: number, tagEnd: number): BinaryDataTag {\n\t\tlet tag: BinaryDataTag = <any>{code: tagCode};\n\t\ttag.id = stream.readUi16();\n\t\tstream.pos += 4; // Reserved\n\t\ttag.data = stream.bytes.subarray(stream.pos, tagEnd);\n\t\tstream.pos = tagEnd;\n\t\treturn tag;\n\t}\n\n\texport function parseDefineFontTag(stream: Stream, swfVersion: number,\n\t                                   tagCode: number): FontTag {\n\t\tlet tag: FontTag = <any>{code: tagCode};\n\t\ttag.id = stream.readUi16();\n\t\tlet firstOffset = stream.readUi16();\n\t\tlet glyphCount = firstOffset / 2;\n\t\tlet restOffsets: number[] = [];\n\t\tlet i = glyphCount - 1;\n\t\twhile (i--) {\n\t\t\trestOffsets.push(stream.readUi16());\n\t\t}\n\t\ttag.offsets = [firstOffset].concat(restOffsets);\n\t\tlet glyphs: Glyph[] = tag.glyphs = [];\n\t\ti = glyphCount;\n\t\twhile (i--) {\n\t\t\tglyphs.push(parseGlyph(stream, swfVersion, tagCode));\n\t\t}\n\t\treturn tag;\n\t}\n\n\tfunction parseGlyph(stream: Stream, swfVersion: number, tagCode: number): Glyph {\n\t\tstream.align();\n\t\tlet fillBits = stream.readUb(4);\n\t\tlet lineBits = stream.readUb(4);\n\t\treturn parseShapeRecords(stream, swfVersion, tagCode, false, fillBits, lineBits, false);\n\t}\n\n\tfunction parseDefineTextTag(stream: Stream, swfVersion: number, tagCode: number): StaticTextTag {\n\t\tlet tag: StaticTextTag = <any>{code: tagCode};\n\t\ttag.id = stream.readUi16();\n\t\ttag.bbox = parseBbox(stream);\n\t\ttag.matrix = parseMatrix(stream);\n\t\tlet glyphBits = stream.readUi8();\n\t\tlet advanceBits = stream.readUi8();\n\t\tlet records: TextRecord[] = tag.records = [];\n\t\tlet record: TextRecord;\n\t\twhile (record = parseTextRecord(stream, swfVersion, tagCode, glyphBits, advanceBits)) {\n\t\t\trecords.push(record);\n\t\t}\n\t\treturn tag;\n\t}\n\n\tfunction parseTextRecord(stream: Stream, swfVersion: number, tagCode: number, glyphBits: number,\n\t                         advanceBits: number): TextRecord {\n\t\tstream.align();\n\t\tlet flags = stream.readUb(8);\n\t\tif (!flags) {\n\t\t\treturn null;\n\t\t}\n\t\tlet record: TextRecord = <any>{};\n\t\trecord.flags = flags;\n\t\tif (flags & TextRecordFlags.HasFont) {\n\t\t\trecord.fontId = stream.readUi16();\n\t\t}\n\t\tif (flags & TextRecordFlags.HasColor) {\n\t\t\trecord.color = tagCode === SwfTagCode.CODE_DEFINE_TEXT2 ?\n\t\t\t\tparseRgba(stream) :\n\t\t\t\tparseRgb(stream);\n\t\t}\n\t\tif (flags & TextRecordFlags.HasMoveX) {\n\t\t\trecord.moveX = stream.readSi16();\n\t\t}\n\t\tif (flags & TextRecordFlags.HasMoveY) {\n\t\t\trecord.moveY = stream.readSi16();\n\t\t}\n\t\tif (flags & TextRecordFlags.HasFont) {\n\t\t\trecord.fontHeight = stream.readUi16();\n\t\t}\n\t\tlet glyphCount = stream.readUi8();\n\t\tif (swfVersion <= 6) {\n\t\t\tglyphCount = glyphCount; // & 0x7f ???;\n\t\t}\n\t\tlet entries: TextEntry[] = record.entries = [];\n\t\tlet i = glyphCount;\n\t\twhile (i--) {\n\t\t\tentries.push({\n\t\t\t\tglyphIndex: stream.readUb(glyphBits),\n\t\t\t\tadvance: stream.readSb(advanceBits)\n\t\t\t});\n\t\t}\n\t\treturn record;\n\t}\n\n\tfunction parseDefineSoundTag(stream: Stream, swfVersion: number, tagCode: number,\n\t                             tagEnd: number): SoundTag {\n\t\tlet tag: SoundTag = <any>{code: tagCode};\n\t\ttag.id = stream.readUi16();\n\t\tlet soundFlags = stream.readUi8();\n\t\ttag.soundFormat = soundFlags >> 4 & 15;\n\t\ttag.soundRate = soundFlags >> 2 & 3;\n\t\ttag.soundSize = soundFlags >> 1 & 1;\n\t\ttag.soundType = soundFlags & 1;\n\t\ttag.samplesCount = stream.readUi32();\n\t\ttag.soundData = stream.bytes.subarray(stream.pos, tagEnd);\n\t\tstream.pos = tagEnd;\n\t\treturn tag;\n\t}\n\n\tfunction parseStartSoundTag(stream: Stream, swfVersion: number,\n\t                            tagCode: number): StartSoundTag {\n\t\tlet tag: StartSoundTag = <any>{code: tagCode};\n\t\tif (tagCode == SwfTagCode.CODE_START_SOUND) {\n\t\t\ttag.soundId = stream.readUi16();\n\t\t}\n\t\tif (tagCode == SwfTagCode.CODE_START_SOUND2) {\n\t\t\ttag.soundClassName = stream.readString(-1);\n\t\t}\n\t\ttag.soundInfo = parseSoundInfo(stream);\n\t\treturn tag;\n\t}\n\n\tfunction parseSoundInfo(stream: Stream): SoundInfo {\n\t\tlet info: SoundInfo = <any>{};\n\t\tlet flags = info.flags = stream.readUi8();\n\t\tif (flags & SoundInfoFlags.HasInPoint) {\n\t\t\tinfo.inPoint = stream.readUi32();\n\t\t}\n\t\tif (flags & SoundInfoFlags.HasOutPoint) {\n\t\t\tinfo.outPoint = stream.readUi32();\n\t\t}\n\t\tif (flags & SoundInfoFlags.HasLoops) {\n\t\t\tinfo.loopCount = stream.readUi16();\n\t\t}\n\t\tif (flags & SoundInfoFlags.HasEnvelope) {\n\t\t\tlet envelopeCount = stream.readUi8();\n\t\t\tlet envelopes: SoundEnvelope[] = info.envelopes = [];\n\t\t\tlet i = envelopeCount;\n\t\t\twhile (i--) {\n\t\t\t\tenvelopes.push({\n\t\t\t\t\tpos44: stream.readUi32(),\n\t\t\t\t\tvolumeLeft: stream.readUi16(),\n\t\t\t\t\tvolumeRight: stream.readUi16()\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\treturn info;\n\t}\n\n\texport function parseSoundStreamHeadTag(stream: Stream, tagEnd: number): SoundStreamHeadTag {\n\t\tlet tag: SoundStreamHeadTag = <any>{};\n\t\tlet playbackFlags = stream.readUi8();\n\t\ttag.playbackRate = playbackFlags >> 2 & 3;\n\t\ttag.playbackSize = playbackFlags >> 1 & 1;\n\t\ttag.playbackType = playbackFlags & 1;\n\t\tlet streamFlags = stream.readUi8();\n\t\tlet streamCompression = tag.streamCompression = streamFlags >> 4 & 15;\n\t\ttag.streamRate = streamFlags >> 2 & 3;\n\t\ttag.streamSize = streamFlags >> 1 & 1;\n\t\ttag.streamType = streamFlags & 1;\n\t\ttag.samplesCount = stream.readUi16();\n\t\tif (streamCompression == 2 && tagEnd - stream.pos >= 2) {\n\t\t\ttag.latencySeek = stream.readSi16();\n\t\t}\n\t\treturn tag\n\t}\n\n\texport function parseDefineBitmapTag(stream: Stream, swfVersion: number, tagCode: number,\n\t                                     tagEnd: number): BitmapTag {\n\t\tlet tag: BitmapTag = <any>{code: tagCode};\n\t\ttag.id = stream.readUi16();\n\t\tlet format = tag.format = stream.readUi8();\n\t\ttag.width = stream.readUi16();\n\t\ttag.height = stream.readUi16();\n\t\ttag.hasAlpha = tagCode === SwfTagCode.CODE_DEFINE_BITS_LOSSLESS2;\n\t\tif (format === 3) {\n\t\t\ttag.colorTableSize = stream.readUi8();\n\t\t}\n\t\ttag.bmpData = stream.bytes.subarray(stream.pos, tagEnd);\n\t\tstream.pos = tagEnd;\n\t\treturn tag;\n\t}\n\n\tfunction parseDefineEditTextTag(stream: Stream, swfVersion: number, tagCode: number): TextTag {\n\t\tlet tag: TextTag = <any>{code: tagCode};\n\t\ttag.id = stream.readUi16();\n\t\ttag.bbox = parseBbox(stream);\n\t\tlet flags = tag.flags = stream.readUi16();\n\t\tif (flags & TextFlags.HasFont) {\n\t\t\ttag.fontId = stream.readUi16();\n\t\t}\n\t\tif (flags & TextFlags.HasFontClass) {\n\t\t\ttag.fontClass = stream.readString(-1);\n\t\t}\n\t\tif (flags & TextFlags.HasFont) {\n\t\t\ttag.fontHeight = stream.readUi16();\n\t\t}\n\t\tif (flags & TextFlags.HasColor) {\n\t\t\ttag.color = parseRgba(stream);\n\t\t}\n\t\tif (flags & TextFlags.HasMaxLength) {\n\t\t\ttag.maxLength = stream.readUi16();\n\t\t}\n\t\tif (flags & TextFlags.HasLayout) {\n\t\t\ttag.align = stream.readUi8();\n\t\t\ttag.leftMargin = stream.readUi16();\n\t\t\ttag.rightMargin = stream.readUi16();\n\t\t\ttag.indent = stream.readSi16();\n\t\t\ttag.leading = stream.readSi16();\n\t\t}\n\t\ttag.variableName = stream.readString(-1);\n\t\tif (flags & TextFlags.HasText) {\n\t\t\ttag.initialText = stream.readString(-1);\n\t\t}\n\t\treturn tag;\n\t}\n\n\texport function parseDefineFont2Tag(stream: Stream, swfVersion: number, tagCode: number,\n\t                                    tagEnd: number): FontTag {\n\t\tlet tag: FontTag = <any>{code: tagCode};\n\t\ttag.id = stream.readUi16();\n\t\tlet flags = tag.flags = stream.readUi8();\n\t\tlet wide = !!(flags & FontFlags.WideOrHasFontData);\n\t\tif (swfVersion > 5) {\n\t\t\ttag.language = stream.readUi8();\n\t\t} else {\n\t\t\t// Clear ShiftJis flag.\n\t\t\tflags = tag.flags = flags & ~FontFlags.ShiftJis;\n\t\t\t// Skip reserved byte.\n\t\t\tstream.pos += 1;\n\t\t\ttag.language = 0;\n\t\t}\n\t\tlet nameLength = stream.readUi8();\n\t\ttag.name = stream.readString(nameLength);\n\t\tif (tagCode === SwfTagCode.CODE_DEFINE_FONT3) {\n\t\t\ttag.resolution = 20;\n\t\t}\n\t\tlet glyphCount = stream.readUi16();\n\t\t// The SWF format docs doesn't say that, but the DefineFont{2,3} tag ends here for device fonts.\n\t\tif (glyphCount === 0) {\n\t\t\treturn tag;\n\t\t}\n\t\tlet startpos = stream.pos;\n\t\tlet offsets: number[] = tag.offsets = [];\n\t\tlet i = glyphCount;\n\t\tif ((flags & FontFlags.WideOffset) !== 0) {\n\t\t\twhile (i--) {\n\t\t\t\toffsets.push(stream.readUi32());\n\t\t\t}\n\t\t\ttag.mapOffset = stream.readUi32();\n\t\t} else {\n\t\t\twhile (i--) {\n\t\t\t\toffsets.push(stream.readUi16());\n\t\t\t}\n\t\t\ttag.mapOffset = stream.readUi16();\n\t\t}\n\t\tlet glyphs: Glyph[] = tag.glyphs = [];\n\t\ti = glyphCount;\n\t\twhile (i--) {\n\t\t\tlet dist = tag.offsets[glyphCount - i] + startpos - stream.pos;\n\t\t\t// when just one byte difference between two offsets, just read that and insert an empty glyph.\n\t\t\tif (dist === 1) {\n\t\t\t\tstream.pos += 1;\n\t\t\t\tglyphs.push([]);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tglyphs.push(parseGlyph(stream, swfVersion, tagCode));\n\t\t}\n\t\tlet codes: number[] = tag.codes = [];\n\t\ti = glyphCount;\n\t\twhile (i--) {\n\t\t\tcodes.push(wide ? stream.readUi16() : stream.readUi8());\n\t\t}\n\t\tif ((flags & FontFlags.HasLayout) !== 0) {\n\t\t\ttag.ascent = stream.readUi16();\n\t\t\ttag.descent = stream.readUi16();\n\t\t\ttag.leading = stream.readSi16();\n\t\t\tlet advance: number[] = tag.advance = [];\n\t\t\ti = glyphCount;\n\t\t\twhile (i--) {\n\t\t\t\tadvance.push(stream.readSi16());\n\t\t\t}\n\t\t\tlet bbox: Bbox[] = tag.bbox = [];\n\t\t\ti = glyphCount;\n\t\t\twhile (i--) {\n\t\t\t\tbbox.push(parseBbox(stream));\n\t\t\t}\n\t\t\tlet kerningCount = stream.readUi16();\n\t\t\tlet kernings: Kerning[] = tag.kerning = [];\n\t\t\ti = kerningCount;\n\t\t\t// DefineFont2 tags tend to have a wrong kerning count so we have to make sure here that there is enough unread\n\t\t\t// data remaining before parsing the next kerning record. If not, we have to bail out earlier in the following\n\t\t\t// loop to avoid reading out of bound.\n\t\t\twhile (i-- && tagEnd - stream.pos >= (wide ? 4 : 2) + 2) {\n\t\t\t\tkernings.push(parseKerning(stream, wide));\n\t\t\t}\n\t\t}\n\t\treturn tag;\n\t}\n\n\tfunction parseKerning(stream: Stream, wide: boolean): Kerning {\n\t\tlet kerning: Kerning = <any>{};\n\t\tif (wide) {\n\t\t\tkerning.code1 = stream.readUi16();\n\t\t\tkerning.code2 = stream.readUi16();\n\t\t}\n\t\telse {\n\t\t\tkerning.code1 = stream.readUi8();\n\t\t\tkerning.code2 = stream.readUi8();\n\t\t}\n\t\tkerning.adjustment = stream.readUi16();\n\t\treturn kerning;\n\t}\n\n\texport function parseDefineFont4Tag(stream: Stream, swfVersion: number, tagCode: number,\n\t                                    tagEnd: number): FontTag {\n\t\tlet tag: FontTag = <any>{code: tagCode};\n\t\ttag.id = stream.readUi16();\n\t\tlet flags = tag.flags = stream.readUi8();\n\t\ttag.name = stream.readString(-1);\n\t\tif (flags & FontFlags.WideOrHasFontData) {\n\t\t\ttag.data = stream.bytes.subarray(stream.pos, tagEnd);\n\t\t\tstream.pos = tagEnd;\n\t\t}\n\t\treturn tag;\n\t}\n\n\tfunction parseDefineScalingGridTag(stream: Stream, swfVersion: number,\n\t                                   tagCode: number): ScalingGridTag {\n\t\tlet tag: ScalingGridTag = <any>{code: tagCode};\n\t\ttag.symbolId = stream.readUi16();\n\t\ttag.splitter = parseBbox(stream);\n\t\treturn tag;\n\t}\n\n\texport function parseDefineSceneTag(stream: Stream, tagCode: number): SceneTag {\n\t\tlet tag: SceneTag = <any>{code: tagCode};\n\t\tlet sceneCount = stream.readEncodedU32();\n\t\tlet scenes: Scene[] = tag.scenes = [];\n\t\tlet i = sceneCount;\n\t\twhile (i--) {\n\t\t\tscenes.push({\n\t\t\t\toffset: stream.readEncodedU32(),\n\t\t\t\tname: stream.readString(-1)\n\t\t\t});\n\t\t}\n\t\tlet labelCount = stream.readEncodedU32();\n\t\tlet labels: Label[] = tag.labels = [];\n\t\ti = labelCount;\n\t\twhile (i--) {\n\t\t\tlabels.push({\n\t\t\t\tframe: stream.readEncodedU32(),\n\t\t\t\tname: stream.readString(-1)\n\t\t\t});\n\t\t}\n\t\treturn tag;\n\t}\n\n\tfunction parseDefineShapeTag(stream: Stream, swfVersion: number, tagCode: number): ShapeTag {\n\t\tlet tag: ShapeTag = <any>{code: tagCode};\n\t\ttag.id = stream.readUi16();\n\t\ttag.lineBounds = parseBbox(stream);\n\t\tlet flags = 0;\n\t\tlet isMorph = tagCode === SwfTagCode.CODE_DEFINE_MORPH_SHAPE ||\n\t\t\ttagCode === SwfTagCode.CODE_DEFINE_MORPH_SHAPE2;\n\t\tif (isMorph) {\n\t\t\tflags |= ShapeFlags.IsMorph;\n\t\t\ttag.lineBoundsMorph = parseBbox(stream);\n\t\t}\n\t\tlet canHaveStrokes = tagCode === SwfTagCode.CODE_DEFINE_SHAPE4 ||\n\t\t\ttagCode === SwfTagCode.CODE_DEFINE_MORPH_SHAPE2;\n\t\tif (canHaveStrokes) {\n\t\t\tlet fillBounds = tag.fillBounds = parseBbox(stream);\n\t\t\tif (isMorph) {\n\t\t\t\ttag.fillBoundsMorph = parseBbox(stream);\n\t\t\t}\n\t\t\tflags |= stream.readUi8() & 0x07;\n\t\t}\n\t\ttag.flags = flags;\n\t\tif (isMorph) {\n\t\t\tstream.pos += 4;\n\t\t}\n\t\ttag.fillStyles = parseFillStyles(stream, swfVersion, tagCode, isMorph);\n\t\ttag.lineStyles = parseLineStyles(stream, swfVersion, tagCode, isMorph, canHaveStrokes);\n\t\tstream.align();\n\t\tlet fillBits = stream.readUb(4);\n\t\tlet lineBits = stream.readUb(4);\n\t\ttag.records = parseShapeRecords(stream, swfVersion, tagCode, isMorph, fillBits, lineBits,\n\t\t\tcanHaveStrokes);\n\t\tif (isMorph) {\n\t\t\tstream.align();\n\t\t\tfillBits = stream.readUb(4);\n\t\t\tlineBits = stream.readUb(4);\n\t\t\ttag.recordsMorph = parseShapeRecords(stream, swfVersion, tagCode, isMorph, fillBits,\n\t\t\t\tlineBits, canHaveStrokes);\n\t\t}\n\t\treturn tag;\n\t}\n\n\tfunction parseShapeRecords(stream: Stream, swfVersion: number, tagCode: number,\n\t                           isMorph: boolean, fillBits: number, lineBits: number,\n\t                           hasStrokes: boolean): ShapeRecord[] {\n\t\tlet records: ShapeRecord[] = [];\n\t\tlet bits: number;\n\t\tdo {\n\t\t\tlet record: any = {};\n\t\t\tlet type = record.type = stream.readUb(1);\n\t\t\tlet flags = stream.readUb(5);\n\t\t\tif (!(type || flags)) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (type) {\n\t\t\t\tlet bits = (flags & 0x0f) + 2;\n\t\t\t\tflags = (flags & 0xf0) << 1;\n\t\t\t\tif (flags & ShapeRecordFlags.IsStraight) {\n\t\t\t\t\tlet isGeneral = record.isGeneral = stream.readUb(1);\n\t\t\t\t\tif (isGeneral) {\n\t\t\t\t\t\tflags |= ShapeRecordFlags.IsGeneral;\n\t\t\t\t\t\trecord.deltaX = stream.readSb(bits);\n\t\t\t\t\t\trecord.deltaY = stream.readSb(bits);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlet isVertical = record.isVertical = stream.readUb(1);\n\t\t\t\t\t\tif (isVertical) {\n\t\t\t\t\t\t\tflags |= ShapeRecordFlags.IsVertical;\n\t\t\t\t\t\t\trecord.deltaY = stream.readSb(bits);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\trecord.deltaX = stream.readSb(bits);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\trecord.controlDeltaX = stream.readSb(bits);\n\t\t\t\t\trecord.controlDeltaY = stream.readSb(bits);\n\t\t\t\t\trecord.anchorDeltaX = stream.readSb(bits);\n\t\t\t\t\trecord.anchorDeltaY = stream.readSb(bits);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (tagCode <= SwfTagCode.CODE_DEFINE_SHAPE) {\n\t\t\t\t\t// Clear HasNewStyles flag.\n\t\t\t\t\tflags &= ~ShapeRecordFlags.HasNewStyles;\n\t\t\t\t}\n\t\t\t\tif (flags & ShapeRecordFlags.Move) {\n\t\t\t\t\tbits = stream.readUb(5);\n\t\t\t\t\trecord.moveX = stream.readSb(bits);\n\t\t\t\t\trecord.moveY = stream.readSb(bits);\n\t\t\t\t}\n\t\t\t\tif (flags & ShapeRecordFlags.HasFillStyle0) {\n\t\t\t\t\trecord.fillStyle0 = stream.readUb(fillBits);\n\t\t\t\t}\n\t\t\t\tif (flags & ShapeRecordFlags.HasFillStyle1) {\n\t\t\t\t\trecord.fillStyle1 = stream.readUb(fillBits);\n\t\t\t\t}\n\t\t\t\tif (flags & ShapeRecordFlags.HasLineStyle) {\n\t\t\t\t\trecord.lineStyle = stream.readUb(lineBits);\n\t\t\t\t}\n\t\t\t\tif (flags & ShapeRecordFlags.HasNewStyles) {\n\t\t\t\t\trecord.fillStyles = parseFillStyles(stream, swfVersion, tagCode, isMorph);\n\t\t\t\t\trecord.lineStyles = parseLineStyles(stream, swfVersion, tagCode, isMorph, hasStrokes);\n\t\t\t\t\tstream.align();\n\t\t\t\t\tfillBits = stream.readUb(4);\n\t\t\t\t\tlineBits = stream.readUb(4);\n\t\t\t\t}\n\t\t\t}\n\t\t\trecord.flags = flags;\n\t\t\trecords.push(record);\n\t\t} while (true);\n\t\treturn records;\n\t}\n\n\tfunction parseFillStyles(stream: Stream, swfVersion: number, tagCode: number,\n\t                         isMorph: boolean): FillStyle[] {\n\t\tlet count = stream.readUi8();\n\t\tif (tagCode > SwfTagCode.CODE_DEFINE_SHAPE && count === 255) {\n\t\t\tcount = stream.readUi16();\n\t\t}\n\t\tlet styles: FillStyle[] = [];\n\t\tlet i = count;\n\t\twhile (i--) {\n\t\t\tstyles.push(parseFillStyle(stream, swfVersion, tagCode, isMorph));\n\t\t}\n\t\treturn styles;\n\t}\n\n\tfunction parseFillStyle(stream: Stream, swfVersion: number, tagCode: number,\n\t                        isMorph: boolean): FillStyle {\n\t\tlet style: FillStyle = <any>{};\n\t\tlet type = style.type = stream.readUi8();\n\t\tswitch (type) {\n\t\t\tcase 0:\n\t\t\t\tlet solid = <SolidFill>style;\n\t\t\t\tsolid.color = tagCode > SwfTagCode.CODE_DEFINE_SHAPE2 || isMorph ?\n\t\t\t\t\tparseRgba(stream) :\n\t\t\t\t\tparseRgb(stream);\n\t\t\t\tif (isMorph) {\n\t\t\t\t\tsolid.colorMorph = parseRgba(stream);\n\t\t\t\t}\n\t\t\t\treturn solid;\n\t\t\tcase 16:\n\t\t\tcase 18:\n\t\t\tcase 19:\n\t\t\t\tlet gradient = <GradientFill>style;\n\t\t\t\tgradient.matrix = parseMatrix(stream);\n\t\t\t\tif (isMorph) {\n\t\t\t\t\tgradient.matrixMorph = parseMatrix(stream);\n\t\t\t\t}\n\t\t\t\tif (tagCode === SwfTagCode.CODE_DEFINE_SHAPE4) {\n\t\t\t\t\tgradient.spreadMode = stream.readUb(2);\n\t\t\t\t\tgradient.interpolationMode = stream.readUb(2);\n\t\t\t\t} else {\n\t\t\t\t\tstream.readUb(4);\n\t\t\t\t}\n\t\t\t\tlet count = stream.readUb(4);\n\t\t\t\tlet records: GradientRecord[] = gradient.records = [];\n\t\t\t\tlet j = count;\n\t\t\t\twhile (j--) {\n\t\t\t\t\trecords.push(parseGradientRecord(stream, tagCode, isMorph));\n\t\t\t\t}\n\t\t\t\tif (type === 19) {\n\t\t\t\t\tgradient.focalPoint = stream.readSi16();\n\t\t\t\t\tif (isMorph) {\n\t\t\t\t\t\tgradient.focalPointMorph = stream.readSi16();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn gradient;\n\t\t\tcase 64:\n\t\t\tcase 65:\n\t\t\tcase 66:\n\t\t\tcase 67:\n\t\t\t\tlet pattern = <BitmapFill>style;\n\t\t\t\tpattern.bitmapId = stream.readUi16();\n\t\t\t\tpattern.condition = type === 64 || type === 67;\n\t\t\t\tpattern.matrix = parseMatrix(stream);\n\t\t\t\tif (isMorph) {\n\t\t\t\t\tpattern.matrixMorph = parseMatrix(stream);\n\t\t\t\t}\n\t\t\t\treturn pattern;\n\t\t}\n\t\treturn style;\n\t}\n\n\tfunction parseGradientRecord(stream: Stream, tagCode: number,\n\t                             isMorph: boolean): GradientRecord {\n\t\tlet record: GradientRecord = <any>{};\n\t\trecord.ratio = stream.readUi8();\n\t\tif (tagCode > SwfTagCode.CODE_DEFINE_SHAPE2) {\n\t\t\trecord.color = parseRgba(stream);\n\t\t} else {\n\t\t\trecord.color = parseRgb(stream);\n\t\t}\n\t\tif (isMorph) {\n\t\t\trecord.ratioMorph = stream.readUi8();\n\t\t\trecord.colorMorph = parseRgba(stream);\n\t\t}\n\t\treturn record;\n\t}\n\n\tfunction parseLineStyles(stream: Stream, swfVersion: number, tagCode: number,\n\t                         isMorph: boolean, hasStrokes: boolean): LineStyle[] {\n\t\tlet count = stream.readUi8();\n\t\tif (tagCode > SwfTagCode.CODE_DEFINE_SHAPE && count === 255) {\n\t\t\tcount = stream.readUi16();\n\t\t}\n\t\tlet styles: LineStyle[] = [];\n\t\tlet i = count;\n\t\twhile (i--) {\n\t\t\tlet style: any = {};\n\t\t\tstyle.width = stream.readUi16();\n\t\t\tif (isMorph) {\n\t\t\t\tstyle.widthMorph = stream.readUi16();\n\t\t\t}\n\t\t\tif (hasStrokes) {\n\t\t\t\tstream.align();\n\t\t\t\tstyle.startCapsStyle = stream.readUb(2);\n\t\t\t\tlet jointStyle = style.jointStyle = stream.readUb(2);\n\t\t\t\tlet hasFill = style.hasFill = stream.readUb(1);\n\t\t\t\tstyle.noHscale = !!stream.readUb(1);\n\t\t\t\tstyle.noVscale = !!stream.readUb(1);\n\t\t\t\tstyle.pixelHinting = !!stream.readUb(1);\n\t\t\t\tstream.readUb(5);\n\t\t\t\tstyle.noClose = !!stream.readUb(1);\n\t\t\t\tstyle.endCapsStyle = stream.readUb(2);\n\t\t\t\tif (jointStyle === 2) {\n\t\t\t\t\tstyle.miterLimitFactor = stream.readFixed8();\n\t\t\t\t}\n\t\t\t\tif (hasFill) {\n\t\t\t\t\tstyle.fillStyle = parseFillStyle(stream, swfVersion, tagCode, isMorph);\n\t\t\t\t} else {\n\t\t\t\t\tstyle.color = parseRgba(stream);\n\t\t\t\t\tif (isMorph) {\n\t\t\t\t\t\tstyle.colorMorph = parseRgba(stream);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (tagCode > SwfTagCode.CODE_DEFINE_SHAPE2) {\n\t\t\t\t\tstyle.color = parseRgba(stream);\n\t\t\t\t} else {\n\t\t\t\t\tstyle.color = parseRgb(stream);\n\t\t\t\t}\n\t\t\t\tif (isMorph) {\n\t\t\t\t\tstyle.colorMorph = parseRgba(stream);\n\t\t\t\t}\n\t\t\t}\n\t\t\tstyles.push(style);\n\t\t}\n\t\treturn styles;\n\t}\n\n\tfunction parseDefineVideoStreamTag(stream: Stream, swfVersion: number,\n\t                                   tagCode: number): VideoStreamTag {\n\t\tlet tag: VideoStreamTag = <any>{code: tagCode};\n\t\ttag.id = stream.readUi16();\n\t\ttag.numFrames = stream.readUi16();\n\t\ttag.width = stream.readUi16();\n\t\ttag.height = stream.readUi16();\n\t\tstream.readUb(4);\n\t\ttag.deblocking = stream.readUb(3);\n\t\ttag.smoothing = !!stream.readUb(1);\n\t\ttag.codecId = stream.readUi8();\n\t\treturn tag;\n\t}\n\n\tfunction parseVideoFrameTag(stream: Stream, swfVersion: number,\n\t                            tagCode: number, tagEnd: number): VideoFrameTag {\n\t\tlet tag: VideoFrameTag = <any>{code: tagCode};\n\t\ttag.streamId = stream.readUi16();\n\t\ttag.frameNum = stream.readUi16();\n\t\ttag.videoData = stream.bytes.subarray(stream.pos, tagEnd);\n\t\tstream.pos = tagEnd;\n\t\treturn tag;\n\t}\n\n\texport let tagHandlers: any = {\n\t\t/* End */                            0: undefined,\n\t\t/* ShowFrame */                      1: undefined,\n\t\t/* DefineShape */                    2: parseDefineShapeTag,\n\t\t/* PlaceObject */                    4: parsePlaceObjectTag,\n\t\t/* RemoveObject */                   5: parseRemoveObjectTag,\n\t\t/* DefineBits */                     6: parseDefineImageTag,\n\t\t/* DefineButton */                   7: parseDefineButtonTag,\n\t\t/* JPEGTables */                     8: undefined,\n\t\t/* SetBackgroundColor */             9: undefined,\n\t\t/* DefineFont */                    10: parseDefineFontTag,\n\t\t/* DefineText */                    11: parseDefineTextTag,\n\t\t/* DoAction */                      12: undefined,\n\t\t/* DefineFontInfo */                13: undefined,\n\t\t/* DefineSound */                   14: parseDefineSoundTag,\n\t\t/* StartSound */                    15: parseStartSoundTag,\n\t\t/* DefineButtonSound */             17: undefined,\n\t\t/* SoundStreamHead */               18: undefined,\n\t\t/* SoundStreamBlock */              19: undefined,\n\t\t/* DefineBitsLossless */            20: parseDefineBitmapTag,\n\t\t/* DefineBitsJPEG2 */               21: parseDefineImageTag,\n\t\t/* DefineShape2 */                  22: parseDefineShapeTag,\n\t\t/* DefineButtonCxform */            23: undefined,\n\t\t/* Protect */                       24: undefined,\n\t\t/* PlaceObject2 */                  26: parsePlaceObjectTag,\n\t\t/* RemoveObject2 */                 28: parseRemoveObjectTag,\n\t\t/* DefineShape3 */                  32: parseDefineShapeTag,\n\t\t/* DefineText2 */                   33: parseDefineTextTag,\n\t\t/* DefineButton2 */                 34: parseDefineButtonTag,\n\t\t/* DefineBitsJPEG3 */               35: parseDefineImageTag,\n\t\t/* DefineBitsLossless2 */           36: parseDefineBitmapTag,\n\t\t/* DefineEditText */                37: parseDefineEditTextTag,\n\t\t/* DefineSprite */                  39: undefined,\n\t\t/* FrameLabel */                    43: undefined,\n\t\t/* SoundStreamHead2 */              45: undefined,\n\t\t/* DefineMorphShape */              46: parseDefineShapeTag,\n\t\t/* DefineFont2 */                   48: parseDefineFont2Tag,\n\t\t/* ExportAssets */                  56: undefined,\n\t\t/* ImportAssets */                  57: undefined,\n\t\t/* EnableDebugger */                58: undefined,\n\t\t/* DoInitAction */                  59: undefined,\n\t\t/* DefineVideoStream */             60: parseDefineVideoStreamTag,\n\t\t/* VideoFrame */                    61: parseVideoFrameTag,\n\t\t/* DefineFontInfo2 */               62: undefined,\n\t\t/* EnableDebugger2 */               64: undefined,\n\t\t/* ScriptLimits */                  65: undefined,\n\t\t/* SetTabIndex */                   66: undefined,\n\t\t/* FileAttributes */                69: undefined,\n\t\t/* PlaceObject3 */                  70: parsePlaceObjectTag,\n\t\t/* ImportAssets2 */                 71: undefined,\n\t\t/* DoABC (undoc) */                 72: undefined,\n\t\t/* DefineFontAlignZones */          73: undefined,\n\t\t/* CSMTextSettings */               74: undefined,\n\t\t/* DefineFont3 */                   75: parseDefineFont2Tag,\n\t\t/* SymbolClass */                   76: undefined,\n\t\t/* Metadata */                      77: undefined,\n\t\t/* DefineScalingGrid */             78: parseDefineScalingGridTag,\n\t\t/* DoABC */                         82: undefined,\n\t\t/* DefineShape4 */                  83: parseDefineShapeTag,\n\t\t/* DefineMorphShape2 */             84: parseDefineShapeTag,\n\t\t/* DefineSceneAndFrameLabelData */  86: parseDefineSceneTag,\n\t\t/* DefineBinaryData */              87: parseDefineBinaryDataTag,\n\t\t/* DefineFontName */                88: undefined,\n\t\t/* StartSound2 */                   89: parseStartSoundTag,\n\t\t/* DefineBitsJPEG4 */               90: parseDefineImageTag,\n\t\t/* DefineFont4 */                   91: parseDefineFont4Tag\n\t};\n\n\texport function parseHeader(stream: Stream) {\n\t\tlet bits = stream.readUb(5);\n\t\tlet xMin = stream.readSb(bits);\n\t\tlet xMax = stream.readSb(bits);\n\t\tlet yMin = stream.readSb(bits);\n\t\tlet yMax = stream.readSb(bits);\n\t\tstream.align();\n\t\tlet frameRateFraction = stream.readUi8();\n\t\tlet frameRate = stream.readUi8() + frameRateFraction / 256;\n\t\tlet frameCount = stream.readUi16();\n\t\treturn {\n\t\t\tframeRate: frameRate,\n\t\t\tframeCount: frameCount,\n\t\t\tbounds: new Shumway.Bounds(xMin, yMin, xMax, yMax)\n\t\t};\n\t}\n}\n","/**\n * Copyright 2014 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/// <reference path='references.ts'/>\nmodule Shumway.SWF.Parser {\n\timport assert = Shumway.Debug.assert;\n\timport notImplemented = Shumway.Debug.notImplemented;\n\timport assertUnreachable = Shumway.Debug.assertUnreachable;\n\timport roundToMultipleOfFour = Shumway.IntegerUtilities.roundToMultipleOfFour;\n\timport Inflate = Shumway.ArrayUtilities.Inflate;\n\n\texport const enum BitmapFormat {\n\t\t/**\n\t\t * 8-bit color mapped image.\n\t\t */\n\t\tFORMAT_COLORMAPPED = 3,\n\n\t\t/**\n\t\t * 15-bit RGB image.\n\t\t */\n\t\tFORMAT_15BPP = 4,\n\n\t\t/**\n\t\t * 24-bit RGB image, however stored as 4 byte value 0x00RRGGBB.\n\t\t */\n\t\tFORMAT_24BPP = 5\n\t}\n\n\t/** @const */ let FACTOR_5BBP = 255 / 31;\n\n\t/*\n\t * Returns a Uint8Array of ARGB values. The source image is color mapped meaning\n\t * that the buffer is first prefixed with a color table:\n\t *\n\t * +--------------|--------------------------------------------------+\n\t * | Color Table  |  Image Data (byte indices into the color table)  |\n\t * +--------------|--------------------------------------------------+\n\t *\n\t * Color Table entries are either in RGB or RGBA format.\n\t *\n\t * There are two variations of these file formats, with or without alpha.\n\t *\n\t * Row pixels always start at 32 bit alinged offsets, the color table as\n\t * well as the end of each row may be padded so that the next row of pixels\n\t * is aligned.\n\t */\n\tfunction parseColorMapped(tag: BitmapTag): Uint8Array {\n\t\tlet width = tag.width, height = tag.height;\n\t\tlet hasAlpha = tag.hasAlpha;\n\n\t\tlet padding = roundToMultipleOfFour(width) - width;\n\t\tlet colorTableLength = tag.colorTableSize + 1;\n\t\tlet colorTableEntrySize = hasAlpha ? 4 : 3;\n\t\tlet colorTableSize = roundToMultipleOfFour(colorTableLength * colorTableEntrySize);\n\n\t\tlet dataSize = colorTableSize + ((width + padding) * height);\n\n\t\tlet bytes: Uint8Array = Inflate.inflate(tag.bmpData, dataSize, true);\n\n\t\tlet view = new Uint32Array(width * height);\n\n\t\t// TODO: Figure out why this fails.\n\t\t// Make sure we've deflated enough bytes.\n\t\t// stream.ensure(dataSize);\n\n\t\tlet p = colorTableSize, i = 0, offset = 0;\n\t\tif (hasAlpha) {\n\t\t\tfor (let y = 0; y < height; y++) {\n\t\t\t\tfor (let x = 0; x < width; x++) {\n\t\t\t\t\toffset = bytes[p++] << 2;\n\t\t\t\t\tlet a = bytes[offset + 3]; // A\n\t\t\t\t\tlet r = bytes[offset + 0]; // R\n\t\t\t\t\tlet g = bytes[offset + 1]; // G\n\t\t\t\t\tlet b = bytes[offset + 2]; // B\n\t\t\t\t\tview[i++] = b << 24 | g << 16 | r << 8 | a;\n\t\t\t\t}\n\t\t\t\tp += padding;\n\t\t\t}\n\t\t} else {\n\t\t\tfor (let y = 0; y < height; y++) {\n\t\t\t\tfor (let x = 0; x < width; x++) {\n\t\t\t\t\toffset = bytes[p++] * colorTableEntrySize;\n\t\t\t\t\tlet a = 0xff; // A\n\t\t\t\t\tlet r = bytes[offset + 0]; // R\n\t\t\t\t\tlet g = bytes[offset + 1]; // G\n\t\t\t\t\tlet b = bytes[offset + 2]; // B\n\t\t\t\t\tview[i++] = b << 24 | g << 16 | r << 8 | a;\n\t\t\t\t}\n\t\t\t\tp += padding;\n\t\t\t}\n\t\t}\n\t\trelease || assert(p === dataSize, \"We should be at the end of the data buffer now.\");\n\t\trelease || assert(i === width * height, \"Should have filled the entire image.\");\n\t\treturn new Uint8Array(view.buffer);\n\t}\n\n\t/**\n\t * Returns a Uint8Array of ARGB values. The data is already stored in premultiplied ARGB\n\t * so there's not much to do unless there's no alpha in which case we expand it here.\n\t */\n\tfunction parse24BPP(tag: BitmapTag): Uint8Array {\n\t\tlet width = tag.width, height = tag.height;\n\t\tlet hasAlpha = tag.hasAlpha;\n\n\t\t// Even without alpha, 24BPP is stored as 4 bytes, probably for alignment reasons.\n\t\tlet dataSize = height * width * 4;\n\n\t\tlet bytes: Uint8Array = Inflate.inflate(tag.bmpData, dataSize, true);\n\t\tif (hasAlpha) {\n\t\t\treturn bytes;\n\t\t}\n\t\tlet view = new Uint32Array(width * height);\n\t\tlet length = width * height, p = 0;\n\t\t// TODO: Looks like we can probably get away with just setting alpha to 0xff instead of\n\t\t// reading the entire buffer.\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tp++; // Reserved, always zero.\n\t\t\tlet r = bytes[p++];\n\t\t\tlet g = bytes[p++];\n\t\t\tlet b = bytes[p++];\n\t\t\tview[i] = b << 24 | g << 16 | r << 8 | 0xff;\n\t\t}\n\t\trelease || assert(p === dataSize, \"We should be at the end of the data buffer now.\");\n\t\treturn new Uint8Array(view.buffer);\n\t}\n\n\tfunction parse15BPP(tag: BitmapTag): Uint8Array {\n\t\trelease || notImplemented(\"parse15BPP\");\n\t\t/*\n\t\t  case FORMAT_15BPP:\n\t\t\tlet colorType = 0x02;\n\t\t\tlet bytesPerLine = ((width * 2) + 3) & ~3;\n\t\t\tlet stream = createInflatedStream(bmpData, bytesPerLine * height);\n\n\t\t\tfor (let y = 0, i = 0; y < height; ++y) {\n\t\t\t  stream.ensure(bytesPerLine);\n\t\t\t  for (let x = 0; x < width; ++x, i += 4) {\n\t\t\t\tlet word = stream.readUi16();\n\t\t\t\t// Extracting RGB color components and changing values range\n\t\t\t\t// from 0..31 to 0..255.\n\t\t\t\tdata[i] = 0 | (FACTOR_5BBP * ((word >> 10) & 0x1f));\n\t\t\t\tdata[i + 1] = 0 | (FACTOR_5BBP * ((word >> 5) & 0x1f));\n\t\t\t\tdata[i + 2] = 0 | (FACTOR_5BBP * (word & 0x1f));\n\t\t\t\tdata[i + 3] = 255;\n\t\t\t  }\n\t\t\t  stream += bytesPerLine;\n\t\t\t}\n\t\t\tbreak;\n\t\t  */\n\t\treturn null;\n\t}\n\n\texport function defineBitmap(tag: BitmapTag): { definition: ImageDefinition; type: string } {\n\t\tenterTimeline(\"defineBitmap\");\n\t\tlet data: Uint32Array;\n\t\tlet type = ImageType.None;\n\t\tswitch (tag.format) {\n\t\t\tcase BitmapFormat.FORMAT_COLORMAPPED:\n\t\t\t\tdata = parseColorMapped(tag);\n\t\t\t\ttype = ImageType.PremultipliedAlphaARGB;\n\t\t\t\tbreak;\n\t\t\tcase BitmapFormat.FORMAT_24BPP:\n\t\t\t\tdata = parse24BPP(tag);\n\t\t\t\ttype = ImageType.PremultipliedAlphaARGB;\n\t\t\t\tbreak;\n\t\t\tcase BitmapFormat.FORMAT_15BPP:\n\t\t\t\tdata = parse15BPP(tag);\n\t\t\t\ttype = ImageType.PremultipliedAlphaARGB;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\trelease || assertUnreachable('invalid bitmap format');\n\t\t}\n\t\tleaveTimeline();\n\t\treturn {\n\t\t\tdefinition: {\n\t\t\t\ttype: 'image',\n\t\t\t\tid: tag.id,\n\t\t\t\twidth: tag.width,\n\t\t\t\theight: tag.height,\n\t\t\t\tmimeType: 'application/octet-stream',\n\t\t\t\tdata: data,\n\t\t\t\tdataType: type,\n\t\t\t\timage: null\n\t\t\t},\n\t\t\ttype: 'image'\n\t\t};\n\t}\n}\n","/**\n * Copyright 2014 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/// <reference path='references.ts'/>\nmodule Shumway.SWF.Parser {\n\timport assert = Shumway.Debug.assert;\n\n\texport function defineButton(tag: ButtonTag, dictionary: any): any {\n\t\tlet characters = tag.characters;\n\t\tlet states = {\n\t\t\tup: [] as Array<any>,\n\t\t\tover: [] as Array<any>,\n\t\t\tdown: [] as Array<any>,\n\t\t\thitTest: [] as Array<any>\n\t\t};\n\t\tlet i = 0, character;\n\t\twhile ((character = characters[i++])) {\n\t\t\tlet characterItem = dictionary[character.symbolId];\n\t\t\t// The Flash Player ignores references to undefined symbols here. So should we.\n\t\t\t// TODO: What should happen if the symbol gets defined later in the file?\n\t\t\tif (characterItem) {\n\t\t\t\tlet cmd = {\n\t\t\t\t\tsymbolId: characterItem.id,\n\t\t\t\t\tcode: SwfTagCode.CODE_PLACE_OBJECT,\n\t\t\t\t\tdepth: character.depth,\n\t\t\t\t\tflags: character.matrix ? PlaceObjectFlags.HasMatrix : 0,\n\t\t\t\t\tmatrix: character.matrix\n\t\t\t\t};\n\t\t\t\tif (character.flags & ButtonCharacterFlags.StateUp)\n\t\t\t\t\tstates.up.push(cmd);\n\t\t\t\tif (character.flags & ButtonCharacterFlags.StateOver)\n\t\t\t\t\tstates.over.push(cmd);\n\t\t\t\tif (character.flags & ButtonCharacterFlags.StateDown)\n\t\t\t\t\tstates.down.push(cmd);\n\t\t\t\tif (character.flags & ButtonCharacterFlags.StateHitTest)\n\t\t\t\t\tstates.hitTest.push(cmd);\n\t\t\t} else {\n\t\t\t\trelease || Debug.warning('undefined character in button ' + tag.id);\n\t\t\t}\n\t\t}\n\t\tlet button = {\n\t\t\ttype: 'button',\n\t\t\tid: tag.id,\n\t\t\tbuttonActions: tag.buttonActions,\n\t\t\tstates: states\n\t\t};\n\t\treturn button;\n\t}\n}\n","/**\n * Copyright 2014 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nmodule Shumway.SWF.Parser {\n\tlet pow = Math.pow;\n\tlet min = Math.min;\n\tlet max = Math.max;\n\tlet logE = Math.log;\n\tlet fromCharCode = String.fromCharCode;\n\n\tlet nextFontId = 1;\n\n\tfunction maxPower2(num: number) {\n\t\tlet maxPower = 0;\n\t\tlet val = num;\n\t\twhile (val >= 2) {\n\t\t\tval /= 2;\n\t\t\t++maxPower;\n\t\t}\n\t\treturn pow(2, maxPower);\n\t}\n\n\tfunction toString16(val: number) {\n\t\treturn fromCharCode((val >> 8) & 0xff, val & 0xff);\n\t}\n\n\tfunction toString32(val: number) {\n\t\treturn toString16(val >> 16) + toString16(val);\n\t}\n\n\t/**\n\t * Heuristic to detect if DefineFont2 was scaled as Font3: scanning all\n\t * x and y coordinates of the glyphs and if their bounding box dimensions\n\t * greater than 5000 (that's more than enough for normal TrueType font),\n\t * then the font coordinates were scaled by 20.\n\t */\n\tfunction isScaledFont2(glyphs: Array<any>) {\n\t\tlet xMin = 0, yMin = 0, xMax = 0, yMax = 0;\n\t\tlet record;\n\t\tfor (let i = 0; i < glyphs.length; i++) {\n\t\t\tlet records = glyphs[i];\n\t\t\tif (!records) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tlet x = 0;\n\t\t\tlet y = 0;\n\n\t\t\tfor (let j = 0; j < records.length; j++) {\n\t\t\t\trecord = records[j];\n\t\t\t\tif (record.type) {\n\t\t\t\t\tif ((record.flags & ShapeRecordFlags.IsStraight) !== 0) {\n\t\t\t\t\t\tx += (record.deltaX || 0);\n\t\t\t\t\t\ty += -(record.deltaY || 0);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tx += record.controlDeltaX;\n\t\t\t\t\t\ty += -record.controlDeltaY;\n\t\t\t\t\t\tx += record.anchorDeltaX;\n\t\t\t\t\t\ty += -record.anchorDeltaY;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif ((record.flags & ShapeRecordFlags.Move) !== 0) {\n\t\t\t\t\t\tx = record.moveX;\n\t\t\t\t\t\ty = -record.moveY;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (xMin > x) {\n\t\t\t\t\txMin = x;\n\t\t\t\t}\n\t\t\t\tif (yMin > y) {\n\t\t\t\t\tyMin = y;\n\t\t\t\t}\n\t\t\t\tif (xMax < x) {\n\t\t\t\t\txMax = x;\n\t\t\t\t}\n\t\t\t\tif (yMax < y) {\n\t\t\t\t\tyMax = y;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tlet maxDimension = Math.max(xMax - xMin, yMax - yMin);\n\t\treturn maxDimension > 5000;\n\t}\n\n\texport function defineFont(tag: FontTag) {\n\t\tlet uniqueName = 'swf-font-' + tag.id;\n\t\tlet fontName = tag.name || uniqueName;\n\n\t\tlet font = {\n\t\t\ttype: 'font',\n\t\t\tid: tag.id,\n\t\t\tname: fontName,\n\t\t\tbold: !!(tag.flags & FontFlags.Bold),\n\t\t\titalic: !!(tag.flags & FontFlags.Italic),\n\t\t\tcodes: null as any,\n\t\t\tmetrics: null as any,\n\t\t\tdata: tag.data,\n\t\t\toriginalSize: false\n\t\t};\n\n\t\tlet glyphs = tag.glyphs;\n\t\tlet glyphCount = glyphs ? glyphs.length : 0;\n\n\t\tif (!glyphCount) {\n\t\t\treturn font;\n\t\t}\n\n\t\tlet tables: any = {};\n\t\tlet codes: any = [];\n\t\tlet glyphIndex: any = {};\n\t\tlet ranges: any = [];\n\n\t\tlet originalCode;\n\t\tlet generateAdvancement = !('advance' in tag);\n\t\tlet correction = 0;\n\t\tlet isFont2 = tag.code === SwfTagCode.CODE_DEFINE_FONT2;\n\t\tlet isFont3 = tag.code === SwfTagCode.CODE_DEFINE_FONT3;\n\n\t\tif (generateAdvancement) {\n\t\t\ttag.advance = [];\n\t\t}\n\n\t\tlet maxCode = Math.max.apply(null, tag.codes) || 35;\n\n\t\tlet indices: Array<number>;\n\t\tlet code: number;\n\t\tif (tag.codes) {\n\t\t\tfor (let i = 0; i < tag.codes.length; i++) {\n\t\t\t\tlet code = tag.codes[i];\n\t\t\t\tif (code < 32 || code in glyphIndex) {\n\t\t\t\t\tmaxCode++;\n\t\t\t\t\tif (maxCode == 8232) {\n\t\t\t\t\t\tmaxCode = 8240;\n\t\t\t\t\t}\n\t\t\t\t\tcode = maxCode;\n\t\t\t\t}\n\t\t\t\tcodes.push(code);\n\t\t\t\tglyphIndex[code] = i;\n\t\t\t}\n\n\t\t\toriginalCode = codes.concat();\n\n\t\t\tcodes.sort(function (a: number, b: number) {\n\t\t\t\treturn a - b;\n\t\t\t});\n\t\t\tlet i = 0;\n\t\t\twhile ((code = codes[i++]) !== undefined) {\n\t\t\t\tlet start = code;\n\t\t\t\tlet end = start;\n\t\t\t\tindices = [i - 1];\n\t\t\t\twhile (((code = codes[i]) !== undefined) && end + 1 === code) {\n\t\t\t\t\t++end;\n\t\t\t\t\tindices.push(i);\n\t\t\t\t\t++i;\n\t\t\t\t}\n\t\t\t\tranges.push([start, end, indices]);\n\t\t\t}\n\t\t} else {\n\t\t\tindices = [];\n\t\t\tlet UAC_OFFSET = 0xe000;\n\t\t\tfor (let i = 0; i < glyphCount; i++) {\n\t\t\t\tcode = UAC_OFFSET + i;\n\t\t\t\tcodes.push(code);\n\t\t\t\tglyphIndex[code] = i;\n\t\t\t\tindices.push(i);\n\t\t\t}\n\t\t\tranges.push([UAC_OFFSET, UAC_OFFSET + glyphCount - 1, indices]);\n\t\t\toriginalCode = codes.concat();\n\t\t}\n\n\t\tlet resolution = tag.resolution || 1;\n\t\tif (isFont2 && isScaledFont2(glyphs)) {\n\t\t\t// some DefineFont2 without layout using DefineFont3 resolution, why?\n\t\t\tresolution = 20;\n\t\t\tfont.originalSize = true;\n\t\t}\n\t\tlet ascent = Math.ceil(tag.ascent / resolution) || 1024;\n\t\tlet descent = -Math.ceil(tag.descent / resolution) || 0;\n\t\tlet leading = (tag.leading / resolution) || 0;\n\t\ttables['OS/2'] = '';\n\n\t\tlet startCount = '';\n\t\tlet endCount = '';\n\t\tlet idDelta = '';\n\t\tlet idRangeOffset = '';\n\t\tlet i = 0;\n\t\tlet range;\n\t\twhile ((range = ranges[i++])) {\n\t\t\tlet start: number = range[0];\n\t\t\tlet end: number = range[1];\n\t\t\tcode = range[2][0];\n\t\t\tstartCount += toString16(start);\n\t\t\tendCount += toString16(end);\n\t\t\tidDelta += toString16(((code - start) + 1) & 0xffff);\n\t\t\tidRangeOffset += toString16(0);\n\t\t}\n\t\tendCount += '\\xff\\xff';\n\t\tstartCount += '\\xff\\xff';\n\t\tidDelta += '\\x00\\x01';\n\t\tidRangeOffset += '\\x00\\x00';\n\t\tlet segCount = ranges.length + 1;\n\t\tlet searchRange = maxPower2(segCount) * 2;\n\t\tlet rangeShift = (2 * segCount) - searchRange;\n\t\tlet format314 =\n\t\t\t'\\x00\\x00' + // language\n\t\t\ttoString16(segCount * 2) + // segCountX2\n\t\t\ttoString16(searchRange) +\n\t\t\ttoString16(logE(segCount) / logE(2)) + // entrySelector\n\t\t\ttoString16(rangeShift) +\n\t\t\tendCount +\n\t\t\t'\\x00\\x00' + // reservedPad\n\t\t\tstartCount +\n\t\t\tidDelta +\n\t\t\tidRangeOffset\n\t\t;\n\t\ttables['cmap'] =\n\t\t\t'\\x00\\x00' + // version\n\t\t\t'\\x00\\x01' +  // numTables\n\t\t\t'\\x00\\x03' + // platformID\n\t\t\t'\\x00\\x01' + // encodingID\n\t\t\t'\\x00\\x00\\x00\\x0c' + // offset\n\t\t\t'\\x00\\x04' + // format\n\t\t\ttoString16(format314.length + 4) + // length\n\t\t\tformat314\n\t\t;\n\n\t\tlet glyf = '\\x00\\x01\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x31\\x00';\n\t\tlet loca = '\\x00\\x00';\n\t\tlet offset = 16;\n\t\tlet maxPoints = 0;\n\t\tlet xMins: Array<number> = [];\n\t\tlet xMaxs: Array<number> = [];\n\t\tlet yMins: Array<number> = [];\n\t\tlet yMaxs: Array<number> = [];\n\t\tlet maxContours = 0;\n\t\ti = 0;\n\t\tlet j;\n\t\tlet rawData: any = {};\n\t\tlet record;\n\t\tlet segments: any;\n\t\tlet myFlags = '';\n\t\tlet myEndpts = '';\n\t\tlet endPoint = 0;\n\t\twhile ((code = codes[i++]) !== undefined) {\n\t\t\tlet records = glyphs[glyphIndex[code]];\n\t\t\tlet x = 0;\n\t\t\tlet y = 0;\n\n\t\t\tmyFlags = '';\n\t\t\tmyEndpts = '';\n\t\t\tendPoint = 0;\n\t\t\tsegments = [];\n\t\t\tlet segmentIndex = -1;\n\n\t\t\tfor (j = 0; j < records.length; j++) {\n\t\t\t\trecord = records[j];\n\t\t\t\tif (record.type) {\n\t\t\t\t\tif (segmentIndex < 0) {\n\t\t\t\t\t\tsegmentIndex = 0;\n\t\t\t\t\t\tsegments[segmentIndex] = {data: [], commands: [], xMin: 0, xMax: 0, yMin: 0, yMax: 0};\n\t\t\t\t\t}\n\t\t\t\t\tif (record.flags & ShapeRecordFlags.IsStraight) {\n\t\t\t\t\t\tsegments[segmentIndex].commands.push(2);\n\t\t\t\t\t\tlet dx = (record.deltaX || 0) / resolution;\n\t\t\t\t\t\tlet dy = -(record.deltaY || 0) / resolution;\n\t\t\t\t\t\tx += dx;\n\t\t\t\t\t\ty += dy;\n\t\t\t\t\t\tsegments[segmentIndex].data.push(x, y);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsegments[segmentIndex].commands.push(3);\n\t\t\t\t\t\tlet cx = record.controlDeltaX / resolution;\n\t\t\t\t\t\tlet cy = -record.controlDeltaY / resolution;\n\t\t\t\t\t\tx += cx;\n\t\t\t\t\t\ty += cy;\n\t\t\t\t\t\tsegments[segmentIndex].data.push(x, y);\n\t\t\t\t\t\tlet dx = record.anchorDeltaX / resolution;\n\t\t\t\t\t\tlet dy = -record.anchorDeltaY / resolution;\n\t\t\t\t\t\tx += dx;\n\t\t\t\t\t\ty += dy;\n\t\t\t\t\t\tsegments[segmentIndex].data.push(x, y);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif ((record.flags & ShapeRecordFlags.Move) !== 0) {\n\t\t\t\t\t\tsegmentIndex++;\n\t\t\t\t\t\tsegments[segmentIndex] = {data: [], commands: [], xMin: 0, xMax: 0, yMin: 0, yMax: 0};\n\t\t\t\t\t\tsegments[segmentIndex].commands.push(1);\n\t\t\t\t\t\tlet moveX = record.moveX / resolution;\n\t\t\t\t\t\tlet moveY = -record.moveY / resolution;\n\t\t\t\t\t\tlet dx = moveX - x;\n\t\t\t\t\t\tlet dy = moveY - y;\n\t\t\t\t\t\tx = moveX;\n\t\t\t\t\t\ty = moveY;\n\t\t\t\t\t\tsegments[segmentIndex].data.push(x, y);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (segmentIndex > -1) {\n\t\t\t\t\tif (segments[segmentIndex].xMin > x) {\n\t\t\t\t\t\tsegments[segmentIndex].xMin = x;\n\t\t\t\t\t}\n\t\t\t\t\tif (segments[segmentIndex].yMin > y) {\n\t\t\t\t\t\tsegments[segmentIndex].yMin = y;\n\t\t\t\t\t}\n\t\t\t\t\tif (segments[segmentIndex].xMax < x) {\n\t\t\t\t\t\tsegments[segmentIndex].xMax = x;\n\t\t\t\t\t}\n\t\t\t\t\tif (segments[segmentIndex].yMax < y) {\n\t\t\t\t\t\tsegments[segmentIndex].yMax = y;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!isFont3) {\n\t\t\t\tsegments.sort(function (a: any, b: any) {\n\t\t\t\t\treturn (b.xMax - b.xMin) * (b.yMax - b.yMin) - (a.xMax - a.xMin) * (a.yMax - a.yMin);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\trawData[code] = segments;\n\t\t}\n\n\t\ti = 0;\n\t\twhile ((code = codes[i++]) !== undefined) {\n\t\t\tlet records = glyphs[glyphIndex[code]];\n\t\t\tsegments = rawData[code];\n\t\t\tlet numberOfContours = 1;\n\t\t\tendPoint = 0;\n\t\t\tlet endPtsOfContours = '';\n\t\t\tlet flags = '';\n\t\t\tlet xCoordinates = '';\n\t\t\tlet yCoordinates = '';\n\t\t\tlet x = 0;\n\t\t\tlet y = 0;\n\t\t\tlet xMin = 0;\n\t\t\tlet xMax = -1024;\n\t\t\tlet yMin = 0;\n\t\t\tlet yMax = -1024;\n\n\t\t\tlet myFlags = '';\n\t\t\tmyEndpts = '';\n\t\t\tlet segmentIndex = -1;\n\n\t\t\tlet data: any = [];\n\t\t\tlet commands: any = [];\n\n\t\t\tfor (j = 0; j < segments.length; j++) {\n\t\t\t\tdata = data.concat(segments[j].data);\n\t\t\t\tcommands = commands.concat(segments[j].commands);\n\t\t\t}\n\n\t\t\tx = 0;\n\t\t\ty = 0;\n\t\t\tlet nx = 0;\n\t\t\tlet ny = 0;\n\t\t\tlet myXCoordinates = '';\n\t\t\tlet myYCoordinates = '';\n\t\t\tlet dataIndex = 0;\n\t\t\tendPoint = 0;\n\t\t\tnumberOfContours = 1;\n\t\t\tmyEndpts = '';\n\t\t\tfor (j = 0; j < commands.length; j++) {\n\t\t\t\tlet command = commands[j];\n\t\t\t\tlet cx, cy;\n\t\t\t\tif (command === 1) {\n\t\t\t\t\tif (endPoint) {\n\t\t\t\t\t\t++numberOfContours;\n\t\t\t\t\t\tmyEndpts += toString16(endPoint - 1);\n\t\t\t\t\t}\n\t\t\t\t\tnx = data[dataIndex++];\n\t\t\t\t\tny = data[dataIndex++];\n\t\t\t\t\tlet dx = nx - x;\n\t\t\t\t\tlet dy = ny - y;\n\t\t\t\t\tmyFlags += '\\x01';\n\t\t\t\t\tmyXCoordinates += toString16(dx);\n\t\t\t\t\tmyYCoordinates += toString16(dy);\n\t\t\t\t\tx = nx;\n\t\t\t\t\ty = ny;\n\t\t\t\t} else if (command === 2) {\n\t\t\t\t\tnx = data[dataIndex++];\n\t\t\t\t\tny = data[dataIndex++];\n\t\t\t\t\tlet dx = nx - x;\n\t\t\t\t\tlet dy = ny - y;\n\t\t\t\t\tmyFlags += '\\x01';\n\t\t\t\t\tmyXCoordinates += toString16(dx);\n\t\t\t\t\tmyYCoordinates += toString16(dy);\n\t\t\t\t\tx = nx;\n\t\t\t\t\ty = ny;\n\t\t\t\t} else if (command === 3) {\n\t\t\t\t\tnx = data[dataIndex++];\n\t\t\t\t\tny = data[dataIndex++];\n\t\t\t\t\tcx = nx - x;\n\t\t\t\t\tcy = ny - y;\n\t\t\t\t\tmyFlags += '\\x00';\n\t\t\t\t\tmyXCoordinates += toString16(cx);\n\t\t\t\t\tmyYCoordinates += toString16(cy);\n\t\t\t\t\tx = nx;\n\t\t\t\t\ty = ny;\n\t\t\t\t\tendPoint++;\n\n\t\t\t\t\tnx = data[dataIndex++];\n\t\t\t\t\tny = data[dataIndex++];\n\t\t\t\t\tcx = nx - x;\n\t\t\t\t\tcy = ny - y;\n\t\t\t\t\tmyFlags += '\\x01';\n\t\t\t\t\tmyXCoordinates += toString16(cx);\n\t\t\t\t\tmyYCoordinates += toString16(cy);\n\t\t\t\t\tx = nx;\n\t\t\t\t\ty = ny;\n\t\t\t\t}\n\t\t\t\tendPoint++;\n\t\t\t\tif (endPoint > maxPoints) {\n\t\t\t\t\tmaxPoints = endPoint;\n\t\t\t\t}\n\t\t\t\tif (xMin > x) {\n\t\t\t\t\txMin = x;\n\t\t\t\t}\n\t\t\t\tif (yMin > y) {\n\t\t\t\t\tyMin = y;\n\t\t\t\t}\n\t\t\t\tif (xMax < x) {\n\t\t\t\t\txMax = x;\n\t\t\t\t}\n\t\t\t\tif (yMax < y) {\n\t\t\t\t\tyMax = y;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmyEndpts += toString16((endPoint || 1) - 1);\n\n\t\t\tendPtsOfContours = myEndpts;\n\t\t\txCoordinates = myXCoordinates;\n\t\t\tyCoordinates = myYCoordinates;\n\t\t\tflags = myFlags;\n\n\t\t\tif (!j) {\n\t\t\t\txMin = xMax = yMin = yMax = 0;\n\t\t\t\tflags += '\\x31';\n\t\t\t}\n\t\t\tlet entry =\n\t\t\t\ttoString16(numberOfContours) +\n\t\t\t\ttoString16(xMin) +\n\t\t\t\ttoString16(yMin) +\n\t\t\t\ttoString16(xMax) +\n\t\t\t\ttoString16(yMax) +\n\t\t\t\tendPtsOfContours +\n\t\t\t\t'\\x00\\x00' + // instructionLength\n\t\t\t\tflags +\n\t\t\t\txCoordinates +\n\t\t\t\tyCoordinates\n\t\t\t;\n\t\t\tif (entry.length & 1) {\n\t\t\t\tentry += '\\x00';\n\t\t\t}\n\t\t\tglyf += entry;\n\t\t\tloca += toString16(offset / 2);\n\t\t\toffset += entry.length;\n\t\t\txMins.push(xMin);\n\t\t\txMaxs.push(xMax);\n\t\t\tyMins.push(yMin);\n\t\t\tyMaxs.push(yMax);\n\t\t\tif (numberOfContours > maxContours) {\n\t\t\t\tmaxContours = numberOfContours;\n\t\t\t}\n\t\t\tif (endPoint > maxPoints) {\n\t\t\t\tmaxPoints = endPoint;\n\t\t\t}\n\t\t\tif (generateAdvancement) {\n\t\t\t\ttag.advance.push((xMax - xMin) * resolution * 1.3);\n\t\t\t}\n\t\t}\n\t\tloca += toString16(offset / 2);\n\t\ttables['glyf'] = glyf;\n\n\t\tif (!isFont3) {\n\t\t\tlet minYmin = Math.min.apply(null, yMins);\n\t\t\tif (minYmin < 0) {\n\t\t\t\tdescent = descent || minYmin;\n\t\t\t}\n\t\t}\n\n\t\ttables['OS/2'] =\n\t\t\t'\\x00\\x01' + // version\n\t\t\t'\\x00\\x00' + // xAvgCharWidth\n\t\t\ttoString16(font.bold ? 700 : 400) + // usWeightClass\n\t\t\t'\\x00\\x05' + // usWidthClass\n\t\t\t'\\x00\\x00' + // fstype\n\t\t\t'\\x00\\x00' + // ySubscriptXSize\n\t\t\t'\\x00\\x00' + // ySubscriptYSize\n\t\t\t'\\x00\\x00' + // ySubscriptXOffset\n\t\t\t'\\x00\\x00' + // ySubscriptYOffset\n\t\t\t'\\x00\\x00' + // ySuperScriptXSize\n\t\t\t'\\x00\\x00' + // ySuperScriptYSize\n\t\t\t'\\x00\\x00' + // ySuperScriptXOffset\n\t\t\t'\\x00\\x00' + // ySuperScriptYOffset\n\t\t\t'\\x00\\x00' + // yStrikeoutSize\n\t\t\t'\\x00\\x00' + // yStrikeoutPosition\n\t\t\t'\\x00\\x00' + // sFamilyClass\n\t\t\t'\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00' + // panose\n\t\t\t'\\x00\\x00\\x00\\x00' + // ulUnicodeRange1\n\t\t\t'\\x00\\x00\\x00\\x00' + // ulUnicodeRange2\n\t\t\t'\\x00\\x00\\x00\\x00' + // ulUnicodeRange3\n\t\t\t'\\x00\\x00\\x00\\x00' + // ulUnicodeRange4\n\t\t\t'ALF ' + // achVendID\n\t\t\ttoString16((font.italic ? 0x01 : 0) | (font.bold ? 0x20 : 0)) + // fsSelection\n\t\t\ttoString16(codes[0]) + // usFirstCharIndex\n\t\t\ttoString16(codes[codes.length - 1]) + // usLastCharIndex\n\t\t\ttoString16(ascent) + // sTypoAscender\n\t\t\ttoString16(descent) + // sTypoDescender\n\t\t\ttoString16(leading) + // sTypoLineGap\n\t\t\ttoString16(ascent) + // usWinAscent\n\t\t\ttoString16(-descent) + // usWinDescent\n\t\t\t'\\x00\\x00\\x00\\x00' + // ulCodePageRange1\n\t\t\t'\\x00\\x00\\x00\\x00' // ulCodePageRange2\n\t\t;\n\n\t\ttables['head'] =\n\t\t\t'\\x00\\x01\\x00\\x00' + // version\n\t\t\t'\\x00\\x01\\x00\\x00' + // fontRevision\n\t\t\t'\\x00\\x00\\x00\\x00' + // checkSumAdjustement\n\t\t\t'\\x5f\\x0f\\x3c\\xf5' + // magicNumber\n\t\t\t'\\x00\\x0b' + // flags\n\t\t\t'\\x04\\x00' + // unitsPerEm\n\t\t\t'\\x00\\x00\\x00\\x00' + toString32(Date.now()) + // created\n\t\t\t'\\x00\\x00\\x00\\x00' + toString32(Date.now()) + // modified\n\t\t\ttoString16(min.apply(null, xMins)) + // xMin\n\t\t\ttoString16(min.apply(null, yMins)) + // yMin\n\t\t\ttoString16(max.apply(null, xMaxs)) + // xMax\n\t\t\ttoString16(max.apply(null, yMaxs)) + // yMax\n\t\t\ttoString16((font.italic ? 2 : 0) | (font.bold ? 1 : 0)) + // macStyle\n\t\t\t'\\x00\\x08' + // lowestRecPPEM\n\t\t\t'\\x00\\x02' + // fontDirectionHint\n\t\t\t'\\x00\\x00' + // indexToLocFormat\n\t\t\t'\\x00\\x00' // glyphDataFormat\n\t\t;\n\n\t\tlet advance = tag.advance;\n\t\ttables['hhea'] =\n\t\t\t'\\x00\\x01\\x00\\x00' + // version\n\t\t\ttoString16(ascent) + // ascender\n\t\t\ttoString16(descent) + // descender\n\t\t\ttoString16(leading) + // lineGap\n\t\t\ttoString16(advance ? max.apply(null, advance) : 1024) + // advanceWidthMax\n\t\t\t'\\x00\\x00' + // minLeftSidebearing\n\t\t\t'\\x00\\x00' + // minRightSidebearing\n\t\t\t'\\x03\\xb8' + // xMaxExtent\n\t\t\t'\\x00\\x01' + // caretSlopeRise\n\t\t\t'\\x00\\x00' + // caretSlopeRun\n\t\t\t'\\x00\\x00' + // caretOffset\n\t\t\t'\\x00\\x00' + // reserved\n\t\t\t'\\x00\\x00' + // reserved\n\t\t\t'\\x00\\x00' + // reserved\n\t\t\t'\\x00\\x00' + // reserved\n\t\t\t'\\x00\\x00' + // metricDataFormat\n\t\t\ttoString16(glyphCount + 1) // numberOfHMetrics\n\t\t;\n\n\t\tlet hmtx = '\\x00\\x00\\x00\\x00';\n\t\tfor (let i = 0; i < glyphCount; ++i) {\n\t\t\thmtx += toString16(advance ? (advance[i] / resolution) : 1024) + '\\x00\\x00';\n\t\t}\n\t\ttables['hmtx'] = hmtx;\n\n\t\tif (tag.kerning && tag.kerning.length) {\n\t\t\tlet kerning = tag.kerning;\n\t\t\tlet nPairs = kerning.length;\n\t\t\tlet searchRange = maxPower2(nPairs) * 2;\n\t\t\tlet kern =\n\t\t\t\t'\\x00\\x00' + // version\n\t\t\t\t'\\x00\\x01' + // nTables\n\t\t\t\t'\\x00\\x00' + // subtable version\n\t\t\t\ttoString16(14 + (nPairs * 6)) + // length\n\t\t\t\t'\\x00\\x01' + // coverage\n\t\t\t\ttoString16(nPairs) +\n\t\t\t\ttoString16(searchRange) +\n\t\t\t\ttoString16(logE(nPairs) / logE(2)) + // entrySelector\n\t\t\t\ttoString16((2 * nPairs) - searchRange) // rangeShift\n\t\t\t;\n\t\t\tlet i = 0;\n\t\t\twhile ((record = kerning[i++])) {\n\t\t\t\tkern +=\n\t\t\t\t\ttoString16(glyphIndex[record.code1]) + // left\n\t\t\t\t\ttoString16(glyphIndex[record.code2]) + // right\n\t\t\t\t\ttoString16(record.adjustment) // value\n\t\t\t\t;\n\t\t\t}\n\t\t\ttables['kern'] = kern;\n\t\t}\n\n\t\ttables['loca'] = loca;\n\n\t\ttables['maxp'] =\n\t\t\t'\\x00\\x01\\x00\\x00' + // version\n\t\t\ttoString16(glyphCount + 1) + // numGlyphs\n\t\t\ttoString16(maxPoints) +\n\t\t\ttoString16(maxContours) +\n\t\t\t'\\x00\\x00' + // maxCompositePoints\n\t\t\t'\\x00\\x00' + // maxCompositeContours\n\t\t\t'\\x00\\x01' + // maxZones\n\t\t\t'\\x00\\x00' + // maxTwilightPoints\n\t\t\t'\\x00\\x00' + // maxStorage\n\t\t\t'\\x00\\x00' + // maxFunctionDefs\n\t\t\t'\\x00\\x00' + // maxInstructionDefs\n\t\t\t'\\x00\\x00' + // maxStackElements\n\t\t\t'\\x00\\x00' + // maxSizeOfInstructions\n\t\t\t'\\x00\\x00' + // maxComponentElements\n\t\t\t'\\x00\\x00' // maxComponentDepth\n\t\t;\n\n\t\tlet psName = fontName.replace(/ /g, '');\n\t\tlet strings = [\n\t\t\ttag.copyright || 'Original licence', // 0. Copyright\n\t\t\tfontName, // 1. Font family\n\t\t\t'Unknown', // 2. Font subfamily\n\t\t\tuniqueName, // 3. Unique ID\n\t\t\tfontName, // 4. Full font name\n\t\t\t'1.0', // 5. Version\n\t\t\tpsName, // 6. Postscript name\n\t\t\t'Unknown', // 7. Trademark\n\t\t\t'Unknown', // 8. Manufacturer\n\t\t\t'Unknown' // 9. Designer\n\t\t];\n\t\tlet count = strings.length;\n\t\tlet name =\n\t\t\t'\\x00\\x00' + // format\n\t\t\ttoString16(count) + // count\n\t\t\ttoString16((count * 12) + 6); // stringOffset\n\t\toffset = 0;\n\t\ti = 0;\n\t\tlet str;\n\t\twhile ((str = strings[i++])) {\n\t\t\tname +=\n\t\t\t\t'\\x00\\x01' + // platformID\n\t\t\t\t'\\x00\\x00' + // encodingID\n\t\t\t\t'\\x00\\x00' + // languageID\n\t\t\t\ttoString16(i - 1) + // nameID\n\t\t\t\ttoString16(str.length) +\n\t\t\t\ttoString16(offset);\n\t\t\toffset += str.length;\n\t\t}\n\t\ttables['name'] = name + strings.join('');\n\n\t\ttables['post'] =\n\t\t\t'\\x00\\x03\\x00\\x00' + // version\n\t\t\t'\\x00\\x00\\x00\\x00' + // italicAngle\n\t\t\t'\\x00\\x00' + // underlinePosition\n\t\t\t'\\x00\\x00' + // underlineThickness\n\t\t\t'\\x00\\x00\\x00\\x00' + // isFixedPitch\n\t\t\t'\\x00\\x00\\x00\\x00' + // minMemType42\n\t\t\t'\\x00\\x00\\x00\\x00' + // maxMemType42\n\t\t\t'\\x00\\x00\\x00\\x00' + // minMemType1\n\t\t\t'\\x00\\x00\\x00\\x00' // maxMemType1\n\t\t;\n\n\t\tlet names = Object.keys(tables);\n\t\tlet numTables = names.length;\n\t\tlet header =\n\t\t\t'\\x00\\x01\\x00\\x00' + // version\n\t\t\ttoString16(numTables) +\n\t\t\t'\\x00\\x80' + // searchRange\n\t\t\t'\\x00\\x03' + // entrySelector\n\t\t\t'\\x00\\x20' // rangeShift\n\t\t;\n\t\tlet dataString = '';\n\t\toffset = (numTables * 16) + header.length;\n\t\ti = 0;\n\t\twhile ((name = names[i++])) {\n\t\t\tlet table = tables[name];\n\t\t\tlet length = table.length;\n\t\t\theader +=\n\t\t\t\tname +\n\t\t\t\t'\\x00\\x00\\x00\\x00' + // checkSum\n\t\t\t\ttoString32(offset) +\n\t\t\t\ttoString32(length)\n\t\t\t;\n\t\t\twhile (length & 3) {\n\t\t\t\ttable += '\\x00';\n\t\t\t\t++length;\n\t\t\t}\n\t\t\tdataString += table;\n\t\t\twhile (offset & 3) {\n\t\t\t\t++offset;\n\t\t\t}\n\t\t\toffset += length;\n\t\t}\n\t\tlet otf = header + dataString;\n\t\tlet unitPerEm = 1024;\n\t\tlet metrics = {\n\t\t\tascent: ascent / unitPerEm,\n\t\t\tdescent: -descent / unitPerEm,\n\t\t\tleading: leading / unitPerEm\n\t\t};\n\n\t\t// TODO: use a buffer to generate font data\n\t\tlet dataBuffer = new Uint8Array(otf.length);\n\t\tfor (let i = 0; i < otf.length; i++) {\n\t\t\tdataBuffer[i] = otf.charCodeAt(i) & 0xff;\n\t\t}\n\n\t\tfont.codes = originalCode;\n\t\tfont.metrics = metrics;\n\t\tfont.data = dataBuffer;\n\n\t\treturn font;\n\t}\n}\n","/*\n * Copyright 2013 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/// <reference path='references.ts'/>\nmodule Shumway.SWF.Parser {\n\timport assert = Shumway.Debug.assert;\n\timport Inflate = Shumway.ArrayUtilities.Inflate;\n\n\t/**\n\t * Reads the next two bytes at the specified position.\n\t */\n\tfunction readUint16(bytes: Uint8Array, position: number) {\n\t\treturn (bytes[position] << 8) | bytes[position + 1];\n\t}\n\n\t/**\n\t * Reads the next four bytes at the specified position.\n\t */\n\tfunction readInt32(bytes: Uint8Array, position: number) {\n\t\treturn (bytes[position] << 24) | (bytes[position + 1] << 16) |\n\t\t\t(bytes[position + 2] << 8) | bytes[position + 3];\n\t}\n\n\t/**\n\t * Parses JPEG chunks and reads image width and height information. JPEG data\n\t * in SWFs is encoded in chunks and not directly decodable by the JPEG parser.\n\t */\n\texport function parseJpegChunks(bytes: Uint8Array,\n\t                                chunks: Uint8Array[]): void {\n\t\tlet i = 0;\n\t\tlet n = bytes.length;\n\t\t// Finding first marker, and skipping the data before this marker.\n\t\t// (FF 00 - code is escaped FF; FF FF ... (FF xx) - fill bytes before marker).\n\t\twhile (i < n && (bytes[i] !== 0xff ||\n\t\t\t(i + 1 < n && (bytes[i + 1] === 0x00 || bytes[i + 1] === 0xff)))) {\n\t\t\t++i;\n\t\t}\n\t\tif (i >= n) {\n\t\t\treturn; // no valid data was found\n\t\t}\n\n\t\tdo {\n\t\t\trelease || Debug.assert(bytes[i] === 0xff);\n\t\t\tlet begin = i++;\n\t\t\tlet code = bytes[i++];\n\n\t\t\t// Some tags have length field -- using it\n\t\t\tif ((code >= 0xc0 && code <= 0xc7) || (code >= 0xc9 && code <= 0xcf) ||\n\t\t\t\t(code >= 0xda && code <= 0xef) || code === 0xfe) {\n\t\t\t\tlet length = readUint16(bytes, i);\n\t\t\t\ti += length;\n\t\t\t}\n\n\t\t\t// Finding next marker.\n\t\t\twhile (i < n && (bytes[i] !== 0xff ||\n\t\t\t\t(i + 1 < n && (bytes[i + 1] === 0x00 || bytes[i + 1] === 0xff)))) {\n\t\t\t\t++i;\n\t\t\t}\n\n\t\t\tif (code === 0xd8 || code === 0xd9) {\n\t\t\t\t// Removing SOI and EOI to avoid wrong EOI-SOI pairs in the middle.\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tchunks.push(bytes.subarray(begin, i));\n\t\t} while (i < n);\n\t}\n\n\t/**\n\t * Extracts PNG width and height information.\n\t */\n\texport function parsePngHeaders(image: any, bytes: Uint8Array): void {\n\t\tlet ihdrOffset = 12;\n\t\tif (bytes[ihdrOffset] !== 0x49 || bytes[ihdrOffset + 1] !== 0x48 ||\n\t\t\tbytes[ihdrOffset + 2] !== 0x44 || bytes[ihdrOffset + 3] !== 0x52) {\n\t\t\treturn;\n\t\t}\n\t\timage.width = readInt32(bytes, ihdrOffset + 4);\n\t\timage.height = readInt32(bytes, ihdrOffset + 8);\n\t\tlet type = bytes[ihdrOffset + 13];\n\t\timage.hasAlpha = type === 4 || type === 6;\n\t}\n\n\t/**\n\t * Joins all the chunks in a larger byte array.\n\t */\n\tfunction joinChunks(chunks: Uint8Array []): Uint8Array {\n\t\tlet length = 0;\n\t\tfor (let i = 0; i < chunks.length; i++) {\n\t\t\tlength += chunks[i].length;\n\t\t}\n\t\tlet bytes = new Uint8Array(length);\n\t\tlet offset = 0;\n\t\tfor (let i = 0; i < chunks.length; i++) {\n\t\t\tlet chunk = chunks[i];\n\t\t\tbytes.set(chunk, offset);\n\t\t\toffset += chunk.length;\n\t\t}\n\t\treturn bytes;\n\t}\n\n\texport interface ImageDefinition {\n\t\ttype: string;\n\t\tid: number;\n\t\twidth: number;\n\t\theight: number;\n\t\tmimeType: string;\n\t\tdata: Uint8Array;\n\t\tdataType?: ImageType;\n\t\timage: any; // For some reason, tsc doesn't like us using the DOM Image definition here.\n\t}\n\n\texport interface JPEGTablesState {\n\t\tdata: Uint8Array;\n\t\tparsedChunks?: Uint8Array[]; // Cached parsing results\n\t}\n\n\tfunction injectJPEGTables(chunks: Uint8Array[], state: JPEGTablesState): void {\n\t\tif (!state.parsedChunks) {\n\t\t\tlet parsedChunks: Uint8Array[] = [];\n\t\t\tparseJpegChunks(state.data, parsedChunks);\n\t\t\tstate.parsedChunks = parsedChunks;\n\t\t}\n\t\t// Finding first SOF and inserting tables there\n\t\tlet i = 0;\n\t\twhile (i < chunks.length &&\n\t\t!(chunks[i][1] >= 0xc0 && chunks[i][1] <= 0xc0)) {\n\t\t\ti++;\n\t\t}\n\t\tArray.prototype.splice.apply(chunks,\n\t\t\tArray.prototype.concat.call([i, 0], state.parsedChunks));\n\t}\n\n\tlet JPEG_SOI = new Uint8Array([0xff, 0xd8]);\n\tlet JPEG_EOI = new Uint8Array([0xff, 0xd9]);\n\n\texport function defineImage(tag: ImageTag): ImageDefinition {\n\t\tenterTimeline(\"defineImage\");\n\t\tlet image: any = {\n\t\t\ttype: 'image',\n\t\t\tid: tag.id,\n\t\t\tmimeType: tag.mimeType\n\t\t};\n\t\tlet imgData = tag.imgData;\n\n\t\tif (tag.mimeType === 'image/jpeg') {\n\t\t\t// Parsing/repairing the SWF JPEG data.\n\t\t\tlet chunks: Uint8Array[] = [];\n\t\t\tchunks.push(JPEG_SOI);\n\t\t\tparseJpegChunks(imgData, chunks);\n\t\t\tif (tag.jpegTables) {\n\t\t\t\tinjectJPEGTables(chunks, tag.jpegTables);\n\t\t\t}\n\t\t\tchunks.push(JPEG_EOI);\n\t\t\t// Finding SOF to extract image size.\n\t\t\tchunks.forEach(function (chunk: Uint8Array) {\n\t\t\t\tlet code = chunk[1];\n\t\t\t\tif (code >= 0xc0 && code <= 0xc3) {\n\t\t\t\t\timage.height = readUint16(chunk, 5);\n\t\t\t\t\timage.width = readUint16(chunk, 7);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\timage.data = joinChunks(chunks);\n\t\t\timage.dataType = ImageType.JPEG;\n\n\t\t\tlet alphaData: Uint8Array = tag.alphaData;\n\t\t\tif (alphaData) {\n\t\t\t\tlet length = image.width * image.height;\n\t\t\t\ttry {\n\t\t\t\t\timage.alphaData = Inflate.inflate(alphaData, length, true);\n\t\t\t\t} catch (e) {\n\t\t\t\t\t// Alpha layer is invalid, so hiding everything.\n\t\t\t\t\timage.alphaData = new Uint8Array(length);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tparsePngHeaders(image, imgData);\n\t\t\timage.data = imgData;\n\t\t\timage.dataType = ImageType.PNG;\n\t\t}\n\t\tleaveTimeline();\n\t\treturn image;\n\t}\n}\n","/**\n * Copyright 2014 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/// <reference path='references.ts'/>\nmodule Shumway.SWF.Parser {\n\texport function defineLabel(tag: StaticTextTag) {\n\t\tlet label = {\n\t\t\ttype: 'label',\n\t\t\tid: tag.id,\n\t\t\tfillBounds: tag.bbox,\n\t\t\tmatrix: tag.matrix,\n\t\t\ttag: {\n\t\t\t\thasText: true,\n\t\t\t\tinitialText: '',\n\t\t\t\thtml: true,\n\t\t\t\treadonly: true\n\t\t\t},\n\t\t\trecords: tag.records,\n\t\t\tcoords: null as any,\n\t\t\tstatic: true,\n\t\t\trequire: null as any\n\t\t};\n\t\treturn label;\n\t}\n}\n","/**\n * Copyright 2014 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/// <reference path='references.ts'/>\nmodule Shumway.SWF.Parser {\n\timport PathCommand = Shumway.PathCommand;\n\timport GradientType = Shumway.GradientType;\n\timport GradientSpreadMethod = Shumway.GradientSpreadMethod;\n\timport GradientInterpolationMethod = Shumway.GradientInterpolationMethod;\n\timport Bounds = Shumway.Bounds;\n\timport DataBuffer = Shumway.ArrayUtilities.DataBuffer;\n\timport ShapeData = Shumway.ShapeData;\n\timport ShapeMatrix = Shumway.ShapeMatrix;\n\timport clamp = Shumway.NumberUtilities.clamp;\n\timport assert = Shumway.Debug.assert;\n\timport assertUnreachable = Shumway.Debug.assertUnreachable;\n\tlet push = Array.prototype.push;\n\n\tenum FillType {\n\t\tSolid = 0,\n\t\tLinearGradient = 0x10,\n\t\tRadialGradient = 0x12,\n\t\tFocalRadialGradient = 0x13,\n\t\tRepeatingBitmap = 0x40,\n\t\tClippedBitmap = 0x41,\n\t\tNonsmoothedRepeatingBitmap = 0x42,\n\t\tNonsmoothedClippedBitmap = 0x43,\n\t}\n\n\t/*\n\t * Applies the current segment to the paths of all styles specified in the last\n\t * style-change record.\n\t *\n\t * For fill0, we have to apply commands and their data in reverse order, to turn\n\t * left fills into right ones.\n\t *\n\t * If we have more than one style, we only recorded commands for the first one\n\t * and have to duplicate them for the other styles. The order is: fill1, line,\n\t * fill0. (That means we only ever recorded into fill0 if that's the only style.)\n\t */\n\tfunction applySegmentToStyles(segment: PathSegment, styles: any,\n\t                              linePaths: SegmentedPath[], fillPaths: SegmentedPath[]) {\n\t\tif (!segment) {\n\t\t\treturn;\n\t\t}\n\t\tlet path: SegmentedPath;\n\t\tif (styles.fill0) {\n\t\t\tpath = fillPaths[styles.fill0 - 1];\n\t\t\t// If fill0 is the only style, we have pushed the segment to its stack. In\n\t\t\t// that case, just mark it as reversed and move on.\n\t\t\tif (!(styles.fill1 || styles.line)) {\n\t\t\t\tsegment.isReversed = true;\n\t\t\t\treturn;\n\t\t\t} else {\n\t\t\t\tpath.addSegment(segment.toReversed());\n\t\t\t}\n\t\t}\n\t\tif (styles.line && styles.fill1) {\n\t\t\tpath = linePaths[styles.line - 1];\n\t\t\tpath.addSegment(segment.clone());\n\t\t}\n\t}\n\n\t/*\n\t * Converts records from the space-optimized format they're stored in to a\n\t * format that's more amenable to fast rendering.\n\t *\n\t * See http://blogs.msdn.com/b/mswanson/archive/2006/02/27/539749.aspx and\n\t * http://wahlers.com.br/claus/blog/hacking-swf-1-shapes-in-flash/ for details.\n\t */\n\tfunction convertRecordsToShapeData(records: ShapeRecord[], fillPaths: SegmentedPath[],\n\t                                   linePaths: SegmentedPath[], dependencies: number[],\n\t                                   recordsMorph: ShapeRecord[]): ShapeData {\n\t\tlet isMorph = recordsMorph !== null;\n\t\tlet styles = {fill0: 0, fill1: 0, line: 0};\n\t\tlet segment: PathSegment = null;\n\n\t\t// Fill- and line styles can be added by style change records in the middle of\n\t\t// a shape records list. This also causes the previous paths to be treated as\n\t\t// a group, so the lines don't get moved on top of any following fills.\n\t\t// To support this, we just append all current fill and line paths to a list\n\t\t// when new styles are introduced.\n\t\tlet allPaths: SegmentedPath[];\n\t\t// If no style is set for a segment of a path, a 1px transparent line is used.\n\t\tlet defaultPath: SegmentedPath;\n\n\t\tlet numRecords = records.length;\n\t\tlet x: number = 0;\n\t\tlet y: number = 0;\n\t\tlet morphX: number = 0;\n\t\tlet morphY: number = 0;\n\t\tlet path: SegmentedPath;\n\t\tfor (let i = 0, j = 0; i < numRecords; i++) {\n\t\t\tlet record = records[i];\n\t\t\tlet morphRecord: ShapeRecord;\n\t\t\tif (isMorph) {\n\t\t\t\tmorphRecord = recordsMorph[j++];\n\t\t\t}\n\t\t\t// type 0 is a StyleChange record\n\t\t\tif (record.type === 0) {\n\t\t\t\t//TODO: make the `has*` fields bitflags\n\t\t\t\tif (segment) {\n\t\t\t\t\tapplySegmentToStyles(segment, styles, linePaths, fillPaths);\n\t\t\t\t}\n\n\t\t\t\tif (record.flags & ShapeRecordFlags.HasNewStyles) {\n\t\t\t\t\tif (!allPaths) {\n\t\t\t\t\t\tallPaths = [];\n\t\t\t\t\t}\n\t\t\t\t\tpush.apply(allPaths, fillPaths);\n\t\t\t\t\tfillPaths = createPathsList(record.fillStyles, false, isMorph, dependencies);\n\t\t\t\t\tpush.apply(allPaths, linePaths);\n\t\t\t\t\tlinePaths = createPathsList(record.lineStyles, true, isMorph, dependencies);\n\t\t\t\t\tif (defaultPath) {\n\t\t\t\t\t\tallPaths.push(defaultPath);\n\t\t\t\t\t\tdefaultPath = null;\n\t\t\t\t\t}\n\t\t\t\t\tstyles = {fill0: 0, fill1: 0, line: 0};\n\t\t\t\t}\n\n\t\t\t\tif ((record.flags & ShapeRecordFlags.HasFillStyle0) !== 0) {\n\t\t\t\t\tstyles.fill0 = record.fillStyle0;\n\t\t\t\t}\n\t\t\t\tif ((record.flags & ShapeRecordFlags.HasFillStyle1) !== 0) {\n\t\t\t\t\tstyles.fill1 = record.fillStyle1;\n\t\t\t\t}\n\t\t\t\tif ((record.flags & ShapeRecordFlags.HasLineStyle) !== 0) {\n\t\t\t\t\tstyles.line = record.lineStyle;\n\t\t\t\t}\n\t\t\t\tif (styles.fill1) {\n\t\t\t\t\tpath = fillPaths[styles.fill1 - 1];\n\t\t\t\t} else if (styles.line) {\n\t\t\t\t\tpath = linePaths[styles.line - 1];\n\t\t\t\t} else if (styles.fill0) {\n\t\t\t\t\tpath = fillPaths[styles.fill0 - 1];\n\t\t\t\t}\n\n\t\t\t\tif (record.flags & ShapeRecordFlags.Move) {\n\t\t\t\t\tx = record.moveX | 0;\n\t\t\t\t\ty = record.moveY | 0;\n\t\t\t\t\t// When morphed, StyleChangeRecords/MoveTo might not have a\n\t\t\t\t\t// corresponding record in the start or end shape --\n\t\t\t\t\t// processing morphRecord below before converting type 1 records.\n\t\t\t\t}\n\n\t\t\t\t// Very first record can be just fill/line-style definition record.\n\t\t\t\tif (path) {\n\t\t\t\t\tsegment = PathSegment.FromDefaults(isMorph);\n\t\t\t\t\tpath.addSegment(segment);\n\n\t\t\t\t\t// Move or not, we want this path segment to start where the last one\n\t\t\t\t\t// left off. Even if the last one belonged to a different style.\n\t\t\t\t\t// \"Huh,\" you say? Yup.\n\t\t\t\t\tif (!isMorph) {\n\t\t\t\t\t\tsegment.moveTo(x, y);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (morphRecord.type === 0) {\n\t\t\t\t\t\t\tmorphX = morphRecord.moveX | 0;\n\t\t\t\t\t\t\tmorphY = morphRecord.moveY | 0;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tmorphX = x;\n\t\t\t\t\t\t\tmorphY = y;\n\t\t\t\t\t\t\t// Not all moveTos are reflected in morph data.\n\t\t\t\t\t\t\t// In that case, decrease morph data index.\n\t\t\t\t\t\t\tj--;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsegment.morphMoveTo(x, y, morphX, morphY);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t// type 1 is a StraightEdge or CurvedEdge record\n\t\t\telse {\n\t\t\t\trelease || assert(record.type === 1);\n\t\t\t\tif (!segment) {\n\t\t\t\t\tif (!defaultPath) {\n\t\t\t\t\t\tlet style = {color: {red: 0, green: 0, blue: 0, alpha: 0}, width: 20};\n\t\t\t\t\t\tdefaultPath = new SegmentedPath(null, processStyle(style, true, isMorph, dependencies));\n\t\t\t\t\t}\n\t\t\t\t\tsegment = PathSegment.FromDefaults(isMorph);\n\t\t\t\t\tdefaultPath.addSegment(segment);\n\t\t\t\t\tif (!isMorph) {\n\t\t\t\t\t\tsegment.moveTo(x, y);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsegment.morphMoveTo(x, y, morphX, morphY);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (isMorph) {\n\t\t\t\t\t// An invalid SWF might contain a move in the EndEdges list where the\n\t\t\t\t\t// StartEdges list contains an edge. The Flash Player seems to skip it,\n\t\t\t\t\t// so we do, too.\n\t\t\t\t\twhile (morphRecord && morphRecord.type === 0) {\n\t\t\t\t\t\tmorphRecord = recordsMorph[j++];\n\t\t\t\t\t}\n\t\t\t\t\t// The EndEdges list might be shorter than the StartEdges list. Reuse\n\t\t\t\t\t// start edges as end edges in that case.\n\t\t\t\t\tif (!morphRecord) {\n\t\t\t\t\t\tmorphRecord = record;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (record.flags & ShapeRecordFlags.IsStraight &&\n\t\t\t\t\t(!isMorph || (morphRecord.flags & ShapeRecordFlags.IsStraight) !== 0)) {\n\t\t\t\t\tx += record.deltaX | 0;\n\t\t\t\t\ty += record.deltaY | 0;\n\t\t\t\t\tif (!isMorph) {\n\t\t\t\t\t\tsegment.lineTo(x, y);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmorphX += morphRecord.deltaX | 0;\n\t\t\t\t\t\tmorphY += morphRecord.deltaY | 0;\n\t\t\t\t\t\tsegment.morphLineTo(x, y, morphX, morphY);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tlet cx, cy;\n\t\t\t\t\tlet deltaX, deltaY;\n\t\t\t\t\tif ((record.flags & ShapeRecordFlags.IsStraight) === 0) {\n\t\t\t\t\t\tcx = x + record.controlDeltaX | 0;\n\t\t\t\t\t\tcy = y + record.controlDeltaY | 0;\n\t\t\t\t\t\tx = cx + record.anchorDeltaX | 0;\n\t\t\t\t\t\ty = cy + record.anchorDeltaY | 0;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdeltaX = record.deltaX | 0;\n\t\t\t\t\t\tdeltaY = record.deltaY | 0;\n\t\t\t\t\t\tcx = x + (deltaX >> 1);\n\t\t\t\t\t\tcy = y + (deltaY >> 1);\n\t\t\t\t\t\tx += deltaX;\n\t\t\t\t\t\ty += deltaY;\n\t\t\t\t\t}\n\t\t\t\t\tif (!isMorph) {\n\t\t\t\t\t\tsegment.curveTo(cx, cy, x, y);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlet morphCX, morphCY;\n\t\t\t\t\t\tif ((morphRecord.flags & ShapeRecordFlags.IsStraight) === 0) {\n\t\t\t\t\t\t\tmorphCX = morphX + morphRecord.controlDeltaX | 0;\n\t\t\t\t\t\t\tmorphCY = morphY + morphRecord.controlDeltaY | 0;\n\t\t\t\t\t\t\tmorphX = morphCX + morphRecord.anchorDeltaX | 0;\n\t\t\t\t\t\t\tmorphY = morphCY + morphRecord.anchorDeltaY | 0;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tdeltaX = morphRecord.deltaX | 0;\n\t\t\t\t\t\t\tdeltaY = morphRecord.deltaY | 0;\n\t\t\t\t\t\t\tmorphCX = morphX + (deltaX >> 1);\n\t\t\t\t\t\t\tmorphCY = morphY + (deltaY >> 1);\n\t\t\t\t\t\t\tmorphX += deltaX;\n\t\t\t\t\t\t\tmorphY += deltaY;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsegment.morphCurveTo(cx, cy, x, y, morphCX, morphCY, morphX, morphY);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tapplySegmentToStyles(segment, styles, linePaths, fillPaths);\n\n\t\t// All current paths get appended to the allPaths list at the end. First fill,\n\t\t// then line paths.\n\t\tif (allPaths) {\n\t\t\tpush.apply(allPaths, fillPaths);\n\t\t} else {\n\t\t\tallPaths = fillPaths;\n\t\t}\n\t\tpush.apply(allPaths, linePaths);\n\t\tif (defaultPath) {\n\t\t\tallPaths.push(defaultPath);\n\t\t}\n\n\t\tlet shape: ShapeData = new ShapeData();\n\t\tif (isMorph) {\n\t\t\tshape.morphCoordinates = new Int32Array(shape.coordinates.length);\n\t\t\tshape.morphStyles = new DataBuffer(16);\n\t\t}\n\t\tfor (let i = 0; i < allPaths.length; i++) {\n\t\t\tallPaths[i].serialize(shape);\n\t\t}\n\t\treturn shape;\n\t}\n\n\tinterface ShapeStyle {\n\t\ttype: number;\n\n\t\tfillType?: number;\n\t\twidth?: number;\n\t\tpixelHinting?: boolean;\n\t\tnoHscale?: boolean;\n\t\tnoVscale?: boolean;\n\t\tendCapsStyle?: number;\n\t\tjointStyle?: number;\n\t\tmiterLimit?: number;\n\n\t\tcolor?: number;\n\n\t\ttransform?: ShapeMatrix;\n\t\tcolors?: number[];\n\t\tratios?: number[];\n\t\tspreadMethod?: number;\n\t\tinterpolationMode?: number;\n\t\tfocalPoint?: number;\n\t\tbitmapId?: number;\n\t\tbitmapIndex?: number;\n\t\trepeat?: boolean;\n\t\tsmooth?: boolean;\n\n\t\tmorph: ShapeStyle\n\t}\n\n\tlet IDENTITY_MATRIX: ShapeMatrix = {a: 1, b: 0, c: 0, d: 1, tx: 0, ty: 0};\n\n\tfunction processStyle(style: any, isLineStyle: boolean, isMorph: boolean,\n\t                      dependencies: number[]): ShapeStyle {\n\t\tlet shapeStyle: ShapeStyle = style;\n\t\tif (isMorph) {\n\t\t\tshapeStyle.morph = processMorphStyle(style, isLineStyle, dependencies);\n\t\t}\n\t\tif (isLineStyle) {\n\t\t\tshapeStyle.miterLimit = (style.miterLimitFactor || 1.5) * 2;\n\t\t\tif (!style.color && style.hasFill) {\n\t\t\t\tlet fillStyle = processStyle(style.fillStyle, false, false, dependencies);\n\t\t\t\tshapeStyle.type = fillStyle.type;\n\t\t\t\tshapeStyle.transform = fillStyle.transform;\n\t\t\t\tshapeStyle.colors = fillStyle.colors;\n\t\t\t\tshapeStyle.ratios = fillStyle.ratios;\n\t\t\t\tshapeStyle.focalPoint = fillStyle.focalPoint;\n\t\t\t\tshapeStyle.bitmapId = fillStyle.bitmapId;\n\t\t\t\tshapeStyle.bitmapIndex = fillStyle.bitmapIndex;\n\t\t\t\tshapeStyle.repeat = fillStyle.repeat;\n\t\t\t\tstyle.fillStyle = null;\n\t\t\t\treturn shapeStyle;\n\t\t\t} else {\n\t\t\t\tshapeStyle.type = FillType.Solid;\n\t\t\t\treturn shapeStyle;\n\t\t\t}\n\t\t}\n\t\tif (style.type === undefined || style.type === FillType.Solid) {\n\t\t\treturn shapeStyle;\n\t\t}\n\t\tlet scale;\n\t\tswitch (style.type) {\n\t\t\tcase FillType.LinearGradient:\n\t\t\tcase FillType.RadialGradient:\n\t\t\tcase FillType.FocalRadialGradient:\n\t\t\t\tlet records = style.records;\n\t\t\t\tlet colors: Array<any> = shapeStyle.colors = [];\n\t\t\t\tlet ratios: Array<any> = shapeStyle.ratios = [];\n\t\t\t\tfor (let i = 0; i < records.length; i++) {\n\t\t\t\t\tlet record = records[i];\n\t\t\t\t\tcolors.push(record.color);\n\t\t\t\t\tratios.push(record.ratio);\n\t\t\t\t}\n\t\t\t\tscale = 819.2;\n\t\t\t\tbreak;\n\t\t\tcase FillType.RepeatingBitmap:\n\t\t\tcase FillType.ClippedBitmap:\n\t\t\tcase FillType.NonsmoothedRepeatingBitmap:\n\t\t\tcase FillType.NonsmoothedClippedBitmap:\n\t\t\t\tshapeStyle.smooth = style.type !== FillType.NonsmoothedRepeatingBitmap &&\n\t\t\t\t\tstyle.type !== FillType.NonsmoothedClippedBitmap;\n\t\t\t\tshapeStyle.repeat = style.type !== FillType.ClippedBitmap &&\n\t\t\t\t\tstyle.type !== FillType.NonsmoothedClippedBitmap;\n\t\t\t\tlet index = dependencies.indexOf(style.bitmapId);\n\t\t\t\tif (index === -1) {\n\t\t\t\t\tindex = dependencies.length;\n\t\t\t\t\tdependencies.push(style.bitmapId);\n\t\t\t\t}\n\t\t\t\tshapeStyle.bitmapIndex = index;\n\t\t\t\tscale = 0.05;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tDebug.warning('shape parser encountered invalid fill style ' + style.type);\n\t\t}\n\t\tif (!style.matrix) {\n\t\t\tshapeStyle.transform = IDENTITY_MATRIX;\n\t\t\treturn shapeStyle;\n\t\t}\n\t\tlet matrix = style.matrix;\n\t\tshapeStyle.transform = {\n\t\t\ta: (matrix.a * scale),\n\t\t\tb: (matrix.b * scale),\n\t\t\tc: (matrix.c * scale),\n\t\t\td: (matrix.d * scale),\n\t\t\ttx: matrix.tx / 20,\n\t\t\tty: matrix.ty / 20\n\t\t};\n\t\t// null data that's unused from here on out\n\t\tstyle.matrix = null;\n\t\treturn shapeStyle;\n\t}\n\n\tfunction processMorphStyle(style: any, isLineStyle: boolean, dependencies: number[]): ShapeStyle {\n\t\tlet morphStyle: ShapeStyle = Object.create(style);\n\t\tif (isLineStyle) {\n\t\t\tmorphStyle.width = style.widthMorph;\n\t\t\tif (!style.color && style.hasFill) {\n\t\t\t\tlet fillStyle = processMorphStyle(style.fillStyle, false, dependencies);\n\t\t\t\tmorphStyle.transform = fillStyle.transform;\n\t\t\t\tmorphStyle.colors = fillStyle.colors;\n\t\t\t\tmorphStyle.ratios = fillStyle.ratios;\n\t\t\t\treturn morphStyle;\n\t\t\t} else {\n\t\t\t\tmorphStyle.color = style.colorMorph;\n\t\t\t\treturn morphStyle;\n\t\t\t}\n\t\t}\n\t\tif (style.type === undefined) {\n\t\t\treturn morphStyle;\n\t\t}\n\t\tif (style.type === FillType.Solid) {\n\t\t\tmorphStyle.color = style.colorMorph;\n\t\t\treturn morphStyle;\n\t\t}\n\t\tlet scale;\n\t\tswitch (style.type) {\n\t\t\tcase FillType.LinearGradient:\n\t\t\tcase FillType.RadialGradient:\n\t\t\tcase FillType.FocalRadialGradient:\n\t\t\t\tlet records = style.records;\n\t\t\t\tlet colors: Array<any> = morphStyle.colors = [];\n\t\t\t\tlet ratios: Array<any> = morphStyle.ratios = [];\n\t\t\t\tfor (let i = 0; i < records.length; i++) {\n\t\t\t\t\tlet record = records[i];\n\t\t\t\t\tcolors.push(record.colorMorph);\n\t\t\t\t\tratios.push(record.ratioMorph);\n\t\t\t\t}\n\t\t\t\tscale = 819.2;\n\t\t\t\tbreak;\n\t\t\tcase FillType.RepeatingBitmap:\n\t\t\tcase FillType.ClippedBitmap:\n\t\t\tcase FillType.NonsmoothedRepeatingBitmap:\n\t\t\tcase FillType.NonsmoothedClippedBitmap:\n\t\t\t\tscale = 0.05;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\trelease || assertUnreachable('shape parser encountered invalid fill style');\n\t\t}\n\t\tif (!style.matrix) {\n\t\t\tmorphStyle.transform = IDENTITY_MATRIX;\n\t\t\treturn morphStyle;\n\t\t}\n\t\tlet matrix = style.matrixMorph;\n\t\tmorphStyle.transform = {\n\t\t\ta: (matrix.a * scale),\n\t\t\tb: (matrix.b * scale),\n\t\t\tc: (matrix.c * scale),\n\t\t\td: (matrix.d * scale),\n\t\t\ttx: matrix.tx / 20,\n\t\t\tty: matrix.ty / 20\n\t\t};\n\t\treturn morphStyle;\n\t}\n\n\t/*\n\t * Paths are stored in 2-dimensional arrays. Each of the inner arrays contains\n\t * all the paths for a certain fill or line style.\n\t */\n\tfunction createPathsList(styles: any[], isLineStyle: boolean, isMorph: boolean,\n\t                         dependencies: number[]): SegmentedPath[] {\n\t\tlet paths: SegmentedPath[] = [];\n\t\tfor (let i = 0; i < styles.length; i++) {\n\t\t\tlet style = processStyle(styles[i], isLineStyle, isMorph, dependencies);\n\t\t\tif (!isLineStyle) {\n\t\t\t\tpaths[i] = new SegmentedPath(style, null);\n\t\t\t} else {\n\t\t\t\tpaths[i] = new SegmentedPath(null, style);\n\t\t\t}\n\t\t}\n\t\treturn paths;\n\t}\n\n\texport function defineShape(tag: ShapeTag) {\n\t\tlet dependencies: Array<any> = [];\n\t\tlet fillPaths = createPathsList(tag.fillStyles, false, !!tag.recordsMorph, dependencies);\n\t\tlet linePaths = createPathsList(tag.lineStyles, true, !!tag.recordsMorph, dependencies);\n\t\tlet shape = convertRecordsToShapeData(tag.records, fillPaths, linePaths,\n\t\t\tdependencies, tag.recordsMorph || null);\n\t\treturn {\n\t\t\ttype: tag.flags & ShapeFlags.IsMorph ? 'morphshape' : 'shape',\n\t\t\tid: tag.id,\n\t\t\tfillBounds: tag.fillBounds,\n\t\t\tlineBounds: tag.lineBounds,\n\t\t\tmorphFillBounds: tag.fillBoundsMorph || null,\n\t\t\tmorphLineBounds: tag.lineBoundsMorph || null,\n\t\t\tshape: shape.toPlainObject(),\n\t\t\ttransferables: shape.buffers,\n\t\t\trequire: dependencies.length ? dependencies : null\n\t\t};\n\t}\n\n\tclass PathSegment {\n\n\t\tprivate static _counter = 0;\n\t\tpublic id: number;\n\t\tprivate startPoint: string;\n\t\tprivate endPoint: string;\n\n\t\tconstructor(public commands: DataBuffer, public data: DataBuffer, public morphData: DataBuffer,\n\t\t            public prev: PathSegment, public next: PathSegment, public isReversed: boolean) {\n\t\t\tthis.id = PathSegment._counter++;\n\t\t}\n\n\t\tstatic FromDefaults(isMorph: boolean) {\n\t\t\tlet commands = new DataBuffer();\n\t\t\tlet data = new DataBuffer();\n\t\t\tcommands.endian = data.endian = 'auto';\n\t\t\tlet morphData: any = null;\n\t\t\tif (isMorph) {\n\t\t\t\tmorphData = new DataBuffer();\n\t\t\t\tmorphData.endian = 'auto';\n\t\t\t}\n\t\t\treturn new PathSegment(commands, data, morphData, null, null, false);\n\t\t}\n\n\t\tmoveTo(x: number, y: number) {\n\t\t\tthis.commands.writeUnsignedByte(PathCommand.MoveTo);\n\t\t\tthis.data.write2Ints(x, y);\n\t\t}\n\n\t\tmorphMoveTo(x: number, y: number, mx: number, my: number) {\n\t\t\tthis.moveTo(x, y);\n\t\t\tthis.morphData.write2Ints(mx, my);\n\t\t}\n\n\t\tlineTo(x: number, y: number) {\n\t\t\tthis.commands.writeUnsignedByte(PathCommand.LineTo);\n\t\t\tthis.data.write2Ints(x, y);\n\t\t}\n\n\t\tmorphLineTo(x: number, y: number, mx: number, my: number) {\n\t\t\tthis.lineTo(x, y);\n\t\t\tthis.morphData.write2Ints(mx, my);\n\t\t}\n\n\t\tcurveTo(cpx: number, cpy: number, x: number, y: number) {\n\t\t\tthis.commands.writeUnsignedByte(PathCommand.CurveTo);\n\t\t\tthis.data.write4Ints(cpx, cpy, x, y);\n\t\t}\n\n\t\tmorphCurveTo(cpx: number, cpy: number, x: number, y: number,\n\t\t             mcpx: number, mcpy: number, mx: number, my: number) {\n\t\t\tthis.curveTo(cpx, cpy, x, y);\n\t\t\tthis.morphData.write4Ints(mcpx, mcpy, mx, my);\n\t\t}\n\n\t\t/**\n\t\t * Returns a shallow copy of the segment with the \"isReversed\" flag set.\n\t\t * Reversed segments play themselves back in reverse when they're merged into the final\n\t\t * non-segmented path.\n\t\t * Note: Don't modify the original, or the reversed copy, after this operation!\n\t\t */\n\t\ttoReversed(): PathSegment {\n\t\t\trelease || assert(!this.isReversed);\n\t\t\treturn new PathSegment(this.commands, this.data, this.morphData, null, null, true);\n\t\t}\n\n\t\tclone(): PathSegment {\n\t\t\treturn new PathSegment(this.commands, this.data, this.morphData, null, null, this.isReversed);\n\t\t}\n\n\t\tstoreStartAndEnd() {\n\t\t\tlet data = this.data.ints;\n\t\t\tlet endPoint1 = data[0] + ',' + data[1];\n\t\t\tlet endPoint2Offset = (this.data.length >> 2) - 2;\n\t\t\tlet endPoint2 = data[endPoint2Offset] + ',' + data[endPoint2Offset + 1];\n\t\t\tif (!this.isReversed) {\n\t\t\t\tthis.startPoint = endPoint1;\n\t\t\t\tthis.endPoint = endPoint2;\n\t\t\t} else {\n\t\t\t\tthis.startPoint = endPoint2;\n\t\t\t\tthis.endPoint = endPoint1;\n\t\t\t}\n\t\t}\n\n\t\tconnectsTo(other: PathSegment): boolean {\n\t\t\trelease || assert(other !== this);\n\t\t\trelease || assert(this.endPoint);\n\t\t\trelease || assert(other.startPoint);\n\t\t\treturn this.endPoint === other.startPoint;\n\t\t}\n\n\t\tstartConnectsTo(other: PathSegment): boolean {\n\t\t\trelease || assert(other !== this);\n\t\t\treturn this.startPoint === other.startPoint;\n\t\t}\n\n\t\tflipDirection() {\n\t\t\tlet tempPoint = \"\";\n\t\t\ttempPoint = this.startPoint;\n\t\t\tthis.startPoint = this.endPoint;\n\t\t\tthis.endPoint = tempPoint;\n\t\t\tthis.isReversed = !this.isReversed;\n\t\t}\n\n\t\tserialize(shape: ShapeData, lastPosition: { x: number; y: number }) {\n\t\t\tif (this.isReversed) {\n\t\t\t\tthis._serializeReversed(shape, lastPosition);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet commands = this.commands.bytes;\n\t\t\t// Note: this *must* use `this.data.length`, because buffers will have padding.\n\t\t\tlet dataLength = this.data.length >> 2;\n\t\t\tlet morphData = this.morphData ? this.morphData.ints : null;\n\t\t\tlet data = this.data.ints;\n\t\t\trelease || assert(commands[0] === PathCommand.MoveTo);\n\t\t\t// If the segment's first moveTo goes to the current coordinates, we have to skip it.\n\t\t\tlet offset = 0;\n\t\t\tif (data[0] === lastPosition.x && data[1] === lastPosition.y) {\n\t\t\t\toffset++;\n\t\t\t}\n\t\t\tlet commandsCount = this.commands.length;\n\t\t\tlet dataPosition = offset * 2;\n\t\t\tfor (let i = offset; i < commandsCount; i++) {\n\t\t\t\tdataPosition = this._writeCommand(commands[i], dataPosition, data, morphData, shape);\n\t\t\t}\n\t\t\trelease || assert(dataPosition === dataLength);\n\t\t\tlastPosition.x = data[dataLength - 2];\n\t\t\tlastPosition.y = data[dataLength - 1];\n\t\t}\n\n\t\tprivate _serializeReversed(shape: ShapeData, lastPosition: { x: number; y: number }) {\n\t\t\t// For reversing the fill0 segments, we rely on the fact that each segment\n\t\t\t// starts with a moveTo. We first write a new moveTo with the final drawing command's\n\t\t\t// target coordinates (if we don't skip it, see below). For each of the following\n\t\t\t// commands, we take the coordinates of the command originally *preceding*\n\t\t\t// it as the new target coordinates. The final coordinates we target will be\n\t\t\t// the ones from the original first moveTo.\n\t\t\t// Note: these *must* use `this.{data,commands}.length`, because buffers will have padding.\n\t\t\tlet commandsCount = this.commands.length;\n\t\t\tlet dataPosition = (this.data.length >> 2) - 2;\n\t\t\tlet commands = this.commands.bytes;\n\t\t\trelease || assert(commands[0] === PathCommand.MoveTo);\n\t\t\tlet data = this.data.ints;\n\t\t\tlet morphData = this.morphData ? this.morphData.ints : null;\n\n\t\t\t// Only write the first moveTo if it doesn't go to the current coordinates.\n\t\t\tif (data[dataPosition] !== lastPosition.x || data[dataPosition + 1] !== lastPosition.y) {\n\t\t\t\tthis._writeCommand(PathCommand.MoveTo, dataPosition, data, morphData, shape);\n\t\t\t}\n\t\t\tif (commandsCount === 1) {\n\t\t\t\tlastPosition.x = data[0];\n\t\t\t\tlastPosition.y = data[1];\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tfor (let i = commandsCount; i-- > 1;) {\n\t\t\t\tdataPosition -= 2;\n\t\t\t\tlet command: PathCommand = commands[i];\n\t\t\t\tshape.writeCommandAndCoordinates(command, data[dataPosition], data[dataPosition + 1]);\n\t\t\t\tif (morphData) {\n\t\t\t\t\tshape.writeMorphCoordinates(morphData[dataPosition], morphData[dataPosition + 1]);\n\t\t\t\t}\n\t\t\t\tif (command === PathCommand.CurveTo) {\n\t\t\t\t\tdataPosition -= 2;\n\t\t\t\t\tshape.writeCoordinates(data[dataPosition], data[dataPosition + 1]);\n\t\t\t\t\tif (morphData) {\n\t\t\t\t\t\tshape.writeMorphCoordinates(morphData[dataPosition], morphData[dataPosition + 1]);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t}\n\t\t\t}\n\t\t\trelease || assert(dataPosition === 0);\n\t\t\tlastPosition.x = data[0];\n\t\t\tlastPosition.y = data[1];\n\t\t}\n\n\t\tprivate _writeCommand(command: PathCommand, position: number, data: Uint32Array,\n\t\t                      morphData: Uint32Array, shape: ShapeData): number {\n\t\t\tshape.writeCommandAndCoordinates(command, data[position++], data[position++]);\n\t\t\tif (morphData) {\n\t\t\t\tshape.writeMorphCoordinates(morphData[position - 2], morphData[position - 1]);\n\t\t\t}\n\t\t\tif (command === PathCommand.CurveTo) {\n\t\t\t\tshape.writeCoordinates(data[position++], data[position++]);\n\t\t\t\tif (morphData) {\n\t\t\t\t\tshape.writeMorphCoordinates(morphData[position - 2], morphData[position - 1]);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn position;\n\t\t}\n\t}\n\n\tclass SegmentedPath {\n\t\tprivate _head: PathSegment;\n\n\t\tconstructor(public fillStyle: any, public lineStyle: any) {\n\t\t\tthis._head = null;\n\t\t}\n\n\t\taddSegment(segment: PathSegment) {\n\t\t\trelease || assert(segment);\n\t\t\trelease || assert(segment.next === null);\n\t\t\trelease || assert(segment.prev === null);\n\t\t\tlet currentHead = this._head;\n\t\t\tif (currentHead) {\n\t\t\t\trelease || assert(segment !== currentHead);\n\t\t\t\tcurrentHead.next = segment;\n\t\t\t\tsegment.prev = currentHead;\n\t\t\t}\n\t\t\tthis._head = segment;\n\t\t}\n\n\t\t// Does *not* reset the segment's prev and next pointers!\n\t\tremoveSegment(segment: PathSegment) {\n\t\t\tif (segment.prev) {\n\t\t\t\tsegment.prev.next = segment.next;\n\t\t\t}\n\t\t\tif (segment.next) {\n\t\t\t\tsegment.next.prev = segment.prev;\n\t\t\t}\n\t\t}\n\n\t\tinsertSegment(segment: PathSegment, next: PathSegment) {\n\t\t\tlet prev = next.prev;\n\t\t\tsegment.prev = prev;\n\t\t\tsegment.next = next;\n\t\t\tif (prev) {\n\t\t\t\tprev.next = segment;\n\t\t\t}\n\t\t\tnext.prev = segment;\n\t\t}\n\n\t\thead(): PathSegment {\n\t\t\treturn this._head;\n\t\t}\n\n\t\tserialize(shape: ShapeData) {\n\t\t\tlet segment = this.head();\n\t\t\tif (!segment) {\n\t\t\t\t// Path is empty.\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\twhile (segment) {\n\t\t\t\tsegment.storeStartAndEnd();\n\t\t\t\tsegment = segment.prev;\n\t\t\t}\n\n\t\t\tlet start = this.head();\n\t\t\tlet end = start;\n\n\t\t\tlet finalRoot: PathSegment = null;\n\t\t\tlet finalHead: PathSegment = null;\n\n\t\t\t// Path segments for one style can appear in arbitrary order in the tag's list\n\t\t\t// of edge records.\n\t\t\t// Before we linearize them, we have to identify all pairs of segments where\n\t\t\t// one ends at a coordinate the other starts at.\n\t\t\t// The following loop does that, by creating ever-growing runs of matching\n\t\t\t// segments. If no more segments are found that match the current run (either\n\t\t\t// at the beginning, or at the end), the current run is complete, and a new\n\t\t\t// one is started. Rinse, repeat, until no solitary segments remain.\n\t\t\tlet current = start.prev;\n\t\t\twhile (start) {\n\t\t\t\twhile (current) {\n\n\t\t\t\t\tif (current.startConnectsTo(start)) {\n\t\t\t\t\t\tcurrent.flipDirection();\n\t\t\t\t\t}\n\n\t\t\t\t\tif (current.connectsTo(start)) {\n\t\t\t\t\t\tif (current.next !== start) {\n\t\t\t\t\t\t\tthis.removeSegment(current);\n\t\t\t\t\t\t\tthis.insertSegment(current, start);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tstart = current;\n\t\t\t\t\t\tcurrent = start.prev;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (current.startConnectsTo(end)) {\n\t\t\t\t\t\tcurrent.flipDirection();\n\t\t\t\t\t}\n\n\t\t\t\t\tif (end.connectsTo(current)) {\n\t\t\t\t\t\tthis.removeSegment(current);\n\t\t\t\t\t\tend.next = current;\n\t\t\t\t\t\tcurrent = current.prev;\n\t\t\t\t\t\tend.next.prev = end;\n\t\t\t\t\t\tend.next.next = null;\n\t\t\t\t\t\tend = end.next;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tcurrent = current.prev;\n\t\t\t\t}\n\t\t\t\t// This run of segments is finished. Store and forget it (for this loop).\n\t\t\t\tcurrent = start.prev;\n\t\t\t\tif (!finalRoot) {\n\t\t\t\t\tfinalRoot = start;\n\t\t\t\t\tfinalHead = end;\n\t\t\t\t} else {\n\t\t\t\t\tfinalHead.next = start;\n\t\t\t\t\tstart.prev = finalHead;\n\t\t\t\t\tfinalHead = end;\n\t\t\t\t\tfinalHead.next = null;\n\t\t\t\t}\n\t\t\t\tif (!current) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tstart = end = current;\n\t\t\t\tcurrent = start.prev;\n\t\t\t}\n\n\t\t\tif (this.fillStyle) {\n\t\t\t\tlet style = this.fillStyle;\n\t\t\t\tlet morph = style.morph;\n\t\t\t\tswitch (style.type) {\n\t\t\t\t\tcase FillType.Solid:\n\t\t\t\t\t\tshape.beginFill(style.color);\n\t\t\t\t\t\tif (morph) {\n\t\t\t\t\t\t\tshape.writeMorphFill(morph.color);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase FillType.LinearGradient:\n\t\t\t\t\tcase FillType.RadialGradient:\n\t\t\t\t\tcase FillType.FocalRadialGradient:\n\t\t\t\t\t\twriteGradient(PathCommand.BeginGradientFill, style, shape);\n\t\t\t\t\t\tif (morph) {\n\t\t\t\t\t\t\twriteMorphGradient(morph, shape);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase FillType.ClippedBitmap:\n\t\t\t\t\tcase FillType.RepeatingBitmap:\n\t\t\t\t\tcase FillType.NonsmoothedClippedBitmap:\n\t\t\t\t\tcase FillType.NonsmoothedRepeatingBitmap:\n\t\t\t\t\t\twriteBitmap(PathCommand.BeginBitmapFill, style, shape);\n\t\t\t\t\t\tif (morph) {\n\t\t\t\t\t\t\twriteMorphBitmap(morph, shape);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\trelease || assertUnreachable('Invalid fill style type: ' + style.type);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tlet style = this.lineStyle;\n\t\t\t\tlet morph = style.morph;\n\t\t\t\trelease || assert(style);\n\t\t\t\tswitch (style.type) {\n\t\t\t\t\tcase FillType.Solid:\n\t\t\t\t\t\twriteLineStyle(style, shape);\n\t\t\t\t\t\tif (morph) {\n\t\t\t\t\t\t\twriteMorphLineStyle(morph, shape);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase FillType.LinearGradient:\n\t\t\t\t\tcase FillType.RadialGradient:\n\t\t\t\t\tcase FillType.FocalRadialGradient:\n\t\t\t\t\t\twriteLineStyle(style, shape);\n\t\t\t\t\t\twriteGradient(PathCommand.LineStyleGradient, style, shape);\n\t\t\t\t\t\tif (morph) {\n\t\t\t\t\t\t\twriteMorphLineStyle(morph, shape);\n\t\t\t\t\t\t\twriteMorphGradient(morph, shape);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase FillType.ClippedBitmap:\n\t\t\t\t\tcase FillType.RepeatingBitmap:\n\t\t\t\t\tcase FillType.NonsmoothedClippedBitmap:\n\t\t\t\t\tcase FillType.NonsmoothedRepeatingBitmap:\n\t\t\t\t\t\twriteLineStyle(style, shape);\n\t\t\t\t\t\twriteBitmap(PathCommand.LineStyleBitmap, style, shape);\n\t\t\t\t\t\tif (morph) {\n\t\t\t\t\t\t\twriteMorphLineStyle(morph, shape);\n\t\t\t\t\t\t\twriteMorphBitmap(morph, shape);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t//console.error('Line style type not yet supported: ' + style.type);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet lastPosition = {x: 0, y: 0};\n\t\t\tcurrent = finalRoot;\n\t\t\twhile (current) {\n\t\t\t\tcurrent.serialize(shape, lastPosition);\n\t\t\t\tcurrent = current.next;\n\t\t\t}\n\t\t\tif (this.fillStyle) {\n\t\t\t\tshape.endFill();\n\t\t\t} else {\n\t\t\t\tshape.endLine();\n\t\t\t}\n\t\t\treturn shape;\n\t\t}\n\t}\n\n\tfunction writeLineStyle(style: ShapeStyle, shape: ShapeData): void {\n\t\t// No scaling == 0, normal == 1, vertical only == 2, horizontal only == 3.\n\t\tlet scaleMode = style.noHscale ?\n\t\t\t(style.noVscale ? 0 : 2) :\n\t\t\tstyle.noVscale ? 3 : 1;\n\t\t// TODO: Figure out how to handle startCapsStyle\n\t\tlet thickness = clamp(style.width, 0, 0xff * 20) | 0;\n\t\tshape.lineStyle(thickness, style.color,\n\t\t\tstyle.pixelHinting, scaleMode, style.endCapsStyle,\n\t\t\tstyle.jointStyle, style.miterLimit);\n\t}\n\n\tfunction writeMorphLineStyle(style: ShapeStyle, shape: ShapeData): void {\n\t\t// TODO: Figure out how to handle startCapsStyle\n\t\tlet thickness = clamp(style.width, 0, 0xff * 20) | 0;\n\t\tshape.writeMorphLineStyle(thickness, style.color);\n\t}\n\n\tfunction writeGradient(command: PathCommand, style: ShapeStyle, shape: ShapeData): void {\n\t\tlet gradientType = style.type === FillType.LinearGradient ?\n\t\t\tGradientType.Linear :\n\t\t\tGradientType.Radial;\n\t\tshape.beginGradient(command, style.colors, style.ratios,\n\t\t\tgradientType, style.transform, style.spreadMethod,\n\t\t\tstyle.interpolationMode, style.focalPoint / 2 | 0);\n\t}\n\n\tfunction writeMorphGradient(style: ShapeStyle, shape: ShapeData) {\n\t\tshape.writeMorphGradient(style.colors, style.ratios, style.transform);\n\t}\n\n\tfunction writeBitmap(command: PathCommand, style: ShapeStyle, shape: ShapeData): void {\n\t\tshape.beginBitmap(command, style.bitmapIndex, style.transform, style.repeat, style.smooth);\n\t}\n\n\tfunction writeMorphBitmap(style: ShapeStyle, shape: ShapeData) {\n\t\tshape.writeMorphBitmap(style.transform);\n\t}\n}\n","/**\n * Copyright 2014 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/// <reference path='references.ts'/>\nmodule Shumway.SWF.Parser {\n\tlet SOUND_SIZE_8_BIT = 0;\n\tlet SOUND_SIZE_16_BIT = 1;\n\tlet SOUND_TYPE_MONO = 0;\n\tlet SOUND_TYPE_STEREO = 1;\n\n\tlet SOUND_FORMAT_PCM_BE = 0;\n\tlet SOUND_FORMAT_ADPCM = 1;\n\tlet SOUND_FORMAT_MP3 = 2;\n\tlet SOUND_FORMAT_PCM_LE = 3;\n\tlet SOUND_FORMAT_NELLYMOSER_16 = 4;\n\tlet SOUND_FORMAT_NELLYMOSER_8 = 5;\n\tlet SOUND_FORMAT_NELLYMOSER = 6;\n\tlet SOUND_FORMAT_SPEEX = 11;\n\n\tlet SOUND_RATES = [5512, 11250, 22500, 44100];\n\n\tlet WaveHeader = new Uint8Array([0x52, 0x49, 0x46, 0x46, 0x00, 0x00, 0x00, 0x00,\n\t\t0x57, 0x41, 0x56, 0x45, 0x66, 0x6D, 0x74, 0x20, 0x10, 0x00, 0x00, 0x00,\n\t\t0x01, 0x00, 0x02, 0x00, 0x44, 0xAC, 0x00, 0x00, 0x10, 0xB1, 0x02, 0x00,\n\t\t0x04, 0x00, 0x10, 0x00, 0x64, 0x61, 0x74, 0x61, 0x00, 0x00, 0x00, 0x00]);\n\n\tfunction packageWave(data: any, sampleRate: number, channels: number, size: number, swapBytes: boolean) {\n\t\tlet sizeInBytes = size >> 3;\n\t\tlet sizePerSecond = channels * sampleRate * sizeInBytes;\n\t\tlet sizePerSample = channels * sizeInBytes;\n\t\tlet dataLength = data.length + (data.length & 1);\n\t\tlet buffer = new ArrayBuffer(WaveHeader.length + dataLength);\n\t\tlet bytes = new Uint8Array(buffer);\n\t\tbytes.set(WaveHeader);\n\t\tif (swapBytes) {\n\t\t\tfor (let i = 0, j = WaveHeader.length; i < data.length; i += 2, j += 2) {\n\t\t\t\tbytes[j] = data[i + 1];\n\t\t\t\tbytes[j + 1] = data[i];\n\t\t\t}\n\t\t} else {\n\t\t\tbytes.set(data, WaveHeader.length);\n\t\t}\n\t\tlet view = new DataView(buffer);\n\t\tview.setUint32(4, dataLength + 36, true);\n\t\tview.setUint16(22, channels, true);\n\t\tview.setUint32(24, sampleRate, true);\n\t\tview.setUint32(28, sizePerSecond, true);\n\t\tview.setUint16(32, sizePerSample, true);\n\t\tview.setUint16(34, size, true);\n\t\tview.setUint32(40, dataLength, true);\n\t\treturn {\n\t\t\tdata: bytes,\n\t\t\tmimeType: 'audio/wav'\n\t\t};\n\t}\n\n\texport function defineSound(tag: SoundTag) {\n\t\tlet channels = tag.soundType == SOUND_TYPE_STEREO ? 2 : 1;\n\t\tlet samplesCount = tag.samplesCount;\n\t\tlet sampleRate = SOUND_RATES[tag.soundRate];\n\n\t\tlet data = tag.soundData;\n\t\tlet pcm, packaged;\n\t\tswitch (tag.soundFormat) {\n\t\t\tcase SOUND_FORMAT_PCM_BE:\n\t\t\t\tpcm = new Float32Array(samplesCount * channels);\n\t\t\t\tif (tag.soundSize == SOUND_SIZE_16_BIT) {\n\t\t\t\t\tfor (let i = 0, j = 0; i < pcm.length; i++, j += 2)\n\t\t\t\t\t\tpcm[i] = ((data[j] << 24) | (data[j + 1] << 16)) / 2147483648;\n\t\t\t\t\tpackaged = packageWave(data, sampleRate, channels, 16, true);\n\t\t\t\t} else {\n\t\t\t\t\tfor (let i = 0; i < pcm.length; i++)\n\t\t\t\t\t\tpcm[i] = (data[i] - 128) / 128;\n\t\t\t\t\tpackaged = packageWave(data, sampleRate, channels, 8, false);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase SOUND_FORMAT_PCM_LE:\n\t\t\t\tpcm = new Float32Array(samplesCount * channels);\n\t\t\t\tif (tag.soundSize == SOUND_SIZE_16_BIT) {\n\t\t\t\t\tfor (let i = 0, j = 0; i < pcm.length; i++, j += 2)\n\t\t\t\t\t\tpcm[i] = ((data[j + 1] << 24) | (data[j] << 16)) / 2147483648;\n\t\t\t\t\tpackaged = packageWave(data, sampleRate, channels, 16, false);\n\t\t\t\t} else {\n\t\t\t\t\tfor (let i = 0; i < pcm.length; i++)\n\t\t\t\t\t\tpcm[i] = (data[i] - 128) / 128;\n\t\t\t\t\tpackaged = packageWave(data, sampleRate, channels, 8, false);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase SOUND_FORMAT_MP3:\n\t\t\t\tpackaged = {\n\t\t\t\t\tdata: new Uint8Array(data.subarray(2)),\n\t\t\t\t\tmimeType: 'audio/mpeg'\n\t\t\t\t};\n\t\t\t\tbreak;\n\t\t\tcase SOUND_FORMAT_ADPCM:\n\t\t\t\tlet pcm16 = new Int16Array(samplesCount * channels);\n\t\t\t\tdecodeACPCMSoundData(data, pcm16, channels);\n\t\t\t\tpcm = new Float32Array(samplesCount * channels);\n\t\t\t\tfor (let i = 0; i < pcm.length; i++)\n\t\t\t\t\tpcm[i] = pcm16[i] / 32768;\n\t\t\t\tpackaged = packageWave(new Uint8Array(pcm16.buffer), sampleRate, channels,\n\t\t\t\t\t16, !(new Uint8Array(new Uint16Array([1]).buffer))[0]);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tDebug.warning('Unsupported audio format: ' + tag.soundFormat);\n\t\t}\n\n\t\tlet sound = {\n\t\t\ttype: 'sound',\n\t\t\tid: tag.id,\n\t\t\tsampleRate: sampleRate,\n\t\t\tchannels: channels,\n\t\t\tpcm: pcm,\n\t\t\tpackaged: null as any\n\t\t};\n\t\tif (packaged) {\n\t\t\tsound.packaged = packaged;\n\t\t}\n\t\treturn sound;\n\t}\n\n\tlet ACPCMIndexTables = [\n\t\t[-1, 2],\n\t\t[-1, -1, 2, 4],\n\t\t[-1, -1, -1, -1, 2, 4, 6, 8],\n\t\t[-1, -1, -1, -1, -1, -1, -1, -1, 1, 2, 4, 6, 8, 10, 13, 16]\n\t];\n\n\tlet ACPCMStepSizeTable = [\n\t\t7, 8, 9, 10, 11, 12, 13, 14, 16, 17, 19, 21, 23, 25, 28, 31, 34, 37, 41, 45,\n\t\t50, 55, 60, 66, 73, 80, 88, 97, 107, 118, 130, 143, 157, 173, 190, 209, 230,\n\t\t253, 279, 307, 337, 371, 408, 449, 494, 544, 598, 658, 724, 796, 876, 963,\n\t\t1060, 1166, 1282, 1411, 1552, 1707, 1878, 2066, 2272, 2499, 2749, 3024, 3327,\n\t\t3660, 4026, 4428, 4871, 5358, 5894, 6484, 7132, 7845, 8630, 9493, 10442, 11487,\n\t\t12635, 13899, 15289, 16818, 18500, 20350, 22385, 24623, 27086, 29794, 32767\n\t];\n\n\tfunction decodeACPCMSoundData(data: any, pcm16: any, channels: any) {\n\t\tfunction readBits(n: number) {\n\t\t\twhile (dataBufferLength < n) {\n\t\t\t\tdataBuffer = (dataBuffer << 8) | data[dataPosition++];\n\t\t\t\tdataBufferLength += 8;\n\t\t\t}\n\t\t\tdataBufferLength -= n;\n\t\t\treturn (dataBuffer >>> dataBufferLength) & ((1 << n) - 1);\n\t\t}\n\n\t\tlet dataPosition = 0;\n\t\tlet dataBuffer = 0;\n\t\tlet dataBufferLength = 0;\n\n\t\tlet pcmPosition = 0;\n\t\tlet codeSize = readBits(2);\n\t\tlet indexTable = ACPCMIndexTables[codeSize];\n\t\twhile (pcmPosition < pcm16.length) {\n\t\t\tlet x = pcm16[pcmPosition++] = (readBits(16) << 16) >> 16, x2;\n\t\t\tlet stepIndex = readBits(6), stepIndex2;\n\t\t\tif (channels > 1) {\n\t\t\t\tx2 = pcm16[pcmPosition++] = (readBits(16) << 16) >> 16;\n\t\t\t\tstepIndex2 = readBits(6);\n\t\t\t}\n\t\t\tlet signMask = 1 << (codeSize + 1);\n\t\t\tfor (let i = 0; i < 4095; i++) {\n\t\t\t\tlet nibble = readBits(codeSize + 2);\n\t\t\t\tlet step = ACPCMStepSizeTable[stepIndex];\n\t\t\t\tlet sum = 0;\n\t\t\t\tfor (let currentBit = signMask >> 1; currentBit; currentBit >>= 1, step >>= 1) {\n\t\t\t\t\tif (nibble & currentBit) sum += step;\n\t\t\t\t}\n\t\t\t\tx += (nibble & signMask ? -1 : 1) * (sum + step);\n\t\t\t\tpcm16[pcmPosition++] = (x = (x < -32768 ? -32768 : x > 32767 ? 32767 : x));\n\t\t\t\tstepIndex += indexTable[nibble & ~signMask];\n\t\t\t\tstepIndex = stepIndex < 0 ? 0 : stepIndex > 88 ? 88 : stepIndex;\n\t\t\t\tif (channels > 1) {\n\t\t\t\t\tnibble = readBits(codeSize + 2);\n\t\t\t\t\tstep = ACPCMStepSizeTable[stepIndex2];\n\t\t\t\t\tsum = 0;\n\t\t\t\t\tfor (let currentBit = signMask >> 1; currentBit; currentBit >>= 1, step >>= 1) {\n\t\t\t\t\t\tif (nibble & currentBit) sum += step;\n\t\t\t\t\t}\n\t\t\t\t\tx2 += (nibble & signMask ? -1 : 1) * (sum + step);\n\t\t\t\t\tpcm16[pcmPosition++] = (x2 = (x2 < -32768 ? -32768 : x2 > 32767 ? 32767 : x2));\n\t\t\t\t\tstepIndex2 += indexTable[nibble & ~signMask];\n\t\t\t\t\tstepIndex2 = stepIndex2 < 0 ? 0 : stepIndex2 > 88 ? 88 : stepIndex2;\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\t}\n\n\tlet nextSoundStreamId = 0;\n\n\texport interface DecodedSound {\n\t\tstreamId: number;\n\t\tsamplesCount: number;\n\t\tpcm?: Float32Array;\n\t\tdata?: Uint8Array;\n\t\tseek?: number;\n\t}\n\n\texport class SoundStream {\n\t\tstreamId: number;\n\t\tsamplesCount: number;\n\t\tsampleRate: number;\n\t\tchannels: number;\n\t\tformat: any;\n\t\tcurrentSample: number;\n\n\t\tdecode: (block: Uint8Array) => DecodedSound;\n\n\t\tconstructor(samplesCount: number, sampleRate: number, channels: number) {\n\t\t\tthis.streamId = (nextSoundStreamId++);\n\t\t\tthis.samplesCount = samplesCount;\n\t\t\tthis.sampleRate = sampleRate;\n\t\t\tthis.channels = channels;\n\t\t\tthis.format = null;\n\t\t\tthis.currentSample = 0;\n\t\t}\n\n\t\tstatic FromTag(tag: any): SoundStream {\n\t\t\tlet channels = tag.streamType == SOUND_TYPE_STEREO ? 2 : 1;\n\t\t\tlet samplesCount = tag.samplesCount;\n\t\t\tlet sampleRate = SOUND_RATES[tag.streamRate];\n\t\t\tlet stream = new SoundStream(samplesCount, sampleRate, channels);\n\n\t\t\tswitch (tag.streamCompression) {\n\t\t\t\tcase SOUND_FORMAT_PCM_BE:\n\t\t\t\tcase SOUND_FORMAT_PCM_LE:\n\t\t\t\t\tstream.format = 'wave';\n\t\t\t\t\tif (tag.soundSize == SOUND_SIZE_16_BIT) {\n\t\t\t\t\t\tstream.decode = tag.streamCompression === SOUND_FORMAT_PCM_BE ?\n\t\t\t\t\t\t\tSwfSoundStream_decode_PCM_be :\n\t\t\t\t\t\t\tSwfSoundStream_decode_PCM_le;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tstream.decode = SwfSoundStream_decode_PCM;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase SOUND_FORMAT_MP3:\n\t\t\t\t\tstream.format = 'mp3';\n\t\t\t\t\tstream.decode = SwfSoundStream_decode_MP3;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tDebug.warning('Unsupported audio stream format: ' + tag.streamCompression);\n\t\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn stream;\n\t\t}\n\t}\n\n\tfunction SwfSoundStream_decode_PCM(data: any): DecodedSound {\n\t\tlet pcm = new Float32Array(data.length);\n\t\tfor (let i = 0; i < pcm.length; i++)\n\t\t\tpcm[i] = (data[i] - 128) / 128;\n\t\tthis.currentSample += pcm.length / this.channels;\n\t\treturn {\n\t\t\tstreamId: this.streamId,\n\t\t\tsamplesCount: pcm.length / this.channels,\n\t\t\tpcm: pcm\n\t\t};\n\t}\n\n\tfunction SwfSoundStream_decode_PCM_be(data: any): DecodedSound {\n\t\tlet pcm = new Float32Array(data.length / 2);\n\t\tfor (let i = 0, j = 0; i < pcm.length; i++, j += 2)\n\t\t\tpcm[i] = ((data[j] << 24) | (data[j + 1] << 16)) / 2147483648;\n\t\tthis.currentSample += pcm.length / this.channels;\n\t\treturn {\n\t\t\tstreamId: this.streamId,\n\t\t\tsamplesCount: pcm.length / this.channels,\n\t\t\tpcm: pcm\n\t\t};\n\t}\n\n\tfunction SwfSoundStream_decode_PCM_le(data: any): DecodedSound {\n\t\tlet pcm = new Float32Array(data.length / 2);\n\t\tfor (let i = 0, j = 0; i < pcm.length; i++, j += 2)\n\t\t\tpcm[i] = ((data[j + 1] << 24) | (data[j] << 16)) / 2147483648;\n\t\tthis.currentSample += pcm.length / this.channels;\n\t\treturn {\n\t\t\tstreamId: this.streamId,\n\t\t\tsamplesCount: pcm.length / this.channels,\n\t\t\tpcm: pcm\n\t\t};\n\t}\n\n\tfunction SwfSoundStream_decode_MP3(data: any): DecodedSound {\n\t\tlet samplesCount = (data[1] << 8) | data[0];\n\t\tlet seek = (data[3] << 8) | data[2];\n\t\tthis.currentSample += samplesCount;\n\t\treturn {\n\t\t\tstreamId: this.streamId,\n\t\t\tsamplesCount: samplesCount,\n\t\t\tdata: new Uint8Array(data.subarray(4)),\n\t\t\tseek: seek\n\t\t};\n\t}\n}\n","/**\n * Copyright 2014 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/// <reference path='references.ts'/>\nmodule Shumway.SWF.Parser {\n\texport function defineText(tag: TextTag) {\n\t\tlet bold = false;\n\t\tlet italic = false;\n\n\t\treturn {\n\t\t\ttype: 'text',\n\t\t\tid: tag.id,\n\t\t\tfillBounds: tag.bbox,\n\t\t\tvariableName: tag.variableName, // for AVM1\n\t\t\ttag: tag,\n\t\t\tbold: bold,\n\t\t\titalic: italic\n\t\t};\n\t}\n}\n","/*\n * Copyright 2014 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n///<reference path='../references.ts' />\n///<reference path='module.ts' />\n\n///<reference path='bitmap.ts' />\n///<reference path='button.ts' />\n///<reference path='font.ts' />\n///<reference path='image.ts' />\n///<reference path='label.ts' />\n///<reference path='shape.ts' />\n///<reference path='sound.ts' />\n///<reference path='text.ts' />\n","/*\n * Copyright 2013 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nmodule Shumway.SWF {\n\texport let timelineBuffer = Shumway.Tools ? new Shumway.Tools.Profiler.TimelineBuffer(\"Parser\") : null;\n\n\texport function enterTimeline(name: string, data?: any) {\n\t\tprofile && timelineBuffer && timelineBuffer.enter(name, data);\n\t}\n\n\texport function leaveTimeline(data?: any) {\n\t\tprofile && timelineBuffer && timelineBuffer.leave(null, data);\n\t}\n}\n","module Shumway.SWF {\n\timport Option = Shumway.Options.Option;\n\timport OptionSet = Shumway.Options.OptionSet;\n\n\timport shumwayOptions = Shumway.Settings.shumwayOptions;\n\n\texport let parserOptions = shumwayOptions.register(new OptionSet(\"Parser Options\"));\n\n\texport let traceLevel = parserOptions.register(new Option(\"parsertracelevel\",\n\t\t\"Parser Trace Level\", \"number\", 0,\n\t\t\"Parser Trace Level\"));\n}\n","/*\n * Copyright 2013 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/// <reference path='references.ts'/>\nmodule Shumway.SWF {\n\texport let StreamNoDataError = {};\n\n\tlet masks = new Uint32Array(33);\n\tfor (let i = 1, mask = 0; i <= 32; ++i) {\n\t\tmasks[i] = mask = (mask << 1) | 1;\n\t}\n\n\texport class Stream {\n\t\tbytes: Uint8Array;\n\t\tview: DataView;\n\t\tpos: number;\n\t\tend: number;\n\n\t\tbitBuffer: number;\n\t\tbitLength: number;\n\n\t\tconstructor(buffer: any, offset?: number, length?: number, maxLength?: number) {\n\t\t\tif (offset === undefined)\n\t\t\t\toffset = 0;\n\t\t\tif (buffer.buffer instanceof ArrayBuffer) {\n\t\t\t\toffset += buffer.byteOffset;\n\t\t\t\tbuffer = buffer.buffer;\n\t\t\t}\n\t\t\tif (length === undefined)\n\t\t\t\tlength = buffer.byteLength - offset;\n\t\t\tif (maxLength === undefined)\n\t\t\t\tmaxLength = length;\n\n\t\t\tthis.bytes = new Uint8Array(buffer, offset, maxLength);\n\t\t\tthis.view = new DataView(buffer, offset, maxLength);\n\t\t\tthis.pos = 0;\n\t\t\tthis.end = length;\n\n\t\t\tthis.bitBuffer = 0;\n\t\t\tthis.bitLength = 0;\n\t\t}\n\n\t\talign() {\n\t\t\tthis.bitBuffer = this.bitLength = 0;\n\t\t}\n\n\t\tensure(size: number) {\n\t\t\tif (this.pos + size > this.end) {\n\t\t\t\tthrow StreamNoDataError;\n\t\t\t}\n\t\t}\n\n\t\tremaining(): number {\n\t\t\treturn this.end - this.pos;\n\t\t}\n\n\t\tsubstream(begin: number, end: number): Stream {\n\t\t\tlet stream = new Stream(this.bytes);\n\t\t\tstream.pos = begin;\n\t\t\tstream.end = end;\n\t\t\treturn stream;\n\t\t}\n\n\t\tpush(data: ArrayLike<number>) {\n\t\t\tlet bytes = this.bytes;\n\t\t\tlet newBytesLength = this.end + data.length;\n\t\t\tif (newBytesLength > bytes.length) {\n\t\t\t\tthrow 'stream buffer overfow';\n\t\t\t}\n\t\t\tbytes.set(data, this.end);\n\t\t\tthis.end = newBytesLength;\n\t\t}\n\n\t\treadSi8(): number {\n\t\t\treturn this.view.getInt8(this.pos++);\n\t\t}\n\n\t\treadSi16(): number {\n\t\t\tlet r = this.view.getInt16(this.pos, true);\n\t\t\tthis.pos += 2;\n\t\t\treturn r;\n\t\t}\n\n\t\treadSi32(): number {\n\t\t\tlet r = this.view.getInt32(this.pos, true);\n\t\t\tthis.pos += 4;\n\t\t\treturn r;\n\t\t}\n\n\t\treadUi8(): number {\n\t\t\treturn this.bytes[this.pos++];\n\t\t}\n\n\t\treadUi16(): number {\n\t\t\tlet r = this.view.getUint16(this.pos, true);\n\t\t\tthis.pos += 2;\n\t\t\treturn r;\n\t\t}\n\n\t\treadUi32(): number {\n\t\t\tlet r = this.view.getUint32(this.pos, true);\n\t\t\tthis.pos += 4;\n\t\t\treturn r;\n\t\t}\n\n\t\treadFixed(): number {\n\t\t\tlet r = this.view.getInt32(this.pos, true) / 65536;\n\t\t\tthis.pos += 4;\n\t\t\treturn r;\n\t\t}\n\n\t\treadFixed8(): number {\n\t\t\tlet r = this.view.getInt16(this.pos, true) / 256;\n\t\t\tthis.pos += 2;\n\t\t\treturn r;\n\t\t}\n\n\t\treadFloat16(): number {\n\t\t\tlet ui16 = this.view.getUint16(this.pos, false);\n\t\t\tthis.pos += 2;\n\t\t\tlet sign = ui16 >> 15 ? -1 : 1;\n\t\t\tlet exponent = (ui16 & 0x7c00) >> 10;\n\t\t\tlet fraction = ui16 & 0x03ff;\n\t\t\tif (!exponent)\n\t\t\t\treturn sign * Math.pow(2, -14) * (fraction / 1024);\n\t\t\tif (exponent === 0x1f)\n\t\t\t\treturn fraction ? NaN : sign * Infinity;\n\t\t\treturn sign * Math.pow(2, exponent - 15) * (1 + (fraction / 1024));\n\t\t}\n\n\t\treadFloat(): number {\n\t\t\tlet r = this.view.getFloat32(this.pos, true);\n\t\t\tthis.pos += 4;\n\t\t\treturn r;\n\t\t}\n\n\t\treadDouble(): number {\n\t\t\tlet r = this.view.getFloat64(this.pos, true);\n\t\t\tthis.pos += 8;\n\t\t\treturn r;\n\t\t}\n\n\t\treadEncodedU32(): number {\n\t\t\tlet bytes = this.bytes;\n\t\t\tlet val = bytes[this.pos++];\n\t\t\tif (!(val & 0x080))\n\t\t\t\treturn val;\n\t\t\tval = (val & 0x7f) | bytes[this.pos++] << 7;\n\t\t\tif (!(val & 0x4000))\n\t\t\t\treturn val;\n\t\t\tval = (val & 0x3fff) | bytes[this.pos++] << 14;\n\t\t\tif (!(val & 0x200000))\n\t\t\t\treturn val;\n\t\t\tval = (val & 0x1FFFFF) | bytes[this.pos++] << 21;\n\t\t\tif (!(val & 0x10000000))\n\t\t\t\treturn val;\n\t\t\treturn (val & 0xFFFFFFF) | (bytes[this.pos++] << 28);\n\t\t}\n\n\t\treadBool(): boolean {\n\t\t\treturn !!this.bytes[this.pos++];\n\t\t}\n\n\t\treadSb(size: number): number {\n\t\t\treturn (this.readUb(size) << (32 - size)) >> (32 - size);\n\t\t}\n\n\t\treadUb(size: number): number {\n\t\t\tlet buffer = this.bitBuffer;\n\t\t\tlet bitlen = this.bitLength;\n\t\t\tlet val = 0;\n\t\t\twhile (size > bitlen) {\n\t\t\t\tif (bitlen > 24) {\n\t\t\t\t\t// Avoid overflow. Save current buffer in val and add remaining bits later.\n\t\t\t\t\tsize -= bitlen;\n\t\t\t\t\tval = buffer << size;\n\t\t\t\t\tbitlen = 0;\n\t\t\t\t}\n\t\t\t\tbuffer = (buffer << 8) | this.bytes[this.pos++];\n\t\t\t\tbitlen += 8;\n\t\t\t}\n\t\t\tbitlen -= size;\n\t\t\tval |= (buffer >>> bitlen) & masks[size];\n\t\t\tthis.bitBuffer = buffer;\n\t\t\tthis.bitLength = bitlen;\n\t\t\treturn val;\n\t\t}\n\n\t\treadFb(size: number): number {\n\t\t\treturn this.readSb(size) / 65536;\n\t\t}\n\n\t\treadString(length: number): string {\n\t\t\tlet bytes = this.bytes;\n\t\t\tlet codes: Uint8Array;\n\t\t\tlet pos = this.pos;\n\t\t\tif (length > -1) {\n\t\t\t\tcodes = bytes.subarray(pos, pos += length);\n\t\t\t} else {\n\t\t\t\tlength = 0;\n\t\t\t\tfor (let i = pos; bytes[i]; i++) {\n\t\t\t\t\tlength++;\n\t\t\t\t}\n\t\t\t\tcodes = bytes.subarray(pos, pos += length);\n\t\t\t\tpos++;\n\t\t\t}\n\t\t\tthis.pos = pos;\n\t\t\tlet str = Shumway.StringUtilities.utf8encode(codes);\n\t\t\tif (str.indexOf('\\0') >= 0) {\n\t\t\t\tstr = str.split('\\0').join('');\n\t\t\t}\n\t\t\treturn str;\n\t\t}\n\t}\n}\n","/*\n * Copyright 2014 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/// <reference path='references.ts'/>\nmodule Shumway.SWF {\n\texport let MP3WORKER_PATH: string = '../../lib/mp3/mp3worker.js';\n\n\tlet mp3Worker: Worker = null;\n\n\tfunction ensureMP3Worker(): Worker {\n\t\tif (!mp3Worker) {\n\t\t\tmp3Worker = new Worker(MP3WORKER_PATH);\n\t\t\tmp3Worker.addEventListener('message', function (e) {\n\t\t\t\tif (e.data.action === 'console') {\n\t\t\t\t\t(console as any)[e.data.method].call(console, e.data.message);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn mp3Worker;\n\t}\n\n\tlet nextSessionId: number = 0;\n\n\texport class MP3DecoderSession {\n\t\tprivate _sessionId: number;\n\t\tprivate _onworkermessageBound: (x: any) => void;\n\t\tprivate _worker: Worker;\n\n\t\tpublic onframedata: (frameData: Uint8Array, channels: number, sampleRate: number, bitRate: number) => void;\n\t\tpublic onid3tag: (tagData: any) => void;\n\t\tpublic onclosed: () => void;\n\t\tpublic onerror: (error: string) => void;\n\n\t\tpublic constructor() {\n\t\t\tthis._sessionId = (nextSessionId++);\n\t\t\tthis._onworkermessageBound = this.onworkermessage.bind(this);\n\t\t\tthis._worker = ensureMP3Worker();\n\t\t\tthis._worker.addEventListener('message', this._onworkermessageBound, false);\n\t\t\tthis._worker.postMessage({\n\t\t\t\tsessionId: this._sessionId,\n\t\t\t\taction: 'create'\n\t\t\t});\n\t\t}\n\n\t\tprivate onworkermessage(e: any) {\n\t\t\tif (e.data.sessionId !== this._sessionId)\n\t\t\t\treturn;\n\t\t\tlet action = e.data.action;\n\t\t\tswitch (action) {\n\t\t\t\tcase 'closed':\n\t\t\t\t\tif (this.onclosed) {\n\t\t\t\t\t\tthis.onclosed();\n\t\t\t\t\t}\n\t\t\t\t\tthis._worker.removeEventListener('message', this._onworkermessageBound, false);\n\t\t\t\t\tthis._worker = null;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'frame':\n\t\t\t\t\tthis.onframedata(e.data.frameData, e.data.channels,\n\t\t\t\t\t\te.data.sampleRate, e.data.bitRate);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'id3':\n\t\t\t\t\tif (this.onid3tag) {\n\t\t\t\t\t\tthis.onid3tag(e.data.id3Data);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'error':\n\t\t\t\t\tif (this.onerror) {\n\t\t\t\t\t\tthis.onerror(e.data.message);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tpushAsync(data: any) {\n\t\t\tthis._worker.postMessage({\n\t\t\t\tsessionId: this._sessionId,\n\t\t\t\taction: 'decode',\n\t\t\t\tdata: data\n\t\t\t});\n\t\t}\n\n\t\tclose() {\n\t\t\tthis._worker.postMessage({\n\t\t\t\tsessionId: this._sessionId,\n\t\t\t\taction: 'close'\n\t\t\t});\n\t\t}\n\n\n\t\tpublic static processAll(data: Uint8Array): Promise<{ data: Uint8Array; id3Tags: any; }> {\n\t\t\tlet currentBufferSize = 8000;\n\t\t\tlet currentBuffer = new Float32Array(currentBufferSize);\n\t\t\tlet bufferPosition = 0;\n\t\t\tlet id3Tags: any = [];\n\t\t\tlet sessionAborted = false;\n\n\t\t\tlet promiseWrapper = new PromiseWrapper<{ data: Uint8Array; id3Tags: any; }>();\n\t\t\tlet session = new MP3DecoderSession();\n\t\t\tsession.onframedata = function (frameData, channels, sampleRate, bitRate) {\n\t\t\t\tlet needed = frameData.length + bufferPosition;\n\t\t\t\tif (needed > currentBufferSize) {\n\t\t\t\t\tdo {\n\t\t\t\t\t\tcurrentBufferSize *= 2;\n\t\t\t\t\t} while (needed > currentBufferSize);\n\t\t\t\t\tlet newBuffer = new Float32Array(currentBufferSize);\n\t\t\t\t\tnewBuffer.set(currentBuffer);\n\t\t\t\t\tcurrentBuffer = newBuffer;\n\t\t\t\t}\n\t\t\t\tcurrentBuffer.set(frameData, bufferPosition);\n\t\t\t\tbufferPosition += frameData.length;\n\t\t\t};\n\t\t\tsession.onid3tag = function (tagData) {\n\t\t\t\tid3Tags.push(tagData);\n\t\t\t};\n\t\t\tsession.onclosed = function () {\n\t\t\t\tif (sessionAborted)\n\t\t\t\t\treturn;\n\t\t\t\tpromiseWrapper.resolve({data: currentBuffer.subarray(0, bufferPosition), id3Tags: id3Tags});\n\t\t\t};\n\t\t\tsession.onerror = function (error) {\n\t\t\t\tif (sessionAborted)\n\t\t\t\t\treturn;\n\t\t\t\tsessionAborted = true;\n\t\t\t\tpromiseWrapper.reject(error);\n\t\t\t};\n\t\t\tsession.pushAsync(data);\n\t\t\tsession.close();\n\n\t\t\treturn promiseWrapper.promise;\n\t\t}\n\t}\n}","/**\n * Copyright 2014 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nmodule Shumway.SWF {\n\timport assert = Shumway.Debug.assert;\n\n\timport Parser = Shumway.SWF.Parser;\n\timport Stream = SWF.Stream;\n\timport IDataDecoder = ArrayUtilities.IDataDecoder;\n\timport Inflate = ArrayUtilities.Inflate;\n\timport LzmaDecoder = ArrayUtilities.LzmaDecoder;\n\n\timport SwfTagCode = Parser.SwfTagCode;\n\n\timport DefinitionTags = Parser.DefinitionTags;\n\timport ImageDefinitionTags = Parser.ImageDefinitionTags;\n\timport FontDefinitionTags = Parser.FontDefinitionTags;\n\timport ImageDefinition = Parser.ImageDefinition;\n\timport ControlTags = Parser.ControlTags;\n\timport getSwfTagCodeName = Parser.getSwfTagCodeName;\n\n\texport const enum CompressionMethod {\n\t\tNone,\n\t\tDeflate,\n\t\tLZMA\n\t}\n\n\texport class SWFFile {\n\t\tcompression: CompressionMethod;\n\t\tswfVersion: number;\n\t\tuseAVM1: boolean;\n\t\tbackgroundColor: number;\n\t\tbounds: Bounds;\n\t\tframeRate: number;\n\t\tframeCount: number;\n\t\tattributes: any; // TODO: type strongly\n\t\tsceneAndFrameLabelData: any; // TODO: type strongly\n\n\t\tbytesLoaded: number;\n\t\tbytesTotal: number;\n\t\tpendingUpdateDelays: number;\n\t\t// Might be lower than frames.length if eagerly parsed assets pending resolution are blocking\n\t\t// us from reporting the given frame as loaded.\n\t\tframesLoaded: number;\n\n\t\tframes: SWFFrame[];\n\t\tabcBlocks: ABCBlock[];\n\t\tdictionary: DictionaryEntry[];\n\t\tfonts: { name: string; style: string; id: number }[];\n\t\tdata: Uint8Array;\n\t\tenv: any;\n\n\t\tsymbolClassesMap: string[];\n\t\tsymbolClassesList: { id: number; className: string }[];\n\t\teagerlyParsedSymbolsMap: EagerlyParsedDictionaryEntry[];\n\t\teagerlyParsedSymbolsList: EagerlyParsedDictionaryEntry[];\n\n\t\tprivate _uncompressedLength: number;\n\t\tprivate _uncompressedLoadedLength: number;\n\t\tprivate _dataView: DataView;\n\t\tprivate _dataStream: Stream;\n\t\tprivate _decompressor: IDataDecoder;\n\t\tprivate _jpegTables: any;\n\t\tprivate _endTagEncountered: boolean;\n\t\tprivate _loadStarted: number;\n\t\tprivate _lastScanPosition: number;\n\n\t\tprivate _currentFrameLabel: string;\n\t\tprivate _currentSoundStreamHead: Parser.SoundStream;\n\t\tprivate _currentSoundStreamBlock: Uint8Array;\n\t\tprivate _currentControlTags: UnparsedTag[];\n\t\tprivate _currentActionBlocks: ActionBlock[];\n\t\tprivate _currentInitActionBlocks: InitActionBlock[];\n\t\tprivate _currentExports: SymbolExport[];\n\n\t\tconstructor(initialBytes: Uint8Array, length: number, env: any) {\n\t\t\t// TODO: cleanly abort loading/parsing instead of just asserting here.\n\t\t\trelease || assert(initialBytes[0] === 67 || initialBytes[0] === 70 || initialBytes[0] === 90,\n\t\t\t\t\"Unsupported compression format: \" + initialBytes[0]);\n\t\t\trelease || assert(initialBytes[1] === 87);\n\t\t\trelease || assert(initialBytes[2] === 83);\n\t\t\trelease || assert(initialBytes.length >= 30, \"At least the header must be complete here.\");\n\n\t\t\tif (!release && SWF.traceLevel.value > 0) {\n\t\t\t\tconsole.log('Create SWFFile');\n\t\t\t}\n\n\t\t\tthis.env = env;\n\n\t\t\tthis.compression = CompressionMethod.None;\n\t\t\tthis.swfVersion = 0;\n\t\t\tthis.useAVM1 = true;\n\t\t\tthis.backgroundColor = 0xffffffff;\n\t\t\tthis.bounds = null;\n\t\t\tthis.frameRate = 0;\n\t\t\tthis.frameCount = 0;\n\t\t\tthis.attributes = null;\n\t\t\tthis.sceneAndFrameLabelData = null;\n\n\t\t\tthis.bytesLoaded = 0;\n\t\t\tthis.bytesTotal = length;\n\t\t\tthis.pendingUpdateDelays = 0;\n\t\t\tthis.framesLoaded = 0;\n\n\t\t\tthis.frames = [];\n\t\t\tthis.abcBlocks = [];\n\t\t\tthis.dictionary = [];\n\t\t\tthis.fonts = [];\n\n\t\t\tthis.symbolClassesMap = [];\n\t\t\tthis.symbolClassesList = [];\n\t\t\tthis.eagerlyParsedSymbolsMap = [];\n\t\t\tthis.eagerlyParsedSymbolsList = [];\n\t\t\tthis._jpegTables = null;\n\n\t\t\tthis._currentFrameLabel = null;\n\t\t\tthis._currentSoundStreamHead = null;\n\t\t\tthis._currentSoundStreamBlock = null;\n\t\t\tthis._currentControlTags = null;\n\t\t\tthis._currentActionBlocks = null;\n\t\t\tthis._currentInitActionBlocks = null;\n\t\t\tthis._currentExports = null;\n\t\t\tthis._endTagEncountered = false;\n\t\t\tthis.readHeaderAndInitialize(initialBytes);\n\t\t}\n\n\t\tappendLoadedData(bytes: Uint8Array) {\n\t\t\t// TODO: only report decoded or sync-decodable bytes as loaded.\n\t\t\tthis.bytesLoaded += bytes.length;\n\t\t\trelease || assert(this.bytesLoaded <= this.bytesTotal);\n\t\t\t// Tags after the end tag are simply ignored, so we don't even have to scan them.\n\t\t\tif (this._endTagEncountered) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (this.compression !== CompressionMethod.None) {\n\t\t\t\tthis._decompressor.push(bytes);\n\t\t\t} else {\n\t\t\t\tthis.processDecompressedData(bytes);\n\t\t\t}\n\t\t\tthis.scanLoadedData();\n\t\t}\n\n\t\tfinishLoading() {\n\t\t\tif (this.compression !== CompressionMethod.None) {\n\t\t\t\tthis._decompressor.close();\n\t\t\t\tthis._decompressor = null;\n\t\t\t\tthis.scanLoadedData();\n\t\t\t}\n\t\t}\n\n\t\tgetSymbol(id: number) {\n\t\t\tif (this.eagerlyParsedSymbolsMap[id]) {\n\t\t\t\treturn this.eagerlyParsedSymbolsMap[id];\n\t\t\t}\n\t\t\tlet unparsed = this.dictionary[id];\n\t\t\tif (!unparsed) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tlet symbol;\n\t\t\tif (unparsed.tagCode === SwfTagCode.CODE_DEFINE_SPRITE) {\n\t\t\t\t// TODO: replace this whole silly `type` business with tagCode checking.\n\t\t\t\tsymbol = this.parseSpriteTimeline(unparsed);\n\t\t\t} else {\n\t\t\t\tsymbol = this.getParsedTag(unparsed);\n\t\t\t}\n\t\t\tsymbol.className = this.symbolClassesMap[id] || null;\n\t\t\tsymbol.env = this.env;\n\t\t\treturn symbol;\n\t\t}\n\n\t\tgetParsedTag(unparsed: UnparsedTag): any {\n\t\t\tSWF.enterTimeline('Parse tag ' + getSwfTagCodeName(unparsed.tagCode));\n\t\t\tthis._dataStream.align();\n\t\t\tthis._dataStream.pos = unparsed.byteOffset;\n\t\t\tlet handler = Parser.LowLevel.tagHandlers[unparsed.tagCode];\n\t\t\trelease || Debug.assert(handler, 'handler shall exists here');\n\t\t\tlet tagEnd = Math.min(unparsed.byteOffset + unparsed.byteLength, this._dataStream.end);\n\t\t\tlet tag = handler(this._dataStream, this.swfVersion, unparsed.tagCode, tagEnd, this._jpegTables);\n\t\t\tlet finalPos = this._dataStream.pos;\n\t\t\tif (finalPos !== tagEnd) {\n\t\t\t\tthis.emitTagSlopWarning(unparsed, tagEnd);\n\t\t\t}\n\t\t\tlet symbol = defineSymbol(tag, this.dictionary);\n\t\t\tSWF.leaveTimeline();\n\t\t\treturn symbol;\n\t\t}\n\n\t\tprivate readHeaderAndInitialize(initialBytes: Uint8Array) {\n\t\t\tSWF.enterTimeline('Initialize SWFFile');\n\t\t\tlet isDeflateCompressed = initialBytes[0] === 67;\n\t\t\tlet isLzmaCompressed = initialBytes[0] === 90;\n\t\t\tif (isDeflateCompressed) {\n\t\t\t\tthis.compression = CompressionMethod.Deflate;\n\t\t\t} else if (isLzmaCompressed) {\n\t\t\t\tthis.compression = CompressionMethod.LZMA;\n\t\t\t}\n\t\t\tthis.swfVersion = initialBytes[3];\n\t\t\tthis._loadStarted = Date.now();\n\t\t\tthis._uncompressedLength = readSWFLength(initialBytes);\n\t\t\tthis.bytesLoaded = initialBytes.length;\n\t\t\t// In some malformed SWFs, the parsed length in the header doesn't exactly match the actual size of the file. For\n\t\t\t// uncompressed files it seems to be safer to make the buffer large enough from the beginning to fit the entire\n\t\t\t// file than having to resize it later or risking an exception when reading out of bounds.\n\t\t\tthis.data = new Uint8Array(this.compression === CompressionMethod.None ?\n\t\t\t\tthis.bytesTotal : this._uncompressedLength);\n\t\t\tthis._dataStream = new Stream(this.data.buffer);\n\t\t\tthis._dataStream.pos = 8;\n\t\t\tthis._dataView = this._dataStream.view;\n\t\t\tif (isDeflateCompressed) {\n\t\t\t\tthis.data.set(initialBytes.subarray(0, 8));\n\t\t\t\t// @ivanpopelyshev Data will be uncompressed, so lets change the flag in case someone wants to get the bytes\n\t\t\t\tthis.data[0] = 70;\n\t\t\t\tthis._uncompressedLoadedLength = 8;\n\t\t\t\tthis._decompressor = Inflate.create(true);\n\t\t\t\t// Parts of the header are compressed. Get those out of the way before starting tag parsing.\n\t\t\t\tthis._decompressor.onData = this.processFirstBatchOfDecompressedData.bind(this);\n\t\t\t\tthis._decompressor.onError = function (error: any) {\n\t\t\t\t\t// TODO: Let the loader handle this error.\n\t\t\t\t\tthrow new Error(error);\n\t\t\t\t};\n\t\t\t\tthis._decompressor.push(initialBytes.subarray(8));\n\t\t\t} else if (isLzmaCompressed) {\n\t\t\t\tthis.data.set(initialBytes.subarray(0, 8));\n\t\t\t\tthis.data[0] = 70;\n\t\t\t\tthis._uncompressedLoadedLength = 8;\n\t\t\t\tthis._decompressor = new LzmaDecoder(true);\n\t\t\t\tthis._decompressor.onData = this.processFirstBatchOfDecompressedData.bind(this);\n\t\t\t\tthis._decompressor.onError = function (error: any) {\n\t\t\t\t\t// TODO: Let the loader handle this error.\n\t\t\t\t\tDebug.warning('Invalid LZMA stream: ' + error);\n\t\t\t\t};\n\t\t\t\tthis._decompressor.push(initialBytes);\n\t\t\t} else {\n\t\t\t\tthis.data.set(initialBytes);\n\t\t\t\tthis._uncompressedLoadedLength = initialBytes.length;\n\t\t\t\tthis._decompressor = null;\n\t\t\t\tthis.parseHeaderContents();\n\t\t\t}\n\t\t\tSWF.leaveTimeline();\n\t\t\tthis._lastScanPosition = this._dataStream.pos;\n\t\t\tthis.scanLoadedData();\n\t\t}\n\n\t\tprivate parseHeaderContents() {\n\t\t\tlet obj = Parser.LowLevel.parseHeader(this._dataStream);\n\t\t\tthis.bounds = obj.bounds;\n\t\t\tthis.frameRate = obj.frameRate;\n\t\t\tthis.frameCount = obj.frameCount;\n\t\t}\n\n\t\tprivate processFirstBatchOfDecompressedData(data: Uint8Array) {\n\t\t\tthis.processDecompressedData(data);\n\t\t\tthis.parseHeaderContents();\n\t\t\tthis._decompressor.onData = this.processDecompressedData.bind(this);\n\t\t}\n\n\t\tprivate processDecompressedData(data: Uint8Array) {\n\t\t\t// Make sure we don't cause an exception here when trying to set out-of-bound data by clamping the number of bytes\n\t\t\t// to write to the remaining space in our buffer. If this is the case, we probably got a wrong file length from\n\t\t\t// the SWF header. The Flash Player ignores data that goes over that given length, so should we.\n\t\t\tlet length = Math.min(data.length, this._uncompressedLength - this._uncompressedLoadedLength);\n\t\t\tArrayUtilities.memCopy(this.data, data, this._uncompressedLoadedLength, 0, length);\n\t\t\tthis._uncompressedLoadedLength += length;\n\t\t}\n\n\t\tprivate scanLoadedData() {\n\t\t\tSWF.enterTimeline('Scan loaded SWF file tags');\n\t\t\tthis._dataStream.pos = this._lastScanPosition;\n\t\t\tthis.scanTagsToOffset(this._uncompressedLoadedLength, true);\n\t\t\tthis._lastScanPosition = this._dataStream.pos;\n\t\t\tSWF.leaveTimeline();\n\t\t}\n\n\t\tprivate scanTagsToOffset(endOffset: number, rootTimelineMode: boolean) {\n\t\t\t// `parsePos` is always at the start of a tag at this point, because it only gets updated\n\t\t\t// when a tag has been fully parsed.\n\t\t\tlet tempTag = new UnparsedTag(0, 0, 0);\n\t\t\tlet pos: number;\n\t\t\twhile ((pos = this._dataStream.pos) < endOffset - 1) {\n\t\t\t\tif (!this.parseNextTagHeader(tempTag)) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif (tempTag.tagCode === SwfTagCode.CODE_END) {\n\t\t\t\t\tif (rootTimelineMode) {\n\t\t\t\t\t\tthis._endTagEncountered = true;\n\t\t\t\t\t}\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tlet tagEnd = tempTag.byteOffset + tempTag.byteLength;\n\t\t\t\tif (tagEnd > endOffset) {\n\t\t\t\t\tthis._dataStream.pos = pos;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.scanTag(tempTag, rootTimelineMode);\n\t\t\t\tif (this._dataStream.pos !== tagEnd) {\n\t\t\t\t\tthis.emitTagSlopWarning(tempTag, tagEnd);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Parses tag header information at the current seek offset and stores it in the given object.\n\t\t *\n\t\t * Public so it can be used by tools to parse through entire SWFs.\n\t\t */\n\t\tparseNextTagHeader(target: UnparsedTag): boolean {\n\t\t\tlet position = this._dataStream.pos;\n\t\t\tlet tagCodeAndLength = this._dataView.getUint16(position, true);\n\t\t\tposition += 2;\n\t\t\ttarget.tagCode = tagCodeAndLength >> 6;\n\t\t\tlet tagLength = tagCodeAndLength & 0x3f;\n\t\t\tlet extendedLength = tagLength === 0x3f;\n\t\t\tif (extendedLength) {\n\t\t\t\tif (position + 4 > this._uncompressedLoadedLength) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\ttagLength = this._dataView.getUint32(position, true);\n\t\t\t\tposition += 4;\n\t\t\t}\n\t\t\tthis._dataStream.pos = position;\n\t\t\ttarget.byteOffset = position;\n\t\t\ttarget.byteLength = tagLength;\n\t\t\treturn true;\n\t\t}\n\n\t\tprivate scanTag(tag: UnparsedTag, rootTimelineMode: boolean): void {\n\t\t\tlet stream: Stream = this._dataStream;\n\t\t\tlet byteOffset = stream.pos;\n\t\t\trelease || assert(byteOffset === tag.byteOffset);\n\t\t\tlet tagCode = tag.tagCode;\n\t\t\tlet tagLength = tag.byteLength;\n\t\t\tif (!release && traceLevel.value > 1) {\n\t\t\t\tconsole.info(\"Scanning tag \" + getSwfTagCodeName(tagCode) + \" (start: \" + byteOffset +\n\t\t\t\t\t\", end: \" + (byteOffset + tagLength) + \")\");\n\t\t\t}\n\n\t\t\tif (tagCode === SwfTagCode.CODE_DEFINE_SPRITE) {\n\t\t\t\t// According to Chapter 13 of the SWF format spec, no nested definition tags are\n\t\t\t\t// allowed within DefineSprite. However, they're added to the symbol dictionary\n\t\t\t\t// anyway, and some tools produce them. Notably swfmill.\n\t\t\t\t// We essentially treat them as though they came before the current sprite. That\n\t\t\t\t// should be ok because it doesn't make sense for them to rely on their parent being\n\t\t\t\t// fully defined - so they don't have to come after it -, and any control tags within\n\t\t\t\t// the parent will just pick them up the moment they're defined, just as always.\n\t\t\t\tthis.addLazySymbol(tagCode, byteOffset, tagLength);\n\t\t\t\tlet spriteTagEnd = byteOffset + tagLength;\n\t\t\t\tstream.pos += 4; // Jump over symbol ID and frameCount.\n\t\t\t\tthis.scanTagsToOffset(spriteTagEnd, false);\n\t\t\t\tif (this._dataStream.pos !== spriteTagEnd) {\n\t\t\t\t\tthis.emitTagSlopWarning(tag, spriteTagEnd);\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (ImageDefinitionTags[tagCode]) {\n\t\t\t\t// Images are decoded asynchronously, so we have to deal with them ahead of time to\n\t\t\t\t// ensure they're ready when used.\n\t\t\t\tlet unparsed = this.addLazySymbol(tagCode, byteOffset, tagLength);\n\t\t\t\tthis.decodeEmbeddedImage(unparsed);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (FontDefinitionTags[tagCode]) {\n\t\t\t\tlet unparsed = this.addLazySymbol(tagCode, byteOffset, tagLength);\n\t\t\t\tthis.registerEmbeddedFont(unparsed);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (DefinitionTags[tagCode]) {\n\t\t\t\tthis.addLazySymbol(tagCode, byteOffset, tagLength);\n\t\t\t\tthis.jumpToNextTag(tagLength);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!rootTimelineMode &&\n\t\t\t\t!(tagCode === SwfTagCode.CODE_SYMBOL_CLASS || tagCode === SwfTagCode.CODE_EXPORT_ASSETS)) {\n\t\t\t\tthis.jumpToNextTag(tagLength);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (ControlTags[tagCode]) {\n\t\t\t\tthis.addControlTag(tagCode, byteOffset, tagLength);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet tagEnd;\n\t\t\tswitch (tagCode) {\n\t\t\t\tcase SwfTagCode.CODE_FILE_ATTRIBUTES:\n\t\t\t\t\tthis.setFileAttributes(tagLength);\n\t\t\t\t\tbreak;\n\t\t\t\tcase SwfTagCode.CODE_DEFINE_SCENE_AND_FRAME_LABEL_DATA:\n\t\t\t\t\tthis.setSceneAndFrameLabelData(tagLength);\n\t\t\t\t\tbreak;\n\t\t\t\tcase SwfTagCode.CODE_SET_BACKGROUND_COLOR:\n\t\t\t\t\tthis.backgroundColor = Parser.LowLevel.parseRgb(this._dataStream);\n\t\t\t\t\tbreak;\n\t\t\t\tcase SwfTagCode.CODE_JPEG_TABLES:\n\t\t\t\t\t// Only use the first JpegTables tag, ignore any following.\n\t\t\t\t\t// TODO test it, swfdec is using the last one\n\t\t\t\t\tif (!this._jpegTables) {\n\t\t\t\t\t\tthis._jpegTables = tagLength === 0 ?\n\t\t\t\t\t\t\tnew Uint8Array(0) :\n\t\t\t\t\t\t\tthis.data.subarray(stream.pos, stream.pos + tagLength - 2);\n\t\t\t\t\t}\n\t\t\t\t\tthis.jumpToNextTag(tagLength);\n\t\t\t\t\tbreak;\n\t\t\t\tcase SwfTagCode.CODE_DO_ABC:\n\t\t\t\tcase SwfTagCode.CODE_DO_ABC_DEFINE:\n\t\t\t\t\tif (!this.useAVM1) {\n\t\t\t\t\t\tlet tagEnd = byteOffset + tagLength;\n\t\t\t\t\t\tlet abcBlock = new ABCBlock();\n\t\t\t\t\t\tif (tagCode === SwfTagCode.CODE_DO_ABC) {\n\t\t\t\t\t\t\tabcBlock.flags = stream.readUi32();\n\t\t\t\t\t\t\tabcBlock.name = stream.readString(-1);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tabcBlock.flags = 0;\n\t\t\t\t\t\t\tabcBlock.name = \"\";\n\t\t\t\t\t\t}\n\t\t\t\t\t\tabcBlock.data = this.data.subarray(stream.pos, tagEnd);\n\t\t\t\t\t\tthis.abcBlocks.push(abcBlock);\n\t\t\t\t\t\tstream.pos = tagEnd;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.jumpToNextTag(tagLength);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase SwfTagCode.CODE_SYMBOL_CLASS:\n\t\t\t\t\tlet tagEnd = byteOffset + tagLength;\n\t\t\t\t\tlet symbolCount = stream.readUi16();\n\t\t\t\t\t// TODO: check if symbols can be reassociated after instances have been created.\n\t\t\t\t\twhile (symbolCount--) {\n\t\t\t\t\t\tlet symbolId = stream.readUi16();\n\t\t\t\t\t\tlet symbolClassName = stream.readString(-1);\n\t\t\t\t\t\tif (!release && traceLevel.value > 0) {\n\t\t\t\t\t\t\tconsole.log('Registering symbol class ' + symbolClassName + ' to symbol ' + symbolId);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.symbolClassesMap[symbolId] = symbolClassName;\n\t\t\t\t\t\tthis.symbolClassesList.push({id: symbolId, className: symbolClassName});\n\t\t\t\t\t}\n\t\t\t\t\t// Make sure we move to end of tag even if the content is invalid.\n\t\t\t\t\tstream.pos = tagEnd;\n\t\t\t\t\tbreak;\n\t\t\t\tcase SwfTagCode.CODE_DO_INIT_ACTION:\n\t\t\t\t\tif (this.useAVM1) {\n\t\t\t\t\t\tlet initActionBlocks = this._currentInitActionBlocks ||\n\t\t\t\t\t\t\t(this._currentInitActionBlocks = []);\n\t\t\t\t\t\tlet spriteId = this._dataView.getUint16(stream.pos, true);\n\t\t\t\t\t\tlet actionsData = this.data.subarray(byteOffset + 2, byteOffset + tagLength);\n\t\t\t\t\t\tinitActionBlocks.push({spriteId: spriteId, actionsData: actionsData});\n\t\t\t\t\t}\n\t\t\t\t\tthis.jumpToNextTag(tagLength);\n\t\t\t\t\tbreak;\n\t\t\t\tcase SwfTagCode.CODE_DO_ACTION:\n\t\t\t\t\tif (this.useAVM1) {\n\t\t\t\t\t\tlet actionBlocks = this._currentActionBlocks || (this._currentActionBlocks = []);\n\t\t\t\t\t\tlet actionsData = this.data.subarray(stream.pos, stream.pos + tagLength);\n\t\t\t\t\t\tactionBlocks.push({actionsData: actionsData, precedence: stream.pos});\n\t\t\t\t\t}\n\t\t\t\t\tthis.jumpToNextTag(tagLength);\n\t\t\t\t\tbreak;\n\t\t\t\tcase SwfTagCode.CODE_SOUND_STREAM_HEAD:\n\t\t\t\tcase SwfTagCode.CODE_SOUND_STREAM_HEAD2:\n\t\t\t\t\tlet soundStreamTag = Parser.LowLevel.parseSoundStreamHeadTag(this._dataStream, byteOffset + tagLength);\n\t\t\t\t\tthis._currentSoundStreamHead = Parser.SoundStream.FromTag(soundStreamTag);\n\t\t\t\t\tbreak;\n\t\t\t\tcase SwfTagCode.CODE_SOUND_STREAM_BLOCK:\n\t\t\t\t\tthis._currentSoundStreamBlock = this.data.subarray(stream.pos, stream.pos += tagLength);\n\t\t\t\t\tbreak;\n\t\t\t\tcase SwfTagCode.CODE_FRAME_LABEL:\n\t\t\t\t\ttagEnd = stream.pos + tagLength;\n\t\t\t\t\tthis._currentFrameLabel = stream.readString(-1);\n\t\t\t\t\t// TODO: support SWF6+ anchors.\n\t\t\t\t\tstream.pos = tagEnd;\n\t\t\t\t\tbreak;\n\t\t\t\tcase SwfTagCode.CODE_SHOW_FRAME:\n\t\t\t\t\tthis.finishFrame();\n\t\t\t\t\tbreak;\n\t\t\t\tcase SwfTagCode.CODE_END:\n\t\t\t\t\treturn;\n\t\t\t\tcase SwfTagCode.CODE_EXPORT_ASSETS:\n\t\t\t\t\ttagEnd = stream.pos + tagLength;\n\t\t\t\t\tlet exportsCount = stream.readUi16();\n\t\t\t\t\tlet exports = this._currentExports || (this._currentExports = []);\n\t\t\t\t\twhile (exportsCount--) {\n\t\t\t\t\t\tlet symbolId = stream.readUi16();\n\t\t\t\t\t\tlet className = stream.readString(-1);\n\t\t\t\t\t\tif (stream.pos > tagEnd) {\n\t\t\t\t\t\t\tstream.pos = tagEnd;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\texports.push(new SymbolExport(symbolId, className));\n\t\t\t\t\t}\n\t\t\t\t\tstream.pos = tagEnd;\n\t\t\t\t\tbreak;\n\t\t\t\tcase SwfTagCode.CODE_DEFINE_BUTTON_CXFORM:\n\t\t\t\tcase SwfTagCode.CODE_DEFINE_BUTTON_SOUND:\n\t\t\t\tcase SwfTagCode.CODE_DEFINE_FONT_INFO:\n\t\t\t\tcase SwfTagCode.CODE_DEFINE_FONT_INFO2:\n\t\t\t\tcase SwfTagCode.CODE_DEFINE_SCALING_GRID:\n\t\t\t\tcase SwfTagCode.CODE_IMPORT_ASSETS:\n\t\t\t\tcase SwfTagCode.CODE_IMPORT_ASSETS2:\n\t\t\t\t\tDebug.warning('Unsupported tag encountered ' + tagCode + ': ' + getSwfTagCodeName(tagCode));\n\t\t\t\t\tthis.jumpToNextTag(tagLength);\n\t\t\t\t\tbreak;\n\t\t\t\t// These tags should be supported at some point, but for now, we ignore them.\n\t\t\t\tcase SwfTagCode.CODE_CSM_TEXT_SETTINGS:\n\t\t\t\tcase SwfTagCode.CODE_DEFINE_FONT_ALIGN_ZONES:\n\t\t\t\tcase SwfTagCode.CODE_SCRIPT_LIMITS:\n\t\t\t\tcase SwfTagCode.CODE_SET_TAB_INDEX:\n\t\t\t\t// These tags are used by the player, but not relevant to us.\n\t\t\t\tcase SwfTagCode.CODE_ENABLE_DEBUGGER:\n\t\t\t\tcase SwfTagCode.CODE_ENABLE_DEBUGGER2:\n\t\t\t\tcase SwfTagCode.CODE_DEBUG_ID:\n\t\t\t\tcase SwfTagCode.CODE_DEFINE_FONT_NAME:\n\t\t\t\tcase SwfTagCode.CODE_NAME_CHARACTER:\n\t\t\t\tcase SwfTagCode.CODE_PRODUCT_INFO:\n\t\t\t\tcase SwfTagCode.CODE_METADATA:\n\t\t\t\tcase SwfTagCode.CODE_PROTECT:\n\t\t\t\tcase SwfTagCode.CODE_PATHS_ARE_POSTSCRIPT:\n\t\t\t\tcase SwfTagCode.CODE_TELEMETRY:\n\t\t\t\t// These are obsolete Generator-related tags.\n\t\t\t\tcase SwfTagCode.CODE_GEN_TAG_OBJECTS:\n\t\t\t\tcase SwfTagCode.CODE_GEN_COMMAND:\n\t\t\t\t\tthis.jumpToNextTag(tagLength);\n\t\t\t\t\tbreak;\n\t\t\t\t// These tags aren't used in the player.\n\t\t\t\tcase SwfTagCode.CODE_CHARACTER_SET:\n\t\t\t\tcase SwfTagCode.CODE_DEFINE_BEHAVIOUR:\n\t\t\t\tcase SwfTagCode.CODE_DEFINE_COMMAND_OBJECT:\n\t\t\t\tcase SwfTagCode.CODE_DEFINE_FUNCTION:\n\t\t\t\tcase SwfTagCode.CODE_DEFINE_TEXT_FORMAT:\n\t\t\t\tcase SwfTagCode.CODE_DEFINE_VIDEO:\n\t\t\t\tcase SwfTagCode.CODE_EXTERNAL_FONT:\n\t\t\t\tcase SwfTagCode.CODE_FREE_CHARACTER:\n\t\t\t\tcase SwfTagCode.CODE_FREE_ALL:\n\t\t\t\tcase SwfTagCode.CODE_GENERATE_FRAME:\n\t\t\t\tcase SwfTagCode.CODE_STOP_SOUND:\n\t\t\t\tcase SwfTagCode.CODE_SYNC_FRAME:\n\t\t\t\t\tconsole.info(\"Ignored tag (these shouldn't occur) \" + tagCode + ': ' + getSwfTagCodeName(tagCode));\n\t\t\t\t\tthis.jumpToNextTag(tagLength);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tif (tagCode > 100) {\n\t\t\t\t\t\tDebug.warning(\"Encountered undefined tag \" + tagCode + \", probably used for AVM1 \" +\n\t\t\t\t\t\t\t\"obfuscation. See http://ijs.mtasa.com/files/swfdecrypt.cpp.\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\tDebug.warning('Tag not handled by the parser: ' + tagCode + ': ' + getSwfTagCodeName(tagCode));\n\t\t\t\t\t}\n\t\t\t\t\tthis.jumpToNextTag(tagLength);\n\t\t\t}\n\t\t}\n\n\t\tparseSpriteTimeline(spriteTag: DictionaryEntry) {\n\t\t\tSWF.enterTimeline(\"parseSpriteTimeline\");\n\t\t\tlet data = this.data;\n\t\t\tlet stream = this._dataStream;\n\t\t\tlet dataView = this._dataView;\n\t\t\tlet timeline: any = {\n\t\t\t\tid: spriteTag.id,\n\t\t\t\ttype: 'sprite',\n\t\t\t\tframes: []\n\t\t\t};\n\t\t\tlet spriteTagEnd = spriteTag.byteOffset + spriteTag.byteLength;\n\t\t\tlet frames = timeline.frames;\n\t\t\tlet label: string = null;\n\t\t\tlet controlTags: UnparsedTag[] = [];\n\t\t\tlet soundStreamHead: Parser.SoundStream = null;\n\t\t\tlet soundStreamBlock: Uint8Array = null;\n\t\t\tlet actionBlocks: { actionsData: Uint8Array; precedence: number }[] = null;\n\t\t\tlet initActionBlocks: { spriteId: number; actionsData: Uint8Array }[] = null;\n\t\t\t// Skip ID.\n\t\t\tstream.pos = spriteTag.byteOffset + 2;\n\t\t\t// TODO: check if numFrames or the real number of ShowFrame tags wins. (Probably the former.)\n\t\t\ttimeline.frameCount = dataView.getUint16(stream.pos, true);\n\t\t\tstream.pos += 2;\n\t\t\tlet spriteContentTag = new UnparsedTag(0, 0, 0);\n\t\t\twhile (stream.pos < spriteTagEnd) {\n\t\t\t\tthis.parseNextTagHeader(spriteContentTag);\n\t\t\t\tlet tagLength = spriteContentTag.byteLength;\n\t\t\t\tlet tagCode = spriteContentTag.tagCode;\n\t\t\t\tif (stream.pos + tagLength > spriteTagEnd) {\n\t\t\t\t\tDebug.warning(\"DefineSprite child tags exceed DefineSprite tag length and are dropped\");\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tif (Parser.ControlTags[tagCode]) {\n\t\t\t\t\tcontrolTags.push(new UnparsedTag(tagCode, stream.pos, tagLength));\n\t\t\t\t\tstream.pos += tagLength;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tswitch (tagCode) {\n\t\t\t\t\tcase SwfTagCode.CODE_DO_ACTION:\n\t\t\t\t\t\tif (this.useAVM1) {\n\t\t\t\t\t\t\tif (!actionBlocks) {\n\t\t\t\t\t\t\t\tactionBlocks = [];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tlet actionsData = data.subarray(stream.pos, stream.pos + tagLength);\n\t\t\t\t\t\t\tactionBlocks.push({actionsData: actionsData, precedence: stream.pos});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase SwfTagCode.CODE_DO_INIT_ACTION:\n\t\t\t\t\t\tif (this.useAVM1) {\n\t\t\t\t\t\t\tif (!initActionBlocks) {\n\t\t\t\t\t\t\t\tinitActionBlocks = [];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tlet spriteId = dataView.getUint16(stream.pos, true);\n\t\t\t\t\t\t\tstream.pos += 2;\n\t\t\t\t\t\t\tlet actionsData = data.subarray(stream.pos, stream.pos + tagLength);\n\t\t\t\t\t\t\tinitActionBlocks.push({spriteId: spriteId, actionsData: actionsData});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase SwfTagCode.CODE_FRAME_LABEL:\n\t\t\t\t\t\tlet tagEnd = stream.pos + tagLength;\n\t\t\t\t\t\tlabel = stream.readString(-1);\n\t\t\t\t\t\t// TODO: support SWF6+ anchors.\n\t\t\t\t\t\tstream.pos = tagEnd;\n\t\t\t\t\t\ttagLength = 0;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase SwfTagCode.CODE_SHOW_FRAME:\n\t\t\t\t\t\tframes.push(new SWFFrame(controlTags, label, soundStreamHead, soundStreamBlock,\n\t\t\t\t\t\t\tactionBlocks, initActionBlocks, null));\n\t\t\t\t\t\tlabel = null;\n\t\t\t\t\t\tcontrolTags = [];\n\t\t\t\t\t\tsoundStreamHead = null;\n\t\t\t\t\t\tsoundStreamBlock = null;\n\t\t\t\t\t\tactionBlocks = null;\n\t\t\t\t\t\tinitActionBlocks = null;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase SwfTagCode.CODE_END:\n\t\t\t\t\t\tstream.pos = spriteTagEnd;\n\t\t\t\t\t\ttagLength = 0;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t// Ignore other tags.\n\t\t\t\t}\n\t\t\t\tstream.pos += tagLength;\n\t\t\t\trelease || assert(stream.pos <= spriteTagEnd);\n\t\t\t}\n\t\t\tSWF.leaveTimeline();\n\t\t\treturn timeline;\n\t\t}\n\n\t\tprivate jumpToNextTag(currentTagLength: number) {\n\t\t\tthis._dataStream.pos += currentTagLength;\n\t\t}\n\n\t\tprivate emitTagSlopWarning(tag: UnparsedTag, tagEnd: number) {\n\t\t\tlet consumedBytes = this._dataStream.pos - tag.byteOffset;\n\t\t\tDebug.warning('Scanning ' + getSwfTagCodeName(tag.tagCode) + ' at offset ' + tag.byteOffset +\n\t\t\t\t' consumed ' + consumedBytes + ' of ' + tag.byteLength + ' bytes. (' +\n\t\t\t\t(tag.byteLength - consumedBytes) + ' left)');\n\t\t\tthis._dataStream.pos = tagEnd;\n\t\t}\n\n\t\tprivate finishFrame() {\n\t\t\tif (this.pendingUpdateDelays === 0) {\n\t\t\t\tthis.framesLoaded++;\n\t\t\t}\n\t\t\tthis.frames.push(new SWFFrame(this._currentControlTags,\n\t\t\t\tthis._currentFrameLabel,\n\t\t\t\tthis._currentSoundStreamHead,\n\t\t\t\tthis._currentSoundStreamBlock,\n\t\t\t\tthis._currentActionBlocks,\n\t\t\t\tthis._currentInitActionBlocks,\n\t\t\t\tthis._currentExports));\n\t\t\tthis._currentFrameLabel = null;\n\t\t\tthis._currentControlTags = null;\n\t\t\tthis._currentSoundStreamHead = null;\n\t\t\tthis._currentSoundStreamBlock = null;\n\t\t\tthis._currentActionBlocks = null;\n\t\t\tthis._currentInitActionBlocks = null;\n\t\t\tthis._currentExports = null;\n\t\t}\n\n\t\tprivate setFileAttributes(tagLength: number) {\n\t\t\t// TODO: check what happens to attributes tags that aren't the first tag.\n\t\t\tif (this.attributes) {\n\t\t\t\tthis.jumpToNextTag(tagLength);\n\t\t\t}\n\t\t\tlet bits = this.data[this._dataStream.pos];\n\t\t\tthis._dataStream.pos += 4;\n\t\t\tthis.attributes = {\n\t\t\t\tnetwork: bits & 0x1,\n\t\t\t\trelativeUrls: bits & 0x2,\n\t\t\t\tnoCrossDomainCaching: bits & 0x4,\n\t\t\t\tdoAbc: bits & 0x8,\n\t\t\t\thasMetadata: bits & 0x10,\n\t\t\t\tuseGpu: bits & 0x20,\n\t\t\t\tuseDirectBlit: bits & 0x40\n\t\t\t};\n\t\t\tthis.useAVM1 = !this.attributes.doAbc;\n\t\t}\n\n\t\tprivate setSceneAndFrameLabelData(tagLength: number) {\n\t\t\tif (this.sceneAndFrameLabelData) {\n\t\t\t\tthis.jumpToNextTag(tagLength);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.sceneAndFrameLabelData = Parser.LowLevel.parseDefineSceneTag(\n\t\t\t\tthis._dataStream, SwfTagCode.CODE_DEFINE_SCENE_AND_FRAME_LABEL_DATA);\n\t\t}\n\n\t\tprivate addControlTag(tagCode: number, byteOffset: number, tagLength: number) {\n\t\t\tlet controlTags = this._currentControlTags || (this._currentControlTags = []);\n\t\t\tcontrolTags.push(new UnparsedTag(tagCode, byteOffset, tagLength));\n\t\t\tthis.jumpToNextTag(tagLength);\n\n\t\t}\n\n\t\tprivate addLazySymbol(tagCode: number, byteOffset: number, tagLength: number) {\n\t\t\tlet id = this._dataView.getUint16(this._dataStream.pos, true);\n\t\t\tlet symbol = new DictionaryEntry(id, tagCode, byteOffset, tagLength);\n\t\t\tthis.dictionary[id] = symbol;\n\t\t\tif (!release && traceLevel.value > 0) {\n\t\t\t\tconsole.info(\"Registering symbol \" + id + \" of type \" + getSwfTagCodeName(tagCode));\n\t\t\t}\n\t\t\treturn symbol;\n\t\t}\n\n\t\tprivate decodeEmbeddedFont(unparsed: UnparsedTag) {\n\t\t\tlet definition = this.getParsedTag(unparsed);\n\t\t\tlet symbol = new EagerlyParsedDictionaryEntry(definition.id, unparsed, 'font', definition,\n\t\t\t\tthis.env);\n\t\t\tif (!release && traceLevel.value > 0) {\n\t\t\t\tlet style = flagsToFontStyle(definition.bold, definition.italic);\n\t\t\t\tconsole.info(\"Decoding embedded font \" + definition.id + \" with name '\" + definition.name +\n\t\t\t\t\t\"' and style \" + style, definition);\n\t\t\t}\n\t\t\tthis.eagerlyParsedSymbolsMap[symbol.id] = symbol;\n\t\t\tthis.eagerlyParsedSymbolsList.push(symbol);\n\n\t\t\tlet style = flagsToFontStyle(definition.bold, definition.italic);\n\t\t\tthis.fonts.push({name: definition.name, id: definition.id, style: style});\n\t\t}\n\n\t\tprivate registerEmbeddedFont(unparsed: UnparsedTag) {\n\t\t\tif (!inFirefox) {\n\t\t\t\tthis.decodeEmbeddedFont(unparsed);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet stream = this._dataStream;\n\t\t\tlet id = this._dataView.getUint16(stream.pos, true);\n\t\t\tlet style: string;\n\t\t\tlet name: string;\n\t\t\t// DefineFont only specifies a symbol ID, no font name or style.\n\t\t\tif (unparsed.tagCode === SwfTagCode.CODE_DEFINE_FONT) {\n\t\t\t\t// Assigning some unique name to simplify font registration and look ups.\n\t\t\t\tname = '__autofont__' + unparsed.byteOffset;\n\t\t\t\tstyle = 'regular';\n\t\t\t} else {\n\t\t\t\tlet flags = this.data[stream.pos + 2];\n\t\t\t\tstyle = flagsToFontStyle(!!(flags & 0x1), !!(flags & 0x2));\n\t\t\t\tlet nameLength = this.data[stream.pos + 4];\n\t\t\t\t// Skip language code.\n\t\t\t\tstream.pos += 5;\n\t\t\t\tname = stream.readString(nameLength);\n\t\t\t}\n\t\t\tthis.fonts.push({name: name, id: id, style: style});\n\t\t\tif (!release && traceLevel.value > 0) {\n\t\t\t\tconsole.info(\"Registering embedded font \" + id + \" with name '\" + name + \"' and style \" +\n\t\t\t\t\tstyle);\n\t\t\t}\n\t\t\tstream.pos = unparsed.byteOffset + unparsed.byteLength;\n\t\t}\n\n\t\tprivate decodeEmbeddedImage(unparsed: UnparsedTag) {\n\t\t\tlet definition = this.getParsedTag(unparsed);\n\t\t\tlet symbol = new EagerlyParsedDictionaryEntry(definition.id, unparsed, 'image', definition,\n\t\t\t\tthis.env);\n\t\t\tif (!release && traceLevel.value > 0) {\n\t\t\t\tconsole.info(\"Decoding embedded image \" + definition.id + \" of type \" +\n\t\t\t\t\tgetSwfTagCodeName(unparsed.tagCode) + \" (start: \" + unparsed.byteOffset +\n\t\t\t\t\t\", end: \" + (unparsed.byteOffset + unparsed.byteLength) + \")\");\n\t\t\t}\n\t\t\tthis.eagerlyParsedSymbolsMap[symbol.id] = symbol;\n\t\t\tthis.eagerlyParsedSymbolsList.push(symbol);\n\t\t}\n\t}\n\n\tfunction flagsToFontStyle(bold: boolean, italic: boolean) {\n\t\tif (bold && italic) {\n\t\t\treturn 'boldItalic';\n\t\t}\n\t\tif (bold) {\n\t\t\treturn 'bold';\n\t\t}\n\t\tif (italic) {\n\t\t\treturn 'italic';\n\t\t}\n\t\treturn 'regular';\n\t}\n\n\texport class SWFFrame {\n\t\tcontrolTags: UnparsedTag[];\n\t\tlabelName: string;\n\t\tsoundStreamHead: Parser.SoundStream;\n\t\tsoundStreamBlock: Uint8Array;\n\t\tactionBlocks: ActionBlock[];\n\t\tinitActionBlocks: InitActionBlock[];\n\t\texports: SymbolExport[];\n\n\t\tconstructor(controlTags?: UnparsedTag[], labelName?: string,\n\t\t            soundStreamHead?: Parser.SoundStream,\n\t\t            soundStreamBlock?: Uint8Array,\n\t\t            actionBlocks?: ActionBlock[],\n\t\t            initActionBlocks?: InitActionBlock[],\n\t\t            exports?: SymbolExport[]) {\n\t\t\trelease || controlTags && Object.freeze(controlTags);\n\t\t\tthis.controlTags = controlTags;\n\t\t\tthis.labelName = labelName;\n\t\t\trelease || actionBlocks && Object.freeze(actionBlocks);\n\t\t\tthis.soundStreamHead = soundStreamHead;\n\t\t\tthis.soundStreamBlock = soundStreamBlock;\n\t\t\tthis.actionBlocks = actionBlocks;\n\t\t\trelease || initActionBlocks && Object.freeze(initActionBlocks);\n\t\t\tthis.initActionBlocks = initActionBlocks;\n\t\t\trelease || exports && Object.freeze(exports);\n\t\t\tthis.exports = exports;\n\t\t}\n\t}\n\n\texport class ABCBlock {\n\t\tname: string;\n\t\tflags: number;\n\t\tdata: Uint8Array;\n\t}\n\n\texport class ActionBlock {\n\t\tactionsData: Uint8Array;\n\t\tprecedence: number;\n\t}\n\n\texport class InitActionBlock {\n\t\tspriteId: number;\n\t\tactionsData: Uint8Array;\n\t}\n\n\texport class SymbolExport {\n\t\tconstructor(public symbolId: number, public className: string) {\n\t\t}\n\t}\n\n\texport class UnparsedTag {\n\t\tconstructor(public tagCode: number, public byteOffset: number, public byteLength: number) {\n\t\t}\n\t}\n\n\texport class DictionaryEntry extends UnparsedTag {\n\t\tpublic id: number;\n\n\t\tconstructor(id: number, tagCode: number, byteOffset: number, byteLength: number) {\n\t\t\tsuper(tagCode, byteOffset, byteLength);\n\t\t\tthis.id = id;\n\t\t}\n\t}\n\n\texport class EagerlyParsedDictionaryEntry extends DictionaryEntry {\n\t\ttype: string;\n\t\tdefinition: Object;\n\t\tenv: any;\n\t\tready: boolean;\n\n\t\tconstructor(id: number, unparsed: UnparsedTag, type: string, definition: any, env: any) {\n\t\t\tsuper(id, unparsed.tagCode, unparsed.byteOffset, unparsed.byteLength);\n\t\t\tthis.type = type;\n\t\t\tthis.definition = definition;\n\t\t\tthis.env = env;\n\t\t\tthis.ready = false;\n\t\t}\n\t}\n\n\tfunction readSWFLength(bytes: Uint8Array) {\n\t\t// We read the length manually because creating a DataView just for that is silly.\n\t\treturn (bytes[4] | bytes[5] << 8 | bytes[6] << 16 | bytes[7] << 24) >>> 0;\n\t}\n\n\tfunction defineSymbol(swfTag: any, symbols: any) {\n\t\tswitch (swfTag.code) {\n\t\t\tcase SwfTagCode.CODE_DEFINE_BITS:\n\t\t\tcase SwfTagCode.CODE_DEFINE_BITS_JPEG2:\n\t\t\tcase SwfTagCode.CODE_DEFINE_BITS_JPEG3:\n\t\t\tcase SwfTagCode.CODE_DEFINE_BITS_JPEG4:\n\t\t\t\treturn Shumway.SWF.Parser.defineImage(swfTag);\n\t\t\tcase SwfTagCode.CODE_DEFINE_BITS_LOSSLESS:\n\t\t\tcase SwfTagCode.CODE_DEFINE_BITS_LOSSLESS2:\n\t\t\t\treturn Shumway.SWF.Parser.defineBitmap(swfTag);\n\t\t\tcase SwfTagCode.CODE_DEFINE_BUTTON:\n\t\t\tcase SwfTagCode.CODE_DEFINE_BUTTON2:\n\t\t\t\treturn Shumway.SWF.Parser.defineButton(swfTag, symbols);\n\t\t\tcase SwfTagCode.CODE_DEFINE_EDIT_TEXT:\n\t\t\t\treturn Shumway.SWF.Parser.defineText(swfTag);\n\t\t\tcase SwfTagCode.CODE_DEFINE_FONT:\n\t\t\tcase SwfTagCode.CODE_DEFINE_FONT2:\n\t\t\tcase SwfTagCode.CODE_DEFINE_FONT3:\n\t\t\tcase SwfTagCode.CODE_DEFINE_FONT4:\n\t\t\t\treturn Shumway.SWF.Parser.defineFont(swfTag);\n\t\t\tcase SwfTagCode.CODE_DEFINE_MORPH_SHAPE:\n\t\t\tcase SwfTagCode.CODE_DEFINE_MORPH_SHAPE2:\n\t\t\tcase SwfTagCode.CODE_DEFINE_SHAPE:\n\t\t\tcase SwfTagCode.CODE_DEFINE_SHAPE2:\n\t\t\tcase SwfTagCode.CODE_DEFINE_SHAPE3:\n\t\t\tcase SwfTagCode.CODE_DEFINE_SHAPE4:\n\t\t\t\treturn Shumway.SWF.Parser.defineShape(swfTag);\n\t\t\tcase SwfTagCode.CODE_DEFINE_SOUND:\n\t\t\t\treturn Shumway.SWF.Parser.defineSound(swfTag);\n\t\t\tcase SwfTagCode.CODE_DEFINE_VIDEO_STREAM:\n\t\t\t\treturn {\n\t\t\t\t\ttype: 'video',\n\t\t\t\t\tid: swfTag.id,\n\t\t\t\t\twidth: swfTag.width,\n\t\t\t\t\theight: swfTag.height,\n\t\t\t\t\tdeblocking: swfTag.deblocking,\n\t\t\t\t\tsmoothing: swfTag.smoothing,\n\t\t\t\t\tcodec: swfTag.codecId\n\t\t\t\t};\n\t\t\tcase SwfTagCode.CODE_DEFINE_SPRITE:\n\t\t\t\t// Sprites are fully defined at this point.\n\t\t\t\treturn swfTag;\n\t\t\tcase SwfTagCode.CODE_DEFINE_BINARY_DATA:\n\t\t\t\treturn {\n\t\t\t\t\ttype: 'binary',\n\t\t\t\t\tid: swfTag.id,\n\t\t\t\t\tdata: swfTag.data\n\t\t\t\t};\n\t\t\tcase SwfTagCode.CODE_DEFINE_TEXT:\n\t\t\tcase SwfTagCode.CODE_DEFINE_TEXT2:\n\t\t\t\treturn Shumway.SWF.Parser.defineLabel(swfTag);\n\t\t\tdefault:\n\t\t\t\treturn swfTag;\n\t\t}\n\t}\n}\n","/**\n * Copyright 2014 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nmodule Shumway {\n\tenum ImageTypeMagicHeaderBytes {\n\t\tJPG = 0xffd8ff,\n\t\tPNG = 0x89504e,\n\t\tGIF = 0x474946\n\t}\n\n\tlet mimetypesForHeaders: { [key: number]: string } = {};\n\tmimetypesForHeaders[ImageTypeMagicHeaderBytes.JPG] = 'image/jpeg';\n\tmimetypesForHeaders[ImageTypeMagicHeaderBytes.PNG] = 'image/png';\n\tmimetypesForHeaders[ImageTypeMagicHeaderBytes.GIF] = 'image/gif';\n\n\texport class ImageFile {\n\t\tenv: any;\n\t\tdata: Uint8Array;\n\t\tbytesLoaded: number;\n\t\timage: any; // Image\n\t\tmimeType: string;\n\t\ttype: number = 4;\n\t\twidth: number;\n\t\theight: number;\n\n\t\tconstructor(header: Uint8Array, fileLength: number, env: any) {\n\t\t\tthis.env = env;\n\t\t\tthis.bytesLoaded = header.length;\n\t\t\tif (header.length === fileLength) {\n\t\t\t\tthis.data = header;\n\t\t\t} else {\n\t\t\t\tthis.data = new Uint8Array(fileLength);\n\t\t\t\tthis.data.set(header);\n\t\t\t}\n\t\t\tthis.setMimetype();\n\t\t}\n\n\t\tget bytesTotal() {\n\t\t\treturn this.data.length;\n\t\t}\n\n\t\tappendLoadedData(data: Uint8Array) {\n\t\t\tthis.data.set(data, this.bytesLoaded);\n\t\t\tthis.bytesLoaded += data.length;\n\t\t}\n\n\t\tprivate setMimetype() {\n\t\t\tlet magic = (this.data[0] << 16) | (this.data[1] << 8) | this.data[2];\n\t\t\tthis.mimeType = mimetypesForHeaders[magic];\n\t\t}\n\t}\n}\n","/**\n * Copyright 2014 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Encapsulates as much of the external file loading process as possible. This means all of it\n * except for (stand-alone or embedded) images and fonts embedded in SWFs. As these have to be\n * decoded before being usable by content, we stall reporting loading progress until the decoding\n * has finished. The following is a description of the ridiculously complicated contortions we\n * have to go through for this to work:\n\n ### Life-cycle of embedded images and fonts from being encountered in the SWF to being ready for\n use:\n 1.\n 1. An image tag is encountered, `SWFFile#decodeEmbeddedImage` is called.\n 2. A font tag is encountered, `SWFFile#registerEmbeddedFont` is called. For Firefox, things end\n here for now: fonts can be decoded synchronously, so we don't need to do it eagerly.\n 2. Embedded asset's contents are extracted from SWF and stored in an\n `EagerlyParsedDictionaryEntry`.\n 3. Once scanning of the currently loaded SWF bytes is complete, `Loader#onNewEagerlyParsedSymbols`\n is called with a list of all newly encountered fonts and images.\n Note: `Loader` does *not* receive updates about any other newly loaded data; not even how many\n bytes were loaded.\n 4. `Loader#onNewEagerlyParsedSymbols` iterates over list of fonts and images and retrieves their\n symbols.\n 5. `LoaderInfo#getSymbolById` creates a `{Font,Bitmap}Symbol` instance, which gets a `syncID` and\n a `resolveAssetPromise` and a `ready` flag set to `false`.\n 6. `LoaderInfo#getSymbolById` invokes `Timeline.IAssetResolver#registerFont` or\n `Timeline.IAssetResolver#registerImage`. The singleton implementation of `IAssetResolver` is\n the active instance of `Player`.\n 7. `Player#registerFont` or `Player#registerImage` send sync message to GFX side requesting\n decoding of asset.\n 8. `GFXChannelDeserializerContext#register{Font,Image}` is called, which triggers the actual\n decoding and, in the image case, registration of the asset.\n 9.\n 1. A `CSSFont` is created and a 400ms timeout triggered.\n 2.\n 1. A `HTMLImageElement` is created and a load triggered from the blob containing the image\n bytes.\n 2. A `RenderableBitmap` is created with the `HTMLImageElement` as its `renderSource` and\n `-1,-1` dimensions.\n 10. `Loader#onNewEagerlyParsedSymbols` creates a `Promise.all` promise for all assets'\n `resolveAssetPromise`s and returns that to the `FileLoader`.\n 11. For all assets:\n 1. Loading finishes for images / timeout happens for fonts, resolving their\n `resolveAssetPromise`.\n 2. Symbols get marked as `ready`, fonts get their metrics filled in.\n 12. The combined promise is resolved, causing `FileLoader` to deliver the queued load update,\n informing content about newly loaded bytes, assets, scripts, etc.\n\n Note: loading and scanning of the SWF has continued in the meantime, so there can be multiple\n updates queued for the same promise.\n\n\n ### Usage of an image in GFX-land:\n Images are guaranteed to be ready for rendering when content is told about them, so there can\n never be a need to asynchronously decode them. If an image is never used for anything but\n rendering, it's never expanded into a Canvas. If, see below, content accesses the image's bytes,\n it's expanded and the original `HTMLImageElement` discarded.\n\n ### Usage of an image in Player-land:\n If content accesses an image's pixels for the first time, e.g. using `BitmapData#getPixel`, the\n `BitmapData` instance requests the pixel data from GFX-land. That causes the above-mentioned\n expansion into a Canvas and discarding of the `HTMLImageElement`, followed by a `getImageData`\n call.\n */\nmodule Shumway {\n\timport assert = Shumway.Debug.assert;\n\timport SWFFile = Shumway.SWF.SWFFile;\n\n\t// Minimal amount of data to load before starting to parse. Chosen fairly arbitrarily.\n\tlet MIN_LOADED_BYTES = 8192;\n\n\texport class LoadProgressUpdate {\n\t\tconstructor(public bytesLoaded: number, public framesLoaded: number) {\n\t\t}\n\t}\n\n\texport interface ILoadListener {\n\t\tonLoadOpen: (x: any) => void;\n\t\tonLoadProgress: (update: LoadProgressUpdate) => void;\n\t\tonNewEagerlyParsedSymbols: (symbols: SWF.EagerlyParsedDictionaryEntry[],\n\t\t                            delta: number) => Promise<any>;\n\t\tonImageBytesLoaded: () => void;\n\t\tonLoadComplete: () => void;\n\t\tonLoadError: () => void;\n\t}\n\n\texport class FileLoader {\n\t\t_url: string;\n\t\t_file: any; // {SWFFile|ImageFile}\n\n\t\tprivate _listener: ILoadListener;\n\t\tprivate _env: any;\n\t\tprivate _loadingServiceSession: FileLoadingSession;\n\t\tprivate _delayedUpdatesPromise: Promise<any>;\n\t\tprivate _lastDelayedUpdate: LoadProgressUpdate;\n\t\tprivate _bytesLoaded: number;\n\t\tprivate _queuedInitialData: Uint8Array;\n\n\n\t\tconstructor(listener: ILoadListener, env: any) {\n\t\t\trelease || assert(listener);\n\t\t\tthis._file = null;\n\t\t\tthis._url = '';\n\t\t\tthis._listener = listener;\n\t\t\tthis._env = env;\n\t\t\tthis._loadingServiceSession = null;\n\t\t\tthis._delayedUpdatesPromise = null;\n\t\t\tthis._bytesLoaded = 0;\n\t\t}\n\n\t\t// TODO: strongly type\n\t\tloadFile(request: any) {\n\t\t\tthis._url = request.url;\n\t\t\tSWF.enterTimeline('Load file', request.url);\n\t\t\tthis._bytesLoaded = 0;\n\t\t\tlet session = this._loadingServiceSession = FileLoadingService.instance.createSession();\n\t\t\tsession.onopen = this.processLoadOpen.bind(this);\n\t\t\tsession.onprogress = this.processNewData.bind(this);\n\t\t\tsession.onerror = this.processError.bind(this);\n\t\t\tsession.onclose = this.processLoadClose.bind(this);\n\t\t\tsession.open(request);\n\t\t}\n\n\t\tabortLoad() {\n\t\t\tif (this._loadingServiceSession) {\n\t\t\t\tthis._loadingServiceSession.close();\n\t\t\t\tSWF.leaveTimeline();\n\t\t\t}\n\t\t\tthis._file = null;\n\t\t}\n\n\t\tloadBytes(bytes: Uint8Array) {\n\t\t\tSWF.enterTimeline('Load bytes');\n\t\t\tthis.processLoadOpen();\n\t\t\tthis.processNewData(bytes, {bytesLoaded: bytes.length, bytesTotal: bytes.length});\n\t\t\tthis.processLoadClose();\n\t\t\t// SWF.leaveTimeline happens in processLoadClose.\n\t\t}\n\n\t\tprocessLoadOpen() {\n\t\t\trelease || assert(!this._file);\n\t\t}\n\n\t\tprocessNewData(data: Uint8Array, progressInfo: { bytesLoaded: number; bytesTotal: number }) {\n\t\t\tthis._bytesLoaded += data.length;\n\t\t\tlet isLoadingInProgress = progressInfo.bytesLoaded < progressInfo.bytesTotal;\n\t\t\tif (this._bytesLoaded < MIN_LOADED_BYTES && isLoadingInProgress) {\n\t\t\t\tif (!this._queuedInitialData) {\n\t\t\t\t\tthis._queuedInitialData = new Uint8Array(Math.min(MIN_LOADED_BYTES,\n\t\t\t\t\t\tprogressInfo.bytesTotal));\n\t\t\t\t}\n\t\t\t\tthis._queuedInitialData.set(data, this._bytesLoaded - data.length);\n\t\t\t\treturn;\n\t\t\t} else if (this._queuedInitialData) {\n\t\t\t\tlet allData = new Uint8Array(this._bytesLoaded);\n\t\t\t\tallData.set(this._queuedInitialData);\n\t\t\t\tallData.set(data, this._bytesLoaded - data.length);\n\t\t\t\tdata = allData;\n\t\t\t\tthis._queuedInitialData = null;\n\t\t\t}\n\t\t\tlet file = this._file;\n\t\t\tlet eagerlyParsedSymbolsCount = 0;\n\t\t\tlet previousFramesLoaded = 0;\n\t\t\tif (!file) {\n\t\t\t\tfile = this._file = createFileInstanceForHeader(data, progressInfo.bytesTotal, this._env);\n\t\t\t\tif (file) {\n\t\t\t\t\tthis._listener.onLoadOpen(file);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (file instanceof SWFFile) {\n\t\t\t\t\teagerlyParsedSymbolsCount = file.eagerlyParsedSymbolsList.length;\n\t\t\t\t\tpreviousFramesLoaded = file.framesLoaded;\n\t\t\t\t}\n\t\t\t\tfile.appendLoadedData(data);\n\t\t\t}\n\t\t\tif (file instanceof SWFFile) {\n\t\t\t\tthis.processSWFFileUpdate(file, eagerlyParsedSymbolsCount, previousFramesLoaded);\n\t\t\t} else {\n\t\t\t\trelease || assert(file instanceof ImageFile);\n\t\t\t\tthis._listener.onLoadProgress(new LoadProgressUpdate(progressInfo.bytesLoaded, -1));\n\t\t\t\tif (progressInfo.bytesLoaded === progressInfo.bytesTotal) {\n\t\t\t\t\tthis._listener.onImageBytesLoaded();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tprocessError(error: any) {\n\t\t\tDebug.warning('Loading error encountered:', error);\n\t\t}\n\n\t\tprocessLoadClose() {\n\t\t\tlet file = this._file;\n\t\t\tif (!file) {\n\t\t\t\tthis._listener.onLoadOpen(null);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (file instanceof SWFFile) {\n\t\t\t\tlet eagerlyParsedSymbolsCount = file.eagerlyParsedSymbolsList.length;\n\t\t\t\tlet previousFramesLoaded = file.framesLoaded;\n\n\t\t\t\tfile.finishLoading();\n\n\t\t\t\tthis.processSWFFileUpdate(file, eagerlyParsedSymbolsCount, previousFramesLoaded);\n\t\t\t}\n\t\t\tif (file.bytesLoaded !== file.bytesTotal) {\n\t\t\t\tDebug.warning(\"Shouldn't have reached this: aborting a load should prevent this from \" +\n\t\t\t\t\t\"being called.\");\n\t\t\t\tDebug.warning(new Error().stack);\n\t\t\t} else {\n\t\t\t\tSWF.leaveTimeline();\n\t\t\t}\n\t\t}\n\n\t\tprivate processSWFFileUpdate(file: SWFFile, previousEagerlyParsedSymbolsCount: number,\n\t\t                             previousFramesLoaded: number) {\n\t\t\tlet promise: any;\n\t\t\tlet eagerlyParsedSymbolsDelta = file.eagerlyParsedSymbolsList.length -\n\t\t\t\tpreviousEagerlyParsedSymbolsCount;\n\t\t\tif (!eagerlyParsedSymbolsDelta) {\n\t\t\t\tlet update = this._lastDelayedUpdate;\n\t\t\t\tif (!update) {\n\t\t\t\t\trelease || assert(file.framesLoaded === file.frames.length);\n\t\t\t\t\tthis._listener.onLoadProgress(new LoadProgressUpdate(file.bytesLoaded,\n\t\t\t\t\t\tfile.framesLoaded));\n\t\t\t\t} else {\n\t\t\t\t\trelease || assert(update.framesLoaded <= file.frames.length);\n\t\t\t\t\tupdate.bytesLoaded = file.bytesLoaded;\n\t\t\t\t\tupdate.framesLoaded = file.frames.length;\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tpromise = this._listener.onNewEagerlyParsedSymbols(file.eagerlyParsedSymbolsList,\n\t\t\t\teagerlyParsedSymbolsDelta);\n\t\t\tif (this._delayedUpdatesPromise) {\n\t\t\t\tpromise = Promise.all([this._delayedUpdatesPromise, promise]);\n\t\t\t}\n\t\t\tthis._delayedUpdatesPromise = promise;\n\t\t\tlet update = new LoadProgressUpdate(file.bytesLoaded, file.frames.length);\n\t\t\tthis._lastDelayedUpdate = update;\n\t\t\tfile.pendingUpdateDelays++;\n\t\t\tlet self = this;\n\t\t\t// Make sure the framesLoaded value from after this update isn't yet visible. Otherwise,\n\t\t\t// we might signal a higher value than allowed if this update is delayed sufficiently long\n\t\t\t// for another update to arrive in the meantime. That update sets the framesLoaded value too\n\t\t\t// high. Then, this update gets resolved, but signals a value for framesLoaded that's too\n\t\t\t// high.\n\t\t\tfile.framesLoaded = previousFramesLoaded;\n\t\t\tpromise.then(function () {\n\t\t\t\tif (!release && SWF.traceLevel.value > 0) {\n\t\t\t\t\tconsole.log(\"Reducing pending update delays from \" + file.pendingUpdateDelays + \" to \" +\n\t\t\t\t\t\t(file.pendingUpdateDelays - 1));\n\t\t\t\t}\n\t\t\t\tfile.pendingUpdateDelays--;\n\t\t\t\trelease || assert(file.pendingUpdateDelays >= 0);\n\t\t\t\tfile.framesLoaded = update.framesLoaded;\n\t\t\t\tself._listener.onLoadProgress(update);\n\t\t\t\tif (self._delayedUpdatesPromise === promise) {\n\t\t\t\t\tself._delayedUpdatesPromise = null;\n\t\t\t\t\tself._lastDelayedUpdate = null;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction createFileInstanceForHeader(header: Uint8Array, fileLength: number, env: any): any {\n\t\tlet magic = (header[0] << 16) | (header[1] << 8) | header[2];\n\n\t\tif ((magic & 0xffff) === FileTypeMagicHeaderBytes.SWF) {\n\t\t\treturn new SWFFile(header, fileLength, env);\n\t\t}\n\n\t\tif (magic === FileTypeMagicHeaderBytes.JPG || magic === FileTypeMagicHeaderBytes.PNG ||\n\t\t\tmagic === FileTypeMagicHeaderBytes.GIF) {\n\t\t\treturn new ImageFile(header, fileLength, env);\n\t\t}\n\n\t\t// TODO: throw instead of returning null? Perhaps?\n\t\treturn null;\n\t}\n\n\tenum FileTypeMagicHeaderBytes {\n\t\tSWF = 0x5753,\n\t\tJPG = 0xffd8ff,\n\t\tPNG = 0x89504e,\n\t\tGIF = 0x474946\n\t}\n}\n","/*\n * Copyright 2014 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n///<reference path='parser/references.ts' />\n///<reference path='module.ts'/>\n///<reference path='settings.ts'/>\n///<reference path='stream.ts' />\n///<reference path='mp3decodersession.ts' />\n///<reference path='SWFFile.ts' />\n///<reference path='ImageFile.ts' />\n///<reference path='FileLoader.ts' />\n"]}